import { Tab, Tabs } from "@rspress/core/theme";

# Layer 2의 탈중앙화 거래소를 통한 스테이킹

상기시켜 드리자면, 탈중앙화 스테이킹의 이점을 누리기 위해 Rocket Pool을 통해 직접 ETH를 rETH로 교환할 필요는 없습니다.
rETH가 본질적으로 가치가 증가하므로 보유하기만 하면 됩니다 - 어떻게 얻었는지는 중요하지 않습니다!

그렇긴 하지만, 주요 관심사 중 하나(특히 최근)는 스테이킹 또는 ETH를 rETH로 교환하는 것과 관련된 가스 비용입니다.

이를 줄이는 데 도움이 되도록 Ethereum 네트워크는 [rollups](https://www.youtube.com/watch?v=7pWxCklcNsU) - **Layer 2**로도 알려진 - 의 사용을 시작했습니다.

Layer 2는 Ethereum 아래에 존재하는 여러 개별 네트워크로 구성되며, Ethereum이 일반적으로 하는 것처럼 많은 거래를 실행하지만, 모든 것을 하나의 "메가" 거래로 롤업하고 대신 메인 Ethereum 체인에 *그것*을 게시합니다.
이상적으로 이것은 Ethereum의 탈중앙화 특성과 관련된 모든 보안 이점을 얻으면서 Layer 2의 실행 및 저장 비용이 훨씬 낮고 거래의 일부만 상태가 훨씬 더 비싼 Layer 1에 저장되어야 하므로 거래에 대해 **훨씬 낮은 가스 수수료**를 누릴 수 있다는 것을 의미합니다.

Rocket Pool은 현재 두 개의 Layer 2 네트워크를 지원합니다: [Optimism](https://www.optimism.io/) 및 [Arbitrum](https://arbitrum.io/).
둘 다 가장 널리 사용되는 탈중앙화 거래소 프로토콜인 [Uniswap](https://docs.uniswap.org/protocol/introduction)의 실행 버전이 있습니다.
Uniswap을 사용하면 ETH를 rETH로 빠르고 쉽게 교환할 수 있습니다.

이 접근 방식을 사용하는 장점은 **가스 수수료가 다른 방법보다 상당히 낮다**는 것입니다.
소량의 ETH를 스테이킹하고 싶어서 이것이 중요한 경우, Layer 2 네트워크를 사용하는 것이 선택할 수 있는 옵션이 될 가능성이 높습니다.

단점은 rETH에서 최상의 거래를 얻지 못할 수도 있다는 것입니다.
Uniswap은 유동성 공급자에게 제공되는 소액의 수수료를 필요로 하며, 대규모 거래는 너무 많은 가격 영향 없이 좋은 거래를 얻기 위해 대규모 유동성 풀을 필요로 합니다.
Layer 2 네트워크는 메인 Ethereum 네트워크보다 rETH 유동성이 낮은 경향이 있습니다.

따라서 Layer 2 네트워크에서 얻을 총 rETH를 다른 방법을 통해 얻을 것과 비교하여 이 경로를 추구하는 것이 합리적인지 결정하는 것이 좋습니다.

[Optimism 풀](https://info.uniswap.org/#/optimism/pools/0xaefc1edaede6adadcdf3bb344577d45a80b19582) 및 [Arbitrum 풀](https://info.uniswap.org/#/arbitrum/pools/0xaac7de2b91293ba1791503d9127d2bdf2159db65)의 현재 ETH 및 rETH 잔액을 확인하여 교환을 처리할 충분한 rETH가 있는지 확인할 수 있습니다.

다음 예에서는 Layer 2 네트워크와 상호 작용하고 Uniswap을 사용하여 ETH를 rETH로 교환하는 방법을 보여드리겠습니다.

::: warning 참고
현재 이 방법은 Mainnet에서만 사용할 수 있습니다.
Hoodi Testnet에서 연습하려면 [Rocket Pool과 직접 교환](./via-rp)해야 합니다.

**이 가이드의 나머지 부분은 Mainnet에 있다고 가정합니다.**
:::

이 프로세스는 web3 호환 지갑으로 완료할 수 있습니다.
데모 목적으로 더 인기 있는 지갑 선택 중 하나인 [MetaMask](https://metamask.io/)를 사용하겠습니다.

**다른 지갑을 선택하는 경우 유사한 단계를 따를 수 있어야 합니다 - 각 단계마다 지갑에서 비슷한 기능을 찾기만 하면 됩니다.**

## Mainnet에서 MetaMask 설정

아직 설치하지 않았다면 [MetaMask](https://metamask.io/)를 설치하는 것으로 시작하세요.
사이트의 지침에 따라 확장 프로그램을 설치하고 계정을 만들고 로그인하세요.

다음으로, 브라우저 도구 모음의 아이콘을 사용하여 MetaMask 패널을 엽니다.
상단 도구 모음의 **네트워크 드롭다운**을 클릭하고 **Ethereum Mainnet**이 선택되어 있는지 확인하세요:

<img src="./images/mm_network_main.png" width="100%" height="auto" />

그 바로 아래의 주소가 귀하의 **Ethereum 지갑 주소**입니다.

더 진행하기 전에 이 지갑에 ETH를 공급해야 합니다.
이전 사용으로 계정에 ETH가 이미 없는 경우, 기존 계정에서 이 지갑 주소로 ETH를 전송하여 이를 수행할 수 있습니다.

## Hop을 통해 Layer 1에서 Layer 2로 ETH 전송

Ethereum Mainnet에서 Layer 2 네트워크로 ETH를 브리징하는 방법에는 여러 가지가 있습니다.
이 데모에서는 [Hop](https://docs.hop.exchange/faq) 프로토콜을 사용하겠습니다 - Layer 1에서 여러 Layer 2 네트워크로 또는 Layer 2 네트워크 간에 ETH(및 몇 가지 다른 코인)를 이동하는 간단하고 신뢰할 수 있는 방법입니다.

여기에서 Hop 거래소 웹사이트로 이동하세요:

[https://app.hop.exchange/send?token=ETH](https://app.hop.exchange/send?token=ETH)

홈 화면은 다음과 같이 표시됩니다:

<img src="./images/hop.png" width="100%" height="auto" />

오른쪽 상단 모서리의 **Connect a Wallet** 버튼을 클릭하는 것으로 시작하세요.
사용하려는 지갑 제공자를 묻는 화면이 표시됩니다.
이 예에서는 **MetaMask**를 선택하세요.

::: tip 참고
MetaMask를 사용하지 않는 경우, WalletConnect와 같은 다른 제공자 중 하나가 지갑과 호환될 가능성이 높습니다.
:::

해당 버튼을 클릭하면 MetaMask가 사용하려는 계정을 선택하도록 요청하는 프롬프트와 함께 팝업됩니다.
하나만 있다고 가정하면 계정이 이미 선택되어 있어야 합니다.
**Next**를 클릭하세요.

그런 다음 Hop이 계정 주소를 볼 수 있도록 액세스 권한을 부여할지 묻습니다:

<img src="./images/hop_connect.png" width="100%" height="auto" />

**Connect**를 클릭하고 잠시 후 지갑이 Hop에 연결됩니다.
이제 화면 오른쪽 상단 모서리에 ETH 잔액이 표시됩니다.

이제 **From** 및 **To (estimated)** 상자의 두 드롭다운을 사용하여 네트워크를 선택하고 **From** 상자에 보내려는 ETH 양을 입력할 수 있습니다.

예를 들어, Layer 1에서 Arbitrum으로 0.1 ETH를 보내는 것은 다음과 같이 보일 것입니다:

<img src="./images/hop_send.png" width="100%" height="auto" />

::: warning 참고
상기시켜 드리자면, Uniswap(따라서 Rocket Pool 스테이킹)은 현재 **Optimism 및 Arbitrum에서만 지원**됩니다.
이러한 네트워크 중 하나를 선택해야 합니다.
:::

준비가 되면 **Send** 버튼을 클릭하세요.
Metamask는 거래와 관련된 가스 수수료를 표시하는 확인 대화 상자와 함께 팝업됩니다:

<img src="./images/hop_confirm.png" width="100%" height="auto" />

해당 가스 수수료가 만족스럽다면 **Confirm**을 클릭하여 거래를 시작하세요.
잠시 후 MetaMask가 성공적인 거래 확인 메시지와 함께 팝업되고 이제 선택한 Layer 2 네트워크에서 ETH를 사용할 수 있습니다!

## Layer 2에서 Uniswap에 연결

이제 지갑이 설정되고 자금이 입금되었으므로 다음 URL로 이동하면 Uniswap이 열리고 자동으로 ETH를 rETH로 교환하는 것이 표시됩니다:

[https://app.uniswap.org/#/swap?inputCurrency=eth](https://app.uniswap.org/#/swap?inputCurrency=eth)

페이지는 처음에 다음과 같이 표시됩니다:

<img src="./images/uni_connect.png" width="100%" height="auto" />

오른쪽 상단 모서리에 강조 표시된 것과 같은 `Connect Wallet` 버튼 중 하나를 클릭하세요.
사용하려는 지갑 제공자를 묻는 화면이 표시됩니다.
이 예에서는 **MetaMask**를 선택하세요.

::: tip 참고
MetaMask를 사용하지 않는 경우, WalletConnect와 같은 다른 제공자 중 하나가 지갑과 호환될 가능성이 높습니다.
:::

해당 버튼을 클릭하면 MetaMask가 Hop에서 했던 것처럼 사용하려는 계정을 선택하도록 요청하는 또 다른 프롬프트와 함께 팝업됩니다.
계정이 선택된 상태로 두고 **Next**를 클릭한 다음 이전에 Hop에서 했던 것처럼 **Connect**를 클릭하세요.
잠시 후 지갑이 Uniswap에 연결됩니다.
이제 화면 오른쪽 상단 모서리에 ETH 잔액이 표시됩니다.

가장 먼저 할 일은 Ethereum 메인넷에서 방금 교환한 Layer 2로 네트워크를 변경하는 것입니다.
화면 오른쪽 상단의 네트워크 드롭다운을 클릭하세요(여기에서 빨간색으로 강조 표시됨):

<img src="./images/uni_network.png" width="100%" height="auto" />

그렇게 하면 MetaMask가 사용자 지정 네트워크를 추가할 것인지 확인하도록 요청합니다:

<img src="./images/uni_net_confirm.png" width="100%" height="auto" />

**Approve**를 클릭한 다음 **Switch Network**를 클릭하세요.
이렇게 하면 MetaMask가 거래에 대해 Ethereum의 메인넷 대신 새 Layer 2 네트워크를 사용하도록 변경됩니다.

::: warning 참고
MetaMask로 거래를 수행하기 전에 _항상_ MetaMask를 열고 상단의 네트워크 드롭다운을 확인하여 현재 사용 중인 네트워크를 확인하세요!
실수로 다른 네트워크로 전환하고 잊어버리기 쉽습니다!
:::

## MetaMask에 rETH 추가

다음 단계는 MetaMask에 rETH 토큰을 추가하여 잔액을 보고 거래를 위해 액세스할 수 있도록 하는 것입니다.
**Assets** 탭을 클릭한 다음 **Add Token**을 클릭하세요:

<img src="./images/mm_add_token.png" width="100%" height="auto" />

이 대화 상자에서 **Custom Token**이 선택되어 있는지 확인하고 선택한 Layer 2 네트워크에 대한 적절한 탭을 아래에서 선택하세요:

<div className="p-3">
  <Tabs>
    <Tab label="Optimism">
      **Token Contract Address** 상자에 다음 값을 입력하세요:

      ```shell
      0x9bcef72be871e61ed4fbbc7630889bee758eb81d
      ```

      **Token Symbol**은 자동으로 `rETH`로 채워지고 **Decimals of Precision**은 자동으로 `18`로 채워집니다.

      나머지 프롬프트를 수락하면 목록에 rETH 토큰이 표시됩니다.
    </Tab>
    <Tab label="Arbitrum">
      **Token Contract Address** 상자에 다음 값을 입력하세요:

      ```shell
      0xec70dcb4a1efa46b8f2d97c310c9c4790ba5ffa8
      ```

      **Token Symbol**은 자동으로 `rETH`로 채워지고 **Decimals of Precision**은 자동으로 `18`로 채워집니다.

      나머지 프롬프트를 수락하면 목록에 rETH 토큰이 표시됩니다.
    </Tab>

  </Tabs>
</div>

## Uniswap으로 ETH를 rETH로 교환

프로세스의 마지막 단계는 교환을 수행하는 것입니다!

**Select a token** 드롭다운을 클릭하고 방금 MetaMask에 추가한 rETH의 주소를 입력하세요(rETH만 입력할 수도 있지만 **올바른 토큰인지 확인하고 사칭자나 사기 토큰이 아닌지 확인**하려면 먼저 주소를 확인하세요).

::: warning 참고
처음에 다음과 같은 경고 메시지가 표시될 수 있습니다:

<img src="./images/unknown_token.jpg" width="100%" height="auto" />

이것은 Uniswap이 사용 중인 Layer에서 rETH를 정식 토큰 목록에 추가할 때까지의 임시 경고입니다.
토큰 주소가 Optimism의 `0x9bcef72be871e61ed4fbbc7630889bee758eb81d` 또는 Arbitrum의 `0xec70dcb4a1efa46b8f2d97c310c9c4790ba5ffa8`인 한 안전하게 추가할 수 있습니다.
:::

다음으로 교환하려는 ETH 양을 입력하면 Uniswap의 UI가 받게 될 rETH 양을 보여줍니다:

<img src="./images/arb_swap.png" width="100%" height="auto" />

::: warning 참고
받게 될 rETH 양이 입금한 ETH 양보다 **적다**는 것을 알 수 있습니다.
이것은 정상입니다. 왜냐하면 **rETH는 ETH보다 가치가 높고** 시간이 지남에 따라 지속적으로 평가되기 때문입니다.
스크린샷 하단에 강조 표시된 환율에서 이를 확인할 수 있습니다.
:::

이제 **Swap**을 클릭하여 슬리피지로 인해 받을 수 있는 최소 금액을 포함한 거래 세부 정보를 확인하세요.
만족하면 **Confirm Swap**을 클릭하세요.
이렇게 하면 요청이 MetaMask로 전송되며, 여기서 확인하기 전에 총 거래 비용을 검토할 수 있습니다:

<img src="./images/arb_gas.png" width="100%" height="auto" />

::: tip 참고
여기에서 예상 가스 수수료에 **세심한 주의**를 기울이세요.
가스 수수료 측면에서 Layer 2 네트워크에서 이 교환을 수행하는 것이 Ethereum Mainnet에서보다 **약 10배 저렴**하다는 것을 알 수 있을 것입니다!
:::

받게 될 rETH의 총량에 비해 가스 수수료가 만족스럽다면 **Confirm**을 클릭하여 거래를 제출하세요.
잠시 후 MetaMask에서 성공적으로 완료되었다는 알림이 표시되며 이제 지갑에 rETH 토큰이 표시됩니다.

그게 다입니다! 이제 Rocket Pool과 스테이킹하고 있습니다. rETH를 보유하기만 하면 rETH 토큰의 가치가 증가함에 따라 자동으로 스테이킹 보상을 받게 됩니다.
