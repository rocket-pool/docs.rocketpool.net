import { Tab, Tabs } from "@rspress/core/theme";

# 온체인 pDAO 제안 참여하기

투표권이 0이 아닌 모든 노드는 언제든지 pDAO 제안을 제기하거나 참여할 수 있습니다. 제안은 다음 유형 중 하나일 수 있습니다:

- pDAO 설정 변경
- 일회성 재무 지출
- 반복 재무 지출(관리 위원회)
- 보안 위원회 멤버십

자세한 내용과 근거는 [제안 유형](https://rpips.rocketpool.net/RPIPs/RPIP-33#proposal-types)을 참조하세요.
pDAO 제안은 프로토콜 수준에서 변경 사항을 실행하기 위해 존재하는 온체인 엔터티라는 점을 이해하는 것이 중요합니다.

## 거버넌스 프로세스

제안은 온체인에 등록되기 전에 거버넌스 프로세스를 통해 예고되어야 합니다.

Rocket Pool 프로토콜에 대한 변경 사항은 엄격하면서도 투명한 거버넌스 프로세스를 사용하여 제안, 투표 및 실행됩니다. 이 프로세스는 Discord 커뮤니티 내에서 아이디어에 대한 비공식 논의로 시작됩니다. 그런 다음 이 아이디어는 Discord의 [#governance](https://discordapp.com/channels/405159462932971535/774497904559783947) 채널과 [DAO 포럼](https://dao.rocketpool.net/)에서 공식 논의로 진행되며, [Rocket Pool 개선 제안(RPIP)](https://rpips.rocketpool.net/)을 준비하기 위해 철저한 연구, 모델링 및 검토를 거칩니다. 이후 RPIP 초안이 준비되고 지정된 RPIP 검토자가 DAO에 제출할 준비가 되었는지 품질을 확인합니다. 그런 다음 초안 제안은 추가 검토, 피드백 및 필요한 변경 사항을 반영하기 위해 포럼에서 DAO에 제출됩니다. 커뮤니티 의견을 바탕으로 제안이 개선되면, RPIP 텍스트를 최종 확정할 준비가 되었는지 확인하기 위해 DAO 포럼에서 투표가 진행됩니다. 투표가 통과되어 커뮤니티의 승인을 나타내면, RPIP가 최종으로 표시되고 Snapshot을 통해 수행되는 Protocol DAO 투표를 위해 준비됩니다.

여기서 Oracle DAO가 온체인 제안을 제기합니다. Protocol DAO, Oracle DAO 및 커뮤니티가 제안을 검토할 수 있는 기간이 있습니다. 합의에 도달하면 제안이 실행되고 프로토콜에 변경 사항이 적용됩니다.

이 프로세스에 대한 편리한 시각적 표현은 [Rocket Pool 웹사이트](https://rocketpool.net/governance/process)에서 찾을 수 있습니다.

## 전제 조건

계속하기 전에 [제안의 생애주기](/ko/legacy/houston/pdao#lifecycle-of-a-pdao-proposal)를 읽어주세요. 모든 투표 기간과 각 기간 동안 수행할 수 있는 작업의 차이점을 설명합니다.

이 페이지의 나머지 부분에서는 온체인 pDAO 제안에 참여하는 데 필요한 단계를 안내합니다.

## 투표 초기화

Houston 업그레이드 이전에 등록한 노드 운영자인 경우, 투표권을 잠금 해제하려면 투표를 초기화해야 합니다. 투표권을 갖기 위해서는 최소한 하나의 미니풀이 있어야 한다는 점을 명심하세요.

```shell
rocketpool pdao initialize-voting
```

이 명령은 아래 프롬프트를 표시합니다. 주의 깊게 읽어주세요:

```
투표권을 초기화해 주셔서 감사합니다!

두 가지 옵션이 있습니다:

1. 직접 투표(투표권을 자신에게 위임)
   이를 통해 제안에 직접 투표할 수 있으며,
   프로토콜의 방향을 직접 결정할 수 있습니다.

2. 투표 위임
   신뢰하는 사람에게 투표권을 위임하여,
   귀하를 대신하여 투표할 권한을 부여합니다. 재정의 옵션이 있습니다.

https://delegates.rocketpool.net 에서 기존 공개 위임자 목록을 볼 수 있지만,
모든 노드 주소에 위임할 수 있습니다.

/ko/legacy/houston/participate#participating-in-on-chain-pdao-proposals 를 통해 이 모든 것이 어떻게 작동하는지 자세히 알아보세요

계속하려면 `direct` 또는 `delegate`를 입력하세요:
```

- `direct`로 응답하면, 투표권이 귀하의 노드로 초기화되고 Protocol DAO 제안에 직접 투표할 수 있습니다.
- `delegate`로 응답하면, 동일한 트랜잭션 내에서 투표를 초기화하고 [위임자를 설정](/ko/legacy/houston/participate#delegating-voting-power)하여 가스를 절약할 수 있습니다.

이 작업은 한 번만 수행하면 됩니다. 노드의 초기 스냅샷 정보를 구성합니다. 투표를 초기화한 후 수행하는 모든 작업은 노드의 스냅샷 정보를 업데이트합니다. 투표권이 초기화되면 다음 스마트노드 명령을 사용하여 보유량을 확인할 수 있습니다:

```shell
rocketpool pdao status
```

:::tip 참고
새 제안이 생성될 때마다 네트워크의 투표권과 위임자 정보의 스냅샷을 나타내는 투표 트리가 새 제안과 함께 생성됩니다. 즉, 투표를 초기화하기 전에 제안이 제기된 경우 노드의 투표권이 해당 제안에 포함되지 않습니다. `rocketpool pdao status`는 최신 블록에서 노드의 투표권을 표시하며, 이는 특정 제안에 대한 투표권을 대표할 수도 있고 그렇지 않을 수도 있습니다.
:::

## 자동 투표권 초기화

스마트노드 버전 `1.13.8`은 아직 투표권을 초기화하지 않은 노드에서 투표권을 자동으로 초기화하도록 설계된 새로운 기능 **자동 투표권 초기화**를 도입합니다. 자동으로 초기화된 투표권은 자체 위임됩니다. 이 기능은 `rocketpool service config`를 실행하고 **Smartnode and TX Fees** 섹션으로 이동하여 스마트노드 설정에서 구성할 수 있습니다.

<img src="./images/auto_init_vp.png" width="100%" height="auto" />

**Auto-Init Vote Power Gas Threshold**는 이 자동 트랜잭션에 대한 제한(gwei 단위)입니다. 임계값을 0으로 설정하여 이 작업을 비활성화할 수 있습니다. Houston 업그레이드 이후에 노드가 등록되었거나 투표권이 이미 활성화된 경우 비활성화해도 됩니다.

## Snapshot 신호 주소 설정

Snapshot 신호 주소를 설정하면 노드 키를 핫 월렛에 노출하지 않고도 브라우저나 모바일 장치에서 Snapshot 투표에 참여할 수 있습니다.

준비해야 할 몇 가지 사항:

- 노드 주소
- Snapshot 투표에 사용할 주소(신호 주소)

노드 주소가 새 주소에 위임할 수 있다는 메시지에 서명하게 됩니다. 이 메시지는 월렛 주소를 Snapshot 신호 주소로 사용하려는 의도를 나타냅니다.

아래 탭 중 하나에서 사용 중인 네트워크를 선택하세요.

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnet">Hoodi 테스트넷에서 시도하는 경우 이 페이지에서 서명할 수 있습니다: https://testnet.node.rocketpool.net/signalling-address</Tab>
    <Tab label="Mainnet">메인넷에서 구성할 준비가 되었다면 여기로 이동하세요: https://node.rocketpool.net/signalling-address</Tab>
  </Tabs>
</div>

:::danger 경고
노드의 개인 키를 핫 월렛에 로드하지 마세요. 신호 주소로 사용할 다른 계정을 선택하세요.
신호 주소를 설정한 후 노드의 투표권으로 Snapshot에서 투표할 수 있습니다.
:::

MetaMask, WalletConnect 또는 웹사이트가 지원하는 다른 방법을 사용하여 **신호 주소로 사용할 주소를 웹사이트에 연결**하는 것으로 시작합니다. 그러면 노드 주소를 조회하는 대화상자가 표시됩니다.

다음으로 노드 주소를 입력한 후 주황색 "Find" 버튼을 클릭합니다. 주소가 등록된 노드인지 확인한 후 다음 단계로 이동합니다.

:::tip 팁
**진행하기 전에 올바른 노드 주소가 있는지 확인하세요!** 노드 주소를 확인해야 하는 경우 `rocketpool node status` 명령을 사용하여 CLI를 통해 빠르게 검색할 수 있습니다.
:::

로그인하고 노드 주소를 확인하면 **Snapshot 신호 주소**가 표시됩니다. 사이트에 로그인한 계정과 동일해야 합니다. 계속하기 전에 이것이 올바른지 다시 확인하세요. 원하는 계정에 로그인했다고 확신하면 주황색 "Sign Message" 버튼을 클릭하세요. 월렛 확장 앱에서 다음 메시지에 서명하라는 프롬프트가 표시됩니다:

```
`snapshot signalling address` may delegate to me for Rocket Pool governance
```

서명에는 가스 비용이 들지 않지만 설정에는 비용이 듭니다. 서명한 후 프론트엔드는 스마트노드에 붙여넣을 명령을 제공합니다. 스마트노드의 CLI에 붙여넣고 안내 단계를 따르세요. 명령은 다음과 같습니다:

```shell
rocketpool pdao set-signalling-address
`snapshot signalling address`
`EIP712 signature`
```

CLI에서 이 메시지가 표시되면 모두 설정된 것입니다!

```
The node's signalling address was successfully set to `snapshot signalling address`
```

:::tip 팁
실수로 사이트를 닫거나 명령을 잃어버려도 걱정하지 마세요. 단순히 단계를 반복하고 **동일한 노드 주소와 신호 주소를 사용하여 다시 서명**하면 됩니다. 프론트엔드는 ethers 라이브러리의 `signer.Signmessage()`를 사용하므로, 동일한 입력이 주어지면 서명이 결정론적입니다.
자세한 내용은 [여기](https://docs.ethers.org/v6/api/providers/#cid_865)를 클릭하세요.
:::

신호 주소를 지우는 것은 매우 쉽습니다. CLI에서 다음 명령을 사용하면 됩니다:

```shell
rocketpool pdao clear-signalling-address
```

## RPL 잠금 허용

제안에 투표하는 데만 관심이 있다면 이 단계를 무시해도 됩니다. RPL 잠금 허용은 제안을 제안하거나 이의를 제기하려는 사람들에게만 필요합니다.

제안 및 이의 제기에는 RPL 잠금이 필요합니다. 기본적으로 어떤 목적으로든 RPL을 잠그는 것은 비활성화됩니다. 노드 운영자는 노드 또는 기본 출금 주소에서 RPL 잠금을 활성화하여 거버넌스 활동 수행에 참여할 수 있습니다. 스마트노드에서 다음 명령을 사용하여 수행할 수 있습니다:

```shell
rocketpool node allow-rpl-locking
```

이렇게 하면 거버넌스 제안을 생성하거나 이의를 제기할 때 RPL 잠금을 허용하라는 메시지가 표시됩니다. 반대로 다음 명령을 사용하여 RPL 잠금을 비활성화할 수 있습니다:

```shell
rocketpool node deny-rpl-locking
```

::: tip 참고
잠긴 RPL은 보상, 투표 및 담보 요구 사항 측면에서 일반 스테이킹된 RPL과 동일하게 작동합니다.
잠긴 RPL은 RPL 출금 임계값에 포함되지 않습니다.
:::

## 투표권 위임

노드 운영자는 투표권을 다른 노드 운영자에게 위임할 수 있습니다. 유일한 요구 사항은 위임자가 등록된 노드여야 한다는 것입니다.

다른 노드에 온체인 투표권을 위임하려면 다음 명령을 사용하세요:

```shell
rocketpool pdao set-voting-delegate `address`
```

::: tip 참고
투표권을 다른 노드 운영자에게 위임한 경우, 위임자 주소를 자신의 노드 주소로 설정하여 재설정할 수 있습니다.
:::

- 제안의 1단계 동안: **투표자** 및 **위임자**가 제안에 투표할 수 있습니다.
- 제안의 2단계 동안: 투표를 위임한 **노드 운영자**는 위임자의 투표에 동의하지 않는 경우 이를 뒤집을 수 있습니다.

위임된 투표권을 가진 노드 운영자인 경우, 위임된 투표권이 제안에 반영되려면 투표 1단계에서 투표해야 합니다. 1단계에서의 투표는 **로컬 투표권 + 위임된 투표권**의 가치가 있습니다. 2단계에서의 투표는 **로컬 투표권**만의 가치가 있습니다.

## 제안 생성

제안할 자격을 얻으려면 노드가 몇 가지 요구 사항을 충족해야 합니다:

- 스냅샷에 포함됨([투표 초기화](/ko/legacy/houston/participate#initializing-voting) 또는 Houston 이후 등록을 통해)
- 최소한 하나의 미니풀이 있어야 함
- 0이 아닌 투표권을 가지고 있어야 함
- [RPL 잠금](/ko/legacy/houston/participate#allowing-rpl-locking)을 허용해야 함
- 제안 보증금보다 큰 RPL 스테이크(이미 잠긴 RPL 제외)를 가지고 있어야 함

제안은 프로토콜 수준에서 매개변수를 변경하고 코드를 실행하기 위해 존재합니다! 제안이 온체인에 생성되기 전에 [거버넌스](/ko/legacy/houston/participate#governance-process) 프로세스를 통해 논의와 합의가 있어야 합니다.

옵션 메뉴를 표시하려면 `rocketpool pdao propose` 명령을 사용하세요

```
COMMANDS:
   rewards-percentages, rp      Propose updating the RPL rewards allocation percentages for node operators, the Oracle DAO, and the Protocol DAO
   one-time-spend, ots          Propose a one-time spend of the Protocol DAO's treasury
   recurring-spend, rs          Propose a recurring spend of the Protocol DAO's treasury
   recurring-spend-update, rsu  Propose an update to an existing recurring spend plan
   security-council, sc         Modify the security council
   setting, s                   Make a Protocol DAO setting proposal
```

이러한 각 명령은 원하는 제안을 생성하기 위한 입력 목록을 프롬프트합니다. 이 가이드에서는 예제로 사용하기 위해 보안 위원회에 노드를 초대합니다. 보안 위원회에 노드를 초대하는 제안을 제기하려면 다음 명령을 사용합니다:

```shell
rocketpool pdao propose security-council invite
```

이 단계는 제안 유형에 따라 약간의 차이가 있다는 점을 명심하세요. 이 특정 명령 `rocketpool pdao propose security-council invite`는 ID와 회원 주소를 입력하라는 메시지를 표시합니다.

```
Please enter an ID for the member you'd like to invite: (no spaces)
test-member

Please enter the member's address:
0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145

... gas estimations ...

Are you sure you want to propose inviting test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) to the security council? [y/n]
```

블록에 포함된 후 pDAO 제안이 생성됩니다! 제안은 생성 시 [투표 지연 기간](/ko/legacy/houston/pdao#vote-delay-period)에 진입합니다.

## 제안 상태 보기

모든 제안에는 `proposalID`가 할당됩니다. 이 경우 보안 위원회에 `0xBdbc...`를 초대하는 우리의 제안은 `ID 71`로 표시됩니다. 제안의 상태를 보는 몇 가지 방법이 있습니다. 한 가지 방법은 모든 pdao 제안의 목록과 상태(보류 중, 성공, 실행됨 등)를 표시합니다. 두 번째 방법은 특정 제안에 대한 심층 세부 정보를 표시합니다.

<div className="p-3">
  <Tabs>
    <Tab label="제안 목록 보기">
      모든 제안을 나열하려면 다음 명령을 사용하세요:

      ```shell
      rocketpool pdao proposals list
      ```

      그러면 모든 제안과 상태 목록이 표시됩니다

      ```
      1 Pending proposal(s):

      71: invite test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) to the security council - Proposed by:
      0x681B8BBf08708e64694005c7Dc307b381b4D1A7D

      Succeeded proposal(s):

      Executed proposal(s):

      Destroyed proposal(s):

      Quorum not Met proposal(s):

      Defeated proposal(s):

      Expired proposal(s):

      ```

      여기서 제안 `invite test-member`의 ID가 71이고 보류 중 상태임을 알 수 있습니다. 이 상태에서는 [이의 제기자](/ko/legacy/houston/pdao#challenge-process)가 제안자가 제공한 머클 폴라드(투표권 계산에 사용됨)의 유효성에 이의를 제기할 수 있습니다. `proposal.vote.delay.time`이 끝나면 제안은 활성 투표 단계로 전환됩니다. [제안의 생애주기](/ko/legacy/houston/pdao#lifecycle-of-a-pdao-proposal) 복습을 자유롭게 검토하세요.
    </Tab>
    <Tab label="제안 세부 정보 보기">
      이제 제안 ID가 있으므로 다음 명령을 사용하여 제안 상태를 볼 수 있습니다:

      ```shell
      rocketpool pdao proposals details `proposal-id`
      ```

      여기서 특정 제안에 관한 모든 정보를 볼 수 있습니다. 예를 들어 실행 페이로드, 제안이 속한 단계 및 투표 방향입니다.

      ```
      Proposal ID: 71
      Message: invite test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) to the security council
      Payload: proposalSecurityInvite(test-member,0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145)
      Payload (bytes):
      f944c19f0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000bdbcb42dd8e39323a395b2b72d2c8e7039f1f145000000000000000000000000000000000000000000000000000000000000000b746573742d6d656d626572000000000000000000000000000000000000000000
      Proposed by: 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D
      Created at: 12 Mar 24 06:15 UTC
      State: Pending
      Voting start: 12 Mar 24 06:20 UTC
      Challenge window: 30m0s
      Voting power required: 90943818825
      Voting power for: 0
      Voting power against: 0
      Voting power abstained: 0
      Voting power against: 0
      Node has voted: no
      ```

      <p className="rspress-directive tip">
        <p className="rspress-directive-title">참고</p>
        이 샘플 제안의 상태는 `Pending`입니다. 이는 제안이 `Active (Phase 1)`로 이동하기 전에 이의를 제기할 수 있음을 나타냅니다. `Pending` 상태에서는 투표가 진행될 수 없습니다.
      </p>
    </Tab>

  </Tabs>
</div>

## 제안에 투표

투표 기간 동안 **노드 운영자** 및 **위임자**는 네 가지 옵션 중 하나로 투표할 수 있습니다:

```
1. Abstain: 투표자의 투표권은 정족수에 기여하지만 제안에 찬성하거나 반대하지 않습니다.
2. For: 투표자는 제안 실행에 찬성 투표합니다.
3. Against: 투표자는 제안 실행에 반대 투표합니다.
4. Veto: 투표자는 제안에 반대하며 제안을 스팸 또는 악의적이라고 판단함을 나타냅니다.
```

투표권은 선택한 옵션에 적용됩니다. 투표권은 "효과적인 RPL 스테이크"의 함수입니다.
더 자세한 내용은 [rocketpool-research 저장소](https://github.com/rocket-pool/rocketpool-research/blob/master/Protocol%20DAO/kane/pDAO%20Replacement/pDAO.md#overview-of-on-chain-voting)에서 찾을 수 있습니다.

::: tip 참고
위임된 투표권을 가진 노드 운영자인 경우, 위임된 투표권이 제안에 반영되려면 투표 1단계에서 투표해야 합니다. 1단계에서의 투표는 로컬 투표권 + 위임된 투표권의 가치가 있습니다. 2단계에서의 투표는 로컬 투표권만의 가치가 있습니다. 노드는 제안에 한 번만 투표할 수 있으므로 신중하게 선택하세요.
:::

투표하려면 다음 명령을 사용하세요:

```shell
rocketpool pdao proposals vote
```

활성 투표 단계에 있는 제안이 하나 이상 있는 경우 투표할 제안을 선택하라는 메시지가 표시됩니다.
메뉴는 노드가 투표할 수 있는 모든 제안을 표시해야 합니다:

```
1: proposal 71 (message: 'invite test-member', payload: proposalSecurityInvite(test-member,0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145), phase 1 end: 14 Mar 24 05:40 UTC, vp required: 0.00, for: 0.00, against: 0.00, abstained: 0.00, veto: 0.00, proposed by: 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D)
2: proposal 72 (message: 'replace langers-not-his-eoa (0xaC1396c21Eaf6630113516C69d63b7CB59B98b3E) on the security council with tpan (0x6E9E4Cc0A8172349E049128574E1fb85B8D3CE9E)', payload: proposalSecurityReplace(0xaC1396c21Eaf6630113516C69d63b7CB59B98b3E,tpan,0x6E9E4Cc0A8172349E049128574E1fb85B8D3CE9E), phase 1 end: 14 Mar 24 05:40 UTC, vp required: 0.00, for: 0.00, against: 0.00, abstained: 0.00, veto: 0.00, proposed by: 0xe2fC31d61E28BB16c0857D4682AB3616FA7A793d)
3: proposal 73 (message: 'set proposal.vote.delay.time', payload: proposalSettingUint(rocketDAOProtocolSettingsProposals,proposal.vote.delay.time,60), phase 1 end: 14 Mar 24 05:41 UTC, vp required: 0.00, for: 0.00, against: 0.00, abstained: 0.00, veto: 0.00, proposed by: 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D)
```

옵션을 선택한 후 어떻게 투표하고 싶은지 묻는 메시지가 표시됩니다.

```
How would you like to vote on the proposal?
1: Abstain
2: In Favor
3: Against
4: Veto
```

옵션을 선택하면 투표권이 표시되고 트랜잭션을 보내라는 메시지가 표시됩니다:

```
Your current voting power: 20123617964

+============== Suggested Gas Prices ==============+
| Avg Wait Time |  Max Fee  |    Total Gas Cost    |
| 15 Seconds    | 76 gwei   | 0.0176 to 0.0265 ETH |
| 1 Minute      | 56 gwei   | 0.0127 to 0.0190 ETH |
| 3 Minutes     | 56 gwei   | 0.0127 to 0.0190 ETH |
| >10 Minutes   | 56 gwei   | 0.0127 to 0.0190 ETH |
+==================================================+
These prices include a maximum priority fee of 2.00 gwei.
Please enter your max fee (including the priority fee) or leave blank for the default of 56 gwei:
```

트랜잭션이 블록에 포함되면 제안에 대한 투표가 성공적으로 완료됩니다! 이 시점에서 `rocketpool pdao proposal details <proposal-id>`를 사용하여 제안의 상태를 볼 수 있습니다. 제안이 성공하려면 `proposal.quorum` **필요한 투표권**에 도달하고 과반수 **찬성 투표권**이 필요합니다.

```
Voting power required:  140970562215
Voting power for:       197980809837
Voting power against:   0
Voting power abstained: 0
Voting power against:   0
Node has voted:         In Favor
```

위의 예제가 통과하려면 투표권이 `140970562215` 투표권의 정족수를 초과해야 합니다. `197980809837` 투표권이 찬성하고 반대 또는 기권 투표가 없습니다. 제안은 성공 준비가 되었으며 `proposal.vote.phase2.time` 종료까지 실행될 준비가 되었습니다.

## 성공한 제안 실행

축하합니다! 제안이 통과되었습니다! 이제 남은 것은 제안을 실행하는 것뿐입니다. 누구든지 제안의 실행자가 될 수 있다는 점을 명심하세요. 성공한 제안을 실행하려면 다음 명령을 입력하세요:

```shell
rocketpool pdao execute
```

옵션을 선택하면 트랜잭션을 보내라는 메시지가 표시됩니다. 이 트랜잭션이 블록에 포함되면 변경 사항이 Rocket Pool 프로토콜에 적용됩니다!

```
Please select a proposal to execute:
1: All available proposals
2: proposal 71 (invite test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) to the security council)',
proposalSecurityInvite(test-member,0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145)
```

## 보증금 및 보상 청구

제안자 또는 이의 제기자는 제안이 종료되면 보증금을 청구할 수 있습니다. 제안의 결과에 따라 제안자 또는 이의 제기자는 `proposal.bond` 및 `proposal.challenge.bond`를 청구할 수 있거나 없을 수 있습니다.

보증금을 청구할 수 있는 조건을 규정하는 몇 가지 규칙이 있습니다:

- 제안이 패배한 경우, 제안자는 보증금을 몰수하며 이는 제안의 패배에 기여한 이의 제기자들 사이에 비례적으로 분배됩니다. 다른 모든 이의 제기자는 보증금만 받습니다.
- 제안의 패배에 기여한다는 것은 이의 제기자가 나중에 제안자가 이의 제기에 응답하지 못함으로써 잘못된 것으로 입증된 인덱스를 제출했다는 것을 의미합니다. 여러 개의 잘못된 인덱스가 있을 수 있지만 제안의 패배로 이어진 것들만 보상을 공유합니다. 다른 모든 이의 제기자는 보증금만 받습니다.
- 이의 제기자가 노드에 이의를 제기하고 제안자가 응답하며 제안이 패배하지 않은 경우, 제안자는 무효한 이의 제기로부터 이의 제기 보증금을 청구할 수 있습니다.
- 제안이 패배한 경우, 제안자는 보증금을 몰수하며 이는 제안의 패배에 기여한 이의 제기자들 사이에 비례적으로 분배됩니다.

보증금을 청구하려면 다음 명령을 사용하세요:

```shell
rocketpool pdao claim-bonds
```

보증금을 청구할 수 있는 모든 제안이 표시됩니다. 지정된 제안에서 보증금을 청구하거나 모든 적격 제안에서 보증금과 보상을 청구할 수 있습니다.

```
Please select a proposal to unlock bonds / claim rewards from:
1: All available proposals
2: Proposal 42 (proposer: true, unlockable: 21.00 RPL, rewards: 0.00 RPL)
3: Proposal 43 (proposer: true, unlockable: 21.00 RPL, rewards: 0.00 RPL)
4: Proposal 44 (proposer: true, unlockable: 21.00 RPL, rewards: 0.00 RPL)
5: Proposal 46 (proposer: true, unlockable: 21.00 RPL, rewards: 0.00 RPL)
6: Proposal 47 (proposer: true, unlockable: 21.00 RPL, rewards: 0.00 RPL)
7: Proposal 48 (proposer: true, unlockable: 21.00 RPL, rewards: 0.00 RPL)
8: Proposal 49 (proposer: true, unlockable: 21.00 RPL, rewards: 0.00 RPL)
```

옵션을 선택하면 네트워크의 현재 가스 비용 권장 사항이 표시됩니다. 가스 가격 선택을 확인하고 나머지 프롬프트를 따르세요.

```
+============== Suggested Gas Prices ==============+
| Avg Wait Time |  Max Fee  |    Total Gas Cost    |
| 15 Seconds    | 26 gwei   | 0.1591 to 0.2387 ETH |
| 1 Minute      | 21 gwei   | 0.1261 to 0.1891 ETH |
| 3 Minutes     | 21 gwei   | 0.1261 to 0.1891 ETH |
| >10 Minutes   | 21 gwei   | 0.1261 to 0.1891 ETH |
+==================================================+

These prices include a maximum priority fee of 2.00 gwei.
Please enter your max fee (including the priority fee) or leave blank for the default of 21 gwei:


Using a max fee of 21.00 gwei and a priority fee of 2.00 gwei.
Are you sure you want to claim bonds and rewards from 7 proposals? [y/n]
```

첫 번째 옵션을 선택하여 사용 가능한 모든 제안을 청구하는 경우, 각각 개별적으로 실행되며 하나의 트랜잭션으로 실행되지 않습니다.

## 반복 재무 지출 생성

반복 재무 지출을 생성하려면 몇 가지 입력을 준비해야 합니다:

- 컨트랙트 이름
- 수신자 주소
- 기간당 보낼 RPL 금액
- 반복 결제 시작 시간(UNIX 타임스탬프)
- 각 결제 기간의 길이(시간/분/초, 예: 168h0m0s)
- 결제 기간 수

::: tip 정보
수신자는 결제를 청구하기 위해 컨트랙트 이름을 기록해야 합니다. 걱정하지 마세요. 이 정보는 저장되어 있으며 `rocketpool pdao proposals details <proposal-id>` 명령을 사용하여 검색할 수 있습니다
:::

반복 재무 지출을 설정하는 제안을 제기하려면 다음 스마트노드 명령을 사용하고 프롬프트를 따르세요:

```shell
rocketpool pdao propose recurring-spend
```

다음은 모두 함께 보이는 모습입니다:

```
Please enter a contract name for this recurring payment:
test-recurring-spend

Please enter a recipient address for this recurring payment:
0x681B8BBf08708e64694005c7Dc307b381b4D1A7D

Please enter an amount of RPL to send to 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D per period:
1

Your value will be multiplied by 10^18 to be used in the contracts, which results in:

[1000000000000000000]

Please make sure this is what you want and does not have any floating-point errors.

Is this result correct? [y/n]
y

Please enter the time that the recurring payment will start (as a UNIX timestamp):
1717935233

The provided timestamp corresponds to 2024-06-09 12:13:53 +0000 UTC - is this correct? [y/n]
y

Please enter the length of each payment period in hours / minutes / seconds (e.g., 168h0m0s):
720h

Please enter the total number of payment periods:
24
```

필요한 모든 입력을 입력하면 반복 결제를 생성하는 제안이 제기됩니다. pDAO가 이 제안을 통과시키고 실행하면, 수신자는 `2024-06-09 12:13:53 +0000 UTC`부터 시작하여 `720시간`마다 총 `24번의 결제`에 대해 `1 RPL`이 할당됩니다.

## 반복 재무 지출 청구

반복 결제 청구는 매우 간단합니다! [여기](https://node.rocketpool.net/claim-recurring-payments)의 프론트엔드 도구로 이동하세요. Hoodi 테스트넷에서 시도하는 경우 [이](https://testnet.node.rocketpool.net/stake-rpl-on-behalf-of-node) 링크를 대신 사용하세요.

사이트에 접속하면 **connect wallet** 버튼을 클릭하세요. 서비스 약관 및 개인 정보 보호 정책을 읽고 동의하면 다양한 연결 방법이 활성화되며 **metamask** 연결을 클릭하세요.

MetaMask에서 웹사이트에 연결할 계정을 선택하라는 메시지가 표시됩니다. 로그인한 후 **컨트랙트 이름**을 입력해야 합니다. 그러면 관련된 모든 세부 정보가 표시됩니다. 수신자 주소를 다시 확인하세요. 누구든지 청구 함수를 호출할 수 있지만 각 결제 컨트랙트에는 RPL을 분배할 지정된 수신자가 있습니다.

<img src="./images/claim_recurring1.png" width="100%" height="auto" />

언제든지 결제를 청구할 수 있으며, 가장 최근 기간까지의 총 미청구 RPL만 받게 됩니다. 또는 모든 기간이 지나갈 때까지 기다려 한 번에 모두 수집하고 가스를 절약할 수도 있습니다.

준비가 되면 큰 주황색 청구 버튼을 누르고 메타마스크(또는 선호하는 지갑)에서 트랜잭션을 검토하세요. 완료되면 모두 설정됩니다!
