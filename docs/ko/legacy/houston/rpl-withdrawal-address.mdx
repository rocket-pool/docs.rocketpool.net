import { Tab, Tabs } from "@rspress/core/theme";
import nodeAddress from "./images/node_address.png";
import rplWithdrawalConfirmation from "./images/rpl_withdrawal_confirmation.png";

# RPL 출금 주소 설정

[기본 출금 주소](../../node-staking/prepare-node#setting-your-primary-withdrawal-address)와 RPL 출금 주소의 차이를 이해하는 것이 중요합니다. 기본적으로 RPL 출금 주소는 설정되지 않으며, 기본 출금 주소는 모든 RPL 체크포인트 보상, 스테이킹된 RPL 및 비콘 체인 ETH가 전송되는 곳입니다.

원하는 경우 [RPL에 대한 별도의 출금 주소](https://rpips.rocketpool.net/RPIPs/RPIP-31)를 설정할 수 있습니다. 설정된 경우 RPL 출금 주소는 인플레이션 보상에서 RPL을 트리거하고 청구할 수 있으며 ETH 컨센서스 보상이나 ETH와 관련된 어떤 것에도 영향을 미치지 않습니다. 이 경우 기본 출금 주소는 더 이상 RPL 관련 작업에 대한 권한이 없습니다.

이는 RPL에 노출되기를 원하지 않는 노드 운영자에게 엔터티가 RPL을 제공할 수 있는 흥미로운 기회를 만듭니다. 해당 엔터티는 노드에 필요한 보험 담보를 제공하는 대가로 RPL 보상을 청구할 수 있습니다. 다시 말해, 이를 통해 각 담보 유형을 다른 행위자가 제공할 수 있습니다.

::: warning 참고
처음으로 노드를 설정할 때 RPL 출금 주소는 기본적으로 설정되지 않습니다.
RPL 출금 주소를 설정하기로 선택한 경우, **콜드 월렛에서 제어하는 다른 주소로 설정하는 것이 매우 중요합니다.**
콜드 월렛은 하드웨어 지갑([Ledger](https://www.ledger.com/), [Trezor](https://trezor.io/) 또는 [Grid+](https://gridplus.io/) 같은) 또는 스마트 컨트랙트 지갑([Safe](https://app.safe.global/welcome) 같은)일 수 있습니다.

MetaMask와 같은 핫 월렛을 RPL 출금 주소로 사용하지 **않을 것을 강력히 권장**합니다.

이렇게 하면 노드 월렛이 손상되더라도, 공격자가 강제 종료를 통해 스테이킹된 RPL에 접근할 수 없습니다. 모든 자금이 별도의 콜드 월렛(공격자가 접근할 수 없기를 바라는)으로 전송되기 때문입니다.

RPL 출금 주소는 노드 운영자 수준에서 설정됩니다.
여러 미니풀을 생성하는 경우, 모두 동일한 RPL 출금 주소를 참조하므로 이 설정을 한 번만 수행하면 됩니다.

Ethereum Foundation의 월렛 보안에 대한 기본 사항은 [여기](https://ethereum.org/en/security/#wallet-security)를 참조하세요.
:::

이를 수행하는 두 가지 방법이 있습니다.
어떤 방법이 귀하에게 적용되는지 결정하려면 아래 두 옵션을 모두 읽어주세요.

<div className="p-3">
  <Tabs>
    <Tab label="방법 1">
      *새 RPL 출금 주소가 MetaMask 또는 WalletConnect를 통해 트랜잭션에 서명하는 데 사용될 수 있는 경우 이 방법을 사용하세요.**

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">참고</p>
        이 방법은 새 RPL 출금 주소에서 **트랜잭션을 제출**해야 하므로 **해당 주소에 이미 소량의 ETH가 있어야 합니다.**
      </p>

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">참고</p>
        **Ledger** 하드웨어 지갑 사용자의 경우, Ledger Live는 아직 MetaMask 또는 WalletConnect를 기본적으로 지원하지 않습니다.
        대신 MetaMask를 사용하고 Ledger에 연결해야 합니다.
        이를 수행하려면 [공식 Ledger 지침](https://www.ledger.com/academy/security/the-safest-way-to-use-metamask)을 따르세요.

        Rocket Pool 웹사이트와 작업하려면 Ledger가 연결되어 있고 잠금 해제되어 있으며 ETH 앱이 열려 있어야 합니다.
        현재 세션에 대해 **"blind signing"을 활성화**해야 합니다. 이는 장치의 ETH 앱 설정 부분에서 찾을 수 있습니다.
        Bind signing은 세션을 닫으면 자동으로 비활성화됩니다.

        Hoodi Testnet을 사용하고 Ledger를 RPL 출금 주소로 사용하려는 경우, 테스트 네트워크에 라이브 주소를 연결하여 혼동을 일으키는 것을 방지하기 위해 **먼저 Ledger에 새 Ethereum 지갑을 생성**해야 합니다.
        Ledger를 MetaMask에 연결할 때 네트워크 선택 드롭다운에서 **Hoodi Testnet**을 선택했는지 확인하세요.
        Ledger Live는 테스트 네트워크의 잔액을 표시하지 않지만, 테스트 네트워크를 지원하는 다른 애플리케이션(MetaMask 및 Etherscan 같은)은 표시할 수 있습니다.
      </p>

      1. `rocketpool node set-rpl-withdrawal-address 'your cold wallet address or ENS name'`을 실행합니다. 새 RPL 출금 주소가 "보류 중"으로 표시됩니다. 확인할 때까지 **이전 RPL 출금 주소가 계속 사용됩니다**.
      2. 확인하려면 **새 RPL 출금 주소에서** 미니풀 컨트랙트로 특수 트랜잭션을 보내 RPL 출금 주소를 소유하고 있음을 확인해야 합니다.
      1. 이를 수행하는 가장 쉬운 방법은 Rocket Pool RPL 출금 주소 사이트([Hoodi Testnet](https://testnet.node.rocketpool.net/rpl-withdrawal-address) 또는 [Mainnet](https://node.rocketpool.net/rpl-withdrawal-address))로 이동하는 것입니다.
      3. Rocket Pool 웹사이트에 Metamask 또는 WalletConnect를 아직 연결하지 않은 경우 지금 수행하세요. 화면 중앙의 **select wallet** 버튼을 클릭하고 사용하려는 지갑에 따라 MetaMask 또는 WalletConnect를 선택하세요. 그러면 연결을 확인하라는 메시지가 표시됩니다. 예를 들어 MetaMask 사용:

      **Next**를 클릭한 다음 **Confirm**을 클릭하여 Rocket Pool 웹사이트가 지갑을 사용할 수 있도록 합니다. 3. 상단 메뉴(또는 모바일 장치인 경우 왼쪽의 햄버거 메뉴)에서 **RPL Withdrawal Address**를 선택합니다. 4. 다음 프롬프트가 표시됩니다:

      4. 여기에 **노드 월렛 주소**를 입력하고 주황색 **Find** 버튼을 클릭하여 계속합니다.

      <img src={nodeAddress} width="100%" height="auto"/>

      1.  보류 중인 RPL 출금 주소를 확인하라는 메시지가 표시됩니다. 이는 이전에 이 명령을 실행할 때 사용한 주소와 동일해야 합니다: `rocketpool node set-rpl-withdrawal-address` 준비가 되면 **Confirm Pending**을 선택하세요.
      2.  이제 지갑에 새로운 확인 대화상자가 나타납니다. 다시 MetaMask를 예로 들어, MetaMask 아이콘을 클릭하여 열면 다음과 같은 것이 표시됩니다:

      **Confirm**을 클릭하여 네트워크에 트랜잭션을 보냅니다. 블록에 포함될 때까지 시간이 걸리지만, 포함되면 확인 대화상자가 표시됩니다:

      <img src={rplWithdrawalConfirmation} width="100%" height="auto"/>

      5. 이제 새 RPL 출금 주소가 확인되고 활성화됩니다. `rocketpool node status`로 확인할 수 있습니다.
    </Tab>
    <Tab label="방법 2">
      **RPL 출금 주소가 MetaMask 또는 WalletConnect를 통해 트랜잭션에 서명하는 데 사용될 _수 없는_ 경우에만 이 방법을 사용하세요.**

      이 방법에서는 다음을 실행합니다:

      ```shell
      rocketpool node set-rpl-withdrawal-address --force `your cold wallet address`
      ```

      확인하기 전에 올바른 주소가 있는지 확인하기 위해 테스트 트랜잭션을 보낼 기회가 제공됩니다.
      메시지가 표시될 때 이 명령을 확인하면 새 RPL 출금 주소가 즉시 설정됩니다.


      <p className="rspress-directive danger">
        이렇게 하면 새 주소를 소유하고 있음을 증명해야 하는 방법 1과 관련된 안전 조치를 우회하게 됩니다.
        여기서 오타를 내면 되돌릴 방법이 없으며 **미니풀의 보상이 영원히 손실됩니다**.

        이를 확인하기 전에 테스트 트랜잭션 메커니즘을 사용할 것을 **강력히** 권장하며, 가능하다면 대신 방법 1을 사용하세요.
      </p>
    </Tab>

  </Tabs>
</div>

완료되면 더 이상 `set-rpl-withdrawal-address` 명령을 사용하여 RPL 출금 주소를 변경할 수 **없습니다**.
변경하려면 **활성** RPL 출금 주소(방금 전환한 주소)에서 서명된 트랜잭션을 보내야 합니다.
Rocket Pool 웹사이트에는 이를 수행하는 데 도움이 되는 기능이 있습니다.

RPL 출금 주소를 해제하려면 프로세스가 매우 간단합니다. 먼저 Rocket Pool 웹사이트의 RPL 출금 주소 페이지로 돌아가세요.

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnet">https://testnet.node.rocketpool.net/rpl-withdrawal-address</Tab>
    <Tab label="Mainnet">https://node.rocketpool.net/rpl-withdrawal-address</Tab>
  </Tabs>
</div>

노드의 RPL 출금 주소로 로그인한 경우, 여기 오른쪽에 있는 **unset** 버튼을 클릭할 수 있어야 합니다:

<img src="./images/unset_rpl_withdrawal.png" width="100%" height="auto" />

**unset**을 클릭하면 세부 정보를 확인할 수 있는 페이지로 이동합니다. 보이는 내용이 만족스러우면 주황색 **unset** 버튼을 클릭하여 네트워크에 트랜잭션을 보내세요.

RPL 출금 주소를 설정하는 데 필요한 것은 이것뿐입니다! 프로세스가 빠르고 쉬웠기를 바랍니다.

[Discord 서버](https://discord.gg/G46XgK264a)에 들러 어떻게 생각하는지 알려주시고 프로젝트가 발전하는 과정을 지켜봐 주세요.
