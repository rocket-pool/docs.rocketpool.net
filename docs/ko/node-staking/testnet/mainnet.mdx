import { Tab, Tabs } from "@rspress/core/theme";

# 테스트 네트워크에서 메인넷으로 마이그레이션

Hoodi 테스트 네트워크에서 Rocket Pool을 이미 사용해보셨고, 그 세부 사항에 익숙하며, 실제 이더리움 메인 체인에서 ETH를 스테이킹하거나 노드를 운영할 준비가 되셨다면, 이 가이드가 적합합니다!
여기서는 기존 Smartnode 스택을 Hoodi 테스트 네트워크에서 이더리움 메인넷에 연결된 것으로 마이그레이션하는 방법에 대한 지침을 찾을 수 있습니다. 이는 실제 ETH 및 RPL을 스테이킹할 준비가 된 상태입니다.

## 메인넷에서의 풀 스테이킹

풀 스테이킹은 메인넷에서도 테스트넷에서와 대체로 동일한 프로세스입니다.
URL이 다르고 rETH 토큰의 주소가 다를 수 있지만, 워크플로우에는 큰 변화가 없습니다.
메인넷을 위한 지침으로 업데이트된 [스테이킹 가이드](../../liquid-staking/overview)를 따르세요.

### 테스트넷과 메인넷의 차이점

- 테스트넷 Smartnode에는 테스트 ETH를 위한 faucet이 있습니다. 메인넷 Smartnode에는 **faucet이 없습니다**. 스테이킹하려면 자신의 ETH를 제공해야 합니다.
- 메인넷은 WalletConnect를 통해 많은 이더리움 지갑을 지원하므로 테스트넷에서 사용할 수 없었던 다른 지갑을 사용할 수 있습니다. **스테이킹을 위해 더 이상 Metamask만 사용해야 하는 것은 아닙니다**.

## 메인넷에서의 Smartnode 운영

::: danger 주의
테스트 네트워크의 **아무것도** 메인넷으로 마이그레이션할 수 없습니다.
실행 레이어와 합의 레이어 모두 체인 데이터가 다르므로 이전 체인 데이터를 제거하고 처음부터 메인넷 체인을 다시 동기화해야 합니다.
테스트넷의 검증자는 메인넷으로 이월되지 않습니다.
또한 보안, 호환성 및 안전성을 위해 **메인넷에서 새 지갑을 만들어야 합니다!**
**테스트넷 노드 지갑을 메인넷에서 사용하지 마세요!**

**다음 단계는 모든 테스트넷 데이터를 삭제합니다.**
테스트 네트워크 설정을 보존하려면 하드 드라이브를 백업하거나 두 번째 머신으로 이동해야 합니다.
:::

### 테스트넷과 메인넷의 차이점

- 테스트넷 Smartnode에는 ETH와 RPL을 위한 faucet이 있습니다. 메인넷 Smartnode에는 **faucet이 없습니다**. 자신의 ETH와 자신의 RPL을 제공해야 합니다.
- Geth를 사용하는 경우 노드의 작업 부하가 **상당히 높아집니다**. Geth는 Hoodi보다 약 40배의 저장 공간이 필요하며, 처리를 위해 더 많은 CPU 성능과 RAM이 필요합니다. Rocket Pool Grafana 대시보드를 사용하는 경우 훨씬 더 높은 사용량을 볼 준비를 하세요.
  전체 Geth 노드는 2025-09-19 기준으로 1.4TB를 사용합니다. [병합 이전 블록 데이터 만료](../maintenance/history-expiry)를 통해 저장 공간 사용량을 약 300-500GB 줄일 수 있습니다.
- Beacon Chain 피어(따라서 증명 효율성)는 테스트넷보다 **높습니다**. 메인넷의 피어는 훨씬 더 다양하며 테스트넷보다 더 높은 품질을 갖는 경향이 있습니다.
- RPL 보상 체크포인트는 높은 가스 비용을 상쇄하기 위해 2일마다가 아닌 **28일마다** 발생합니다.
- Rocket Pool 네트워크에서 사용하는 RPL 가격(따라서 담보 수준)과 네트워크 전체의 총 유효 스테이킹 RPL은 매시간이 아닌 **24시간마다 한 번** 보고됩니다.

### 자동 마이그레이션 (Docker 모드만 해당)

Docker 모드 사용자의 경우 Smartnode가 자동으로 메인넷으로 마이그레이션할 수 있습니다.

**테스트넷이 구성된 상태에서** Hoodi에서 검증자를 종료하세요:

```
rocketpool minipool exit
```

선택 목록에서 `1: All available minipools`를 선택하고 완료될 때까지 기다리세요.
이렇게 하면 검증자를 제거하여 네트워크를 정리하는 데 도움이 됩니다. 그렇지 않으면 검증자가 계속 증명에 실패하고 Hoodi의 건강을 약화시킬 것입니다(더 이상 온라인 상태가 아니기 때문에).

완료되면 설정 관리자를 여세요:

```
rocketpool service config
```

다음으로 **Smartnode and TX Fees** 카테고리를 열고 **Network** 드롭다운을 `Hoodi Testnet`에서 `Ethereum Mainnet`으로 변경하세요:

<img src="../images/tui-change-network.png" width="100%" height="auto" />

저장하고 종료하면 모든 것이 지워질 예정이라는 알림과 확인 대화 상자가 표시됩니다:

```
WARNING: You have requested to change networks.

All of your existing chain data, your node wallet, and your validator keys will be removed.

Please confirm you have backed up everything you want to keep, because it will be deleted if you answer `y` to the prompt below.

Would you like the Smartnode to automatically switch networks for you? This will destroy and rebuild your `data` folder and all of Rocket Pool's Docker containers. [y/n]
```

보관하려는 항목(노드 지갑과 검증자 키가 포함된 `data` 폴더 등)을 백업한 다음 준비가 되면 `y`를 누르고 `Enter`를 누르세요.
Smartnode가 자동으로 전환을 처리합니다.

완료되면 메인넷에 새로 설치된 상태가 됩니다.
모든 설정(클라이언트 선택 등)은 보존되지만 새 지갑을 만들어야 합니다. 또한 메인넷에서는 *Checkpoint Sync URL*이 없을 가능성이 높으므로 [여기](../config-docker#beacon-chain-checkpoint-syncing)에 설명된 대로 설정해야 합니다. 그렇지 않으면 메인넷 비콘 체인을 동기화하는 데 오랜 시간이 걸릴 것입니다.

### 수동으로 마이그레이션

어떤 이유로든 Smartnode의 자동 마이그레이션 프로세스를 활용할 수 없는 경우 몇 가지 간단한 단계로 수동으로 수행할 수 있습니다:

<div className="p-3">
  <Tabs>
    <Tab label="Docker">
      1. **테스트넷이 구성된 상태에서** Hoodi에서 검증자를 종료하세요:

      ```shell
      rocketpool minipool exit
      ```

      선택 목록에서 `1: All available minipools`를 선택하고 완료될 때까지 기다리세요.
      이렇게 하면 검증자를 제거하여 네트워크를 정리하는 데 도움이 됩니다. 그렇지 않으면 검증자가 계속 증명에 실패하고 Hoodi의 건강을 약화시킬 것입니다(더 이상 온라인 상태가 아니기 때문에).

      2. 테스트넷을 종료하세요:

      ```shell
      rocketpool service stop
      ```

      3. 테스트넷 체인 데이터와 Docker 컨테이너를 삭제하세요:

      ```shell
      rocketpool service terminate
      ```

      4. Rocket Pool 구성 폴더를 삭제하세요:

      ```shell
      sudo rm -rf ~/.rocketpool
      ```

      5. (선택 사항) Rocket Pool CLI를 삭제하세요:

      ```shell
      rm ~/bin/rocketpool
      ```
      어차피 최신 버전의 CLI로 덮어쓸 것이지만, 철저하게 하려면 먼저 이전 것을 제거할 수 있습니다.

      이 시점에서 테스트넷 설치가 제거되었으며 안전하게 새 메인넷 설치로 마이그레이션할 수 있습니다.
      [Docker로 노드 만들기](../docker) 가이드를 주의 깊게 따라 설정하세요.
    </Tab>
    <Tab label="Native Mode">
      1. **테스트넷이 구성된 상태에서** Hoodi에서 검증자를 종료하세요:

      ```shell
      rocketpool minipool exit
      ```

      선택 목록에서 `1: All available minipools`를 선택하고 완료될 때까지 기다리세요.
      이렇게 하면 검증자를 제거하여 네트워크를 정리하는 데 도움이 됩니다. 그렇지 않으면 검증자가 계속 증명에 실패하고 Hoodi의 건강을 약화시킬 것입니다(더 이상 온라인 상태가 아니기 때문에).

      2. 모든 Rocket Pool 및 이더리움 서비스를 중지하세요 (예: `geth` 및 `lighthouse` 사용; 설치 중에 생성한 서비스로 교체):

      ```shell
      sudo systemctl stop rp-node rp-watchtower geth lh-bn lh-vc
      ```

      3. 모든 테스트넷 체인 데이터를 삭제하세요 (예: x64에서 `geth` 및 `lighthouse` 사용; 자신의 구성으로 교체):

      ```shell
      sudo rm -rf /srv/geth/geth_data
      sudo rm -rf /srv/lighthouse/lighthouse_data
      ```

      4. Rocket Pool 구성 폴더를 삭제하세요:

      ```shell
      sudo rm -rf /srv/rocketpool
      ```

      5. (선택 사항) Rocket Pool CLI 및 Daemon 바이너리를 제거하세요:
      ```shell
      sudo rm /usr/local/bin/rocketpool /usr/local/bin/rocketpoold
      ```
      어차피 최신 버전으로 덮어쓸 것이지만, 철저하게 하려면 먼저 이전 것을 제거할 수 있습니다.

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">주의</p>
        단순화를 위해 이 지침에는 `eth1` 및 `eth2` 사용자를 제거하거나 앞서 중지한 서비스를 제거하는 등의 일부 단계가 _포함되지 않습니다_.
        이들을 재사용하고 설치 가이드에서 설정하는 데 관련된 단계를 무시할 수 있습니다.

        다음을 포함한 일부 설치 단계를 다시 수행해야 합니다:

        - `/srv/rocketpool` 폴더와 그 골격 프레임워크를 만들고 권한을 올바르게 설정
        - 실행 레이어, 합의 레이어 및 검증자 클라이언트 바이너리의 최신 릴리스 버전 가져오기
        - 서비스의 **`ExecStart` 문자열** 설정 (**설치 가이드에 정의된 메인넷 구성 사용!**)
        - 최신 CLI 및 Daemon 바이너리 가져오기
            - 설치 프로그램 아카이브에서 최신 구성 파일을 가져와 `/srv/rocketpool`에 넣고 노드의 설정에 맞게 조정
      </p>

      이 시점에서 [네이티브 설치 가이드](../native)를 따라 마이그레이션할 준비가 되었습니다.
    </Tab>

  </Tabs>
</div>
