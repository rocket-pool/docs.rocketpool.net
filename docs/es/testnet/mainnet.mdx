import { Tab, Tabs } from "@rspress/core/theme";

# Migración de la Red de Prueba a Mainnet

Si ya has usado Rocket Pool en nuestra red de prueba Hoodi, te sientes cómodo con sus detalles y estás listo para hacer staking de ETH o ejecutar un nodo de verdad en la cadena principal de Ethereum, entonces esta guía es para ti.
Aquí encontrarás instrucciones sobre cómo migrar una instalación existente de Smartnode desde la red de prueba Hoodi a una conectada a la mainnet de Ethereum, lista para hacer staking de tus propios ETH y RPL reales.

## Staking en el Pool en Mainnet

El staking en el pool es en gran medida el mismo proceso en mainnet que en la testnet.
La URL será diferente y la dirección del token rETH puede ser diferente, pero no hay cambios significativos en el flujo de trabajo.
Sigue la [Guía de Staking](../liquid-staking/overview), que ha sido actualizada con instrucciones para mainnet.

### Diferencias entre la Testnet y Mainnet

- El Smartnode de la testnet tiene un faucet para ETH de prueba. El Smartnode de mainnet **no tiene faucet**. Necesitarás proporcionar tu propio ETH para hacer staking.
- Mainnet soporta muchas wallets de Ethereum a través de WalletConnect, por lo que puedes usar otras wallets que no podías usar en la testnet. **Ya no estás restringido a usar Metamask para hacer staking**.

## Operación del Smartnode en Mainnet

::: danger NOTA
**Nada** de la red de prueba puede ser migrado a mainnet.
Los datos de la cadena son diferentes tanto para Execution como para Consensus, por lo que debes eliminar los datos antiguos de la cadena y resincronizar las cadenas de mainnet desde cero.
Tus validadores en la testnet no se transfieren a mainnet.
Además, por razones de seguridad, compatibilidad y protección, **debes crear una nueva wallet en mainnet**.
**No uses la wallet de tu nodo de testnet en mainnet**.

**Los siguientes pasos eliminarán todos tus datos de testnet.**
Si quieres preservar tu configuración de la red de prueba, debes hacer una copia de seguridad de tu disco duro o moverlo a una segunda máquina.
:::

### Diferencias entre la Testnet y Mainnet

- El Smartnode de la testnet tiene un faucet para ETH y RPL. El Smartnode de mainnet **no tiene faucet**. Necesitarás proporcionar tu propio ETH y tu propio RPL.
- Si estás usando Geth, la carga de trabajo de tu nodo será **considerablemente mayor**. Geth ocupa aproximadamente 40 veces el espacio de almacenamiento de Hoodi, y requiere más potencia de CPU y RAM para procesar. Si estás usando el dashboard de Grafana de Rocket Pool, prepárate para ver un uso mucho mayor.
  Un nodo completo de Geth usa 1.4 TB al 19/09/2025. [Expirar datos de bloques anteriores a la fusión](../node-staking/maintenance/history-expiry) puede reducir el uso de almacenamiento en aproximadamente 300-500 GB.
- Tus peers de Beacon Chain (y por lo tanto, tu efectividad de atestación) serán **mayores** que en la testnet. Los peers en mainnet son mucho más diversos y tienden a ser de mayor calidad que en la testnet.
- El checkpoint de recompensas de RPL ocurre cada **28 días** en lugar de cada 2 días, para ayudar a compensar los altos costos de gas.
- El precio de RPL usado por la red de Rocket Pool (y por lo tanto, tu nivel de colateral) junto con el RPL total efectivo en staking a través de la red se reportan **una vez cada 24 horas** en lugar de una vez por hora.

### Migración Automática (Solo Modo Docker)

Para usuarios de Modo Docker, el Smartnode puede migrar a Mainnet automáticamente.

**Mientras todavía tienes la testnet configurada**, sal de tus validadores en Hoodi:

```
rocketpool minipool exit
```

Selecciona `1: All available minipools` de la lista de opciones y espera a que se complete.
Esto ayudará a limpiar la red eliminando tus validadores en lugar de dejarlos fallando constantemente en las atestaciones y debilitando la salud de Hoodi (ya que ya no están en línea).

Una vez hecho esto, abre el Administrador de Configuración:

```
rocketpool service config
```

A continuación, abre la categoría **Smartnode and TX Fees** y cambia el menú desplegable **Network** de `Hoodi Testnet` a `Ethereum Mainnet`:

<img src="../node-staking/images/tui-change-network.png" width="100%" height="auto" />

Cuando guardes y salgas, se te mostrará una notificación de que todo está a punto de borrarse y un diálogo de confirmación:

```
WARNING: You have requested to change networks.

All of your existing chain data, your node wallet, and your validator keys will be removed.

Please confirm you have backed up everything you want to keep, because it will be deleted if you answer `y` to the prompt below.

Would you like the Smartnode to automatically switch networks for you? This will destroy and rebuild your `data` folder and all of Rocket Pool's Docker containers. [y/n]
```

Haz una copia de seguridad de todo lo que quieras conservar (como tu carpeta `data` que contiene tu wallet de nodo y claves de validador), luego presiona `y` y `Enter` cuando estés listo.
El Smartnode se encargará del cambio automáticamente.

Cuando termine, te quedarás con una instalación nueva en Mainnet.
Todas tus configuraciones (como la elección de cliente) se preservarán, pero necesitarás crear una nueva wallet. Además, es probable que no tengas una _Checkpoint Sync URL_ en mainnet y deberías configurar una como se explica [aquí](../node-staking/config-docker.html#beacon-chain-checkpoint-syncing); de lo contrario, tomará mucho tiempo sincronizar la beacon chain de mainnet.

### Migración Manual

Si por alguna razón no puedes aprovechar el proceso de migración automática del Smartnode, puedes hacerlo manualmente en unos pocos pasos simples:

<div className="p-3">
  <Tabs>
    <Tab label="Docker">
      1. **Mientras todavía tienes la testnet configurada**, sal de tus validadores en Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Selecciona `1: All available minipools` de la lista de opciones y espera a que se complete.
      Esto ayudará a limpiar la red eliminando tus validadores en lugar de dejarlos fallando constantemente en las atestaciones y debilitando la salud de Hoodi (ya que ya no están en línea).

      2. Apaga la testnet:

      ```shell
      rocketpool service stop
      ```

      3. Elimina tus datos de cadena de testnet y contenedores Docker:

      ```shell
      rocketpool service terminate
      ```

      4. Elimina tu carpeta de configuración de Rocket Pool:

      ```shell
      sudo rm -rf ~/.rocketpool
      ```

      5. (Opcional) Elimina tu CLI de Rocket Pool:

      ```shell
      rm ~/bin/rocketpool
      ```
      De todos modos sobrescribirás esto con la última versión del CLI, pero si quieres ser exhaustivo, puedes eliminar el antiguo primero.

      En este punto tu instalación de testnet ha sido purgada, y puedes migrar de forma segura a una nueva instalación de mainnet.
      Sigue la guía [Creando un Nodo con Docker](../node-staking/docker) cuidadosamente para configurarlo.
    </Tab>
    <Tab label="Native Mode">
      1. **Mientras todavía tienes la testnet configurada**, sal de tus validadores en Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Selecciona `1: All available minipools` de la lista de opciones y espera a que se complete.
      Esto ayudará a limpiar la red eliminando tus validadores en lugar de dejarlos fallando constantemente en las atestaciones y debilitando la salud de Hoodi (ya que ya no están en línea).

      2. Detén todos los servicios de Rocket Pool y Ethereum (usando, por ejemplo, `geth` y `lighthouse`; reemplaza con los servicios que creaste durante la instalación):

      ```shell
      sudo systemctl stop rp-node rp-watchtower geth lh-bn lh-vc
      ```

      3. Elimina todos los datos de cadena de testnet (por ejemplo, usando `geth` y `lighthouse` en x64; reemplaza con tu propia configuración):

      ```shell
      sudo rm -rf /srv/geth/geth_data
      sudo rm -rf /srv/lighthouse/lighthouse_data
      ```

      4. Elimina la carpeta de configuración de Rocket Pool:

      ```shell
      sudo rm -rf /srv/rocketpool
      ```

      5. (Opcional) Elimina los binarios del CLI y Daemon de Rocket Pool:
      ```shell
      sudo rm /usr/local/bin/rocketpool /usr/local/bin/rocketpoold
      ```
      De todos modos sobrescribirás estos con las últimas versiones, pero si quieres ser exhaustivo, puedes eliminar los antiguos primero.

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTA</p>
        Por simplicidad, estas instrucciones _no incluyen_ algunos pasos como eliminar los usuarios `eth1` y `eth2`, o eliminar los servicios que detuviste anteriormente.
        Puedes reutilizarlos e ignorar los pasos involucrados en configurarlos en la guía de instalación.

        Necesitarás rehacer algunos de los pasos de instalación incluyendo:

        - Crear la carpeta `/srv/rocketpool` y su estructura esqueleto, y establecer los permisos adecuadamente
        - Obtener las últimas versiones de los binarios de los clientes Execution, Consensus y Validator
        - Establecer la **cadena `ExecStart`** en los servicios (**usa la configuración de mainnet definida en la guía de instalación**)
        - Obtener los últimos binarios del CLI y Daemon
            - Obtener los últimos archivos de configuración del archivo del instalador, colocarlos en `/srv/rocketpool`, y ajustarlos para que coincidan con la configuración de tu nodo
      </p>

      En este punto estás listo para migrar siguiendo la [guía de instalación nativa](../node-staking/native).
    </Tab>

  </Tabs>
</div>
