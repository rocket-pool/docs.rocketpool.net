import { Tab, Tabs } from "@rspress/core/theme";
import mm_add_hoodi from "./images/mm_add_hoodi.png";
import mm_network from "./images/mm_network.png";
import mm_network_main from "./images/mm_network_main.png";
import mm_add_token from "./images/mm_add_token.png";
import rp_test_site from "./images/rp_test_site.png";

# Haciendo Stake Directamente a través de Rocket Pool

## Visión General

La interfaz de staking de Rocket Pool ahora ofrece dos rutas distintas para convertir entre ETH y rETH:

1. **Ruta de Protocolo** - Interacción directa con los contratos inteligentes de Rocket Pool
2. **Ruta CoW Swap** - Agregador de intercambio descentralizado con protección MEV (solo Mainnet)

La interfaz recomienda automáticamente la mejor ruta según las condiciones actuales del mercado y la disponibilidad de liquidez.

<video controls="controls" src="https://cdn-rocketpool.s3.us-west-2.amazonaws.com/stake_options.mp4" />

## Opciones de Enrutamiento Explicadas

### Ruta de Protocolo

**Cómo funciona:** Interacción directa con el deposit pool de Rocket Pool y los contratos inteligentes en cadena.

**Ventajas:**

- Ejecución instantánea
- Tasa de cambio predecible basada en la relación rETH/ETH actual
- No se requieren tokens intermediarios (conversión directa ETH ↔ rETH)
- Menor complejidad
- Siempre obtienes exactamente tanto rETH como vale tu ETH (menos una tarifa de depósito del 0.05%)
- Sin deslizamiento, sin problemas de liquidez, sin sandwiching o front-running

**Limitaciones:**

- Sujeto a límites del deposit pool al hacer staking
- Sujeto a disponibilidad de liquidez al retirar del staking
- Requiere tarifas de gas para la transacción
- Las tarifas de gas podrían ser caras para cantidades pequeñas

### Ruta CoW Swap (solo Mainnet)

**Cómo funciona:** Usa el sistema de subasta por lotes del Protocolo CoW para encontrar el mejor precio en múltiples DEXs.

**Ventajas:**

- Protección MEV (Valor Máximo Extraíble) contra ataques de sandwich
- Ejecución sin gas - solo firmas la orden
- A menudo proporciona mejores tasas a través de la agregación de DEX
- Siempre disponible independientemente de los límites del deposit pool del protocolo
- Sin tarifas de gas para el intercambio en sí

**Limitaciones:**

- Requiere pasos de envolvimiento/desenvolvimiento de WETH (manejados automáticamente)
- Las órdenes pueden tardar 2-5 minutos en ejecutarse
- Las órdenes pueden expirar si no se emparejan dentro del límite de tiempo
- Requiere aprobaciones de tokens únicas

## Conceptos Clave

### WETH (ETH Envuelto)

Cuando usas CoW Swap, la interfaz maneja automáticamente las conversiones de WETH:

- WETH es un token ERC-20 que representa ETH en un formato estandarizado
- 1 WETH siempre es igual a 1 ETH
- La interfaz envuelve ETH a WETH antes de intercambiar y desenvuelve después
- Solo pagas gas por el envolvimiento inicial (una sola vez)

### Tolerancia al Deslizamiento

Para órdenes de CoW Swap:

- Predeterminado: 0.5%
- Ajustable según tu preferencia
- Mayor deslizamiento = más probabilidad de ejecutarse
- Menor deslizamiento = mejor protección de precio

### Expiración de Orden

Las órdenes de CoW Swap tienen un límite de tiempo:

- Predeterminado: 30 minutos
- Ajustable de 5 minutos a 24 horas
- Las órdenes se cancelan automáticamente si no se ejecutan

### Indicador de Mejor Tasa

La interfaz muestra qué ruta ofrece mejor valor:

- Insignia verde con "X% mejor" indica la ruta óptima
- Preselecciona automáticamente la mejor opción
- Se actualiza en tiempo real a medida que cambian las condiciones del mercado

### Liquidez del Protocolo

Al retirar rETH del staking:

- La ruta del protocolo requiere ETH disponible en el deposit pool
- Muestra "Liquidez insuficiente" cuando el pool está vacío
- Enruta automáticamente a través de CoW Swap cuando la liquidez del protocolo no está disponible

## Comenzando

<div className="p-3">
  <Tabs>
    <Tab label="Preparándose en la Testnet Hoodi">
      <p className="rspress-directive danger">
        <p className="rspress-directive-title">ADVERTENCIA</p>
        Al practicar el staking en la red de prueba, **no necesitas proporcionar ninguno de tu ETH real** durante este proceso.
        Se te dará **ETH de prueba falso** para usar en su lugar.

        **¡No intentes mover tu ETH real en mainnet a la testnet o lo perderás permanentemente!**
      </p>

      Comienza instalando [MetaMask](https://metamask.io/) si aún no lo has hecho.
      Sigue las instrucciones en su sitio para instalar la extensión, crear una cuenta e iniciar sesión.

      A continuación, abre el panel de MetaMask usando su ícono en la barra de herramientas de tu navegador.

      Necesitarás añadir la Testnet Hoodi a MetaMask.

      Haz clic en el menú desplegable superior izquierdo y haz clic en el botón "Add Network".

      Verás una lista de redes, Hoodi no está en esta lista así que haz clic en el botón "Add a network manually".

      Completa los siguientes detalles:

      ```
      Network Name: Hoodi
      New RPC Url: https://rpc.hoodi.ethpandaops.io
      Chain ID: 560048
      Currency Symbol: ETH
      Block Explorer Url: https://hoodi.etherscan.io
      ```

      Luego haz clic en Guardar. Ahora deberías ver la red Hoodi en el menú desplegable superior izquierdo.

      Haz clic en el **menú desplegable de red** en la parte superior izquierda de la extensión de Metamask y selecciona **Hoodi Test Network**.

      Finalmente, añade el token rETH a MetaMask para que puedas ver tu saldo y acceder a él para intercambiar.
      Haz clic en la pestaña **Assets**, luego haz clic en **Add Token**:

      <img src={mm_add_token} width="100%" height="auto" />

      Asegúrate de que **Custom Token** esté seleccionado en este diálogo.
      En el cuadro **Token Contract Address**, pon el siguiente valor:

      ```
      0x7322c24752f79c05ffd1e2a6fcb97020c1c264f1
      ```

      El **Token Symbol** debería poblarse automáticamente con `rETH`, y los **Decimals of Precision** deberían poblarse automáticamente con `18`.

      Acepta el resto de los avisos, y luego verás aparecer el token rETH en tu lista.

      Ahora que tienes una dirección de cartera en MetaMask, necesitas llenarla con algo de ETH de prueba.
      Dirígete a la página [Practicando con la Red de Prueba](../node-staking/testnet/overview#obteniendo-eth-de-prueba-en-hoodi) para una guía rápida sobre cómo usar un grifo de testnet para obtener algo de ETH de prueba en Hoodi.

      Una vez que tengas algo de ETH de Hoodi para probar, dirígete a [https://testnet.rocketpool.net/](https://testnet.rocketpool.net/).

      **Nota:** Testnet solo admite enrutamiento de Protocolo. CoW Swap está disponible solo en mainnet.
    </Tab>
    <Tab label="Preparándose en Ethereum Mainnet">
      Comienza instalando [MetaMask](https://metamask.io/) si aún no lo has hecho.
      Sigue las instrucciones en su sitio para instalar la extensión, crear una cuenta e iniciar sesión.

      A continuación, abre el panel de MetaMask usando su ícono en la barra de herramientas de tu navegador.
      Haz clic en el **menú desplegable de red** en la barra de herramientas en la parte superior y asegúrate de que **Ethereum Mainnet** esté seleccionado:

      <img src={mm_network_main} width="100%" height="auto" />

      Finalmente, añade el token rETH a MetaMask para que puedas ver tu saldo y acceder a él para intercambiar.
      Haz clic en la pestaña **Assets**, luego haz clic en **Add Token**:

      <img src={mm_add_token} width="100%" height="auto" />

      Asegúrate de que **Custom Token** esté seleccionado en este diálogo.
      En el cuadro **Token Contract Address**, pon el siguiente valor:

      ```
      0xae78736Cd615f374D3085123A210448E74Fc6393
      ```

      El **Token Symbol** debería poblarse automáticamente con `rETH`, y los **Decimals of Precision** deberían poblarse automáticamente con `18`.

      Acepta el resto de los avisos, y luego verás aparecer el token rETH en tu lista.

      Ahora que tienes una dirección de cartera en MetaMask, necesitas transferir algo de ETH a ella.
      Necesitarás proporcionar esto desde una cartera existente o comprar ETH en un exchange.

      Una vez que tengas algo de ETH para hacer stake, dirígete a [https://stake.rocketpool.net/](https://stake.rocketpool.net/).
    </Tab>

  </Tabs>
</div>

## Haciendo Stake de ETH por rETH

Una vez que estés en el sitio de staking, haz clic en el botón **connect wallet**. Por favor lee y acepta los Términos de Servicio y la Política de Privacidad, esto habilitará diferentes formas de conectarse, luego haz clic en **connect metamask**.

MetaMask te pedirá que selecciones una cuenta para conectarte al sitio web. Elige una, confirma algunos permisos, y verás que tus saldos se actualizan en la UI.

### Paso 1: Ingresar Cantidad

Ingresa la cantidad de ETH que quieres hacer stake en el campo de entrada **Stake ETH**.

[Marcador de posición de imagen: Campo de entrada con cantidad siendo ingresada]

### Paso 2: Revisar Opciones de Enrutamiento

La interfaz mostrará dos opciones de enrutamiento (solo mainnet):

- **Tarjeta de Protocolo**: Muestra si el deposit pool está disponible o lleno
- **Tarjeta CoW Swap**: Muestra la salida estimada y la comparación de tasas

La mejor opción se resaltará con una insignia verde "X% mejor" y se seleccionará automáticamente.

[Marcador de posición de imagen: Tarjetas de enrutamiento mostrando comparación]

### Paso 3: Configurar Ajustes (solo CoW Swap)

Si usas CoW Swap, opcionalmente puedes:

- Ajustar la tolerancia al deslizamiento (predeterminado 0.5%)
- Establecer el tiempo de expiración de la orden (predeterminado 30 minutos)

### Paso 4: Ejecutar Transacción

<div className="p-3">
  <Tabs>
    <Tab label="Vía Protocolo">
      Haz clic en el botón **Stake via Protocol**.

      MetaMask te pedirá que:
      1. **Apruebes la transacción** con las tarifas de gas mostradas
      2. **Confirmes la transacción**

      ::: danger IMPORTANTE
      ¡Verifica el costo total de gas antes de aprobar - si es muy caro en relación con tu cantidad de stake, considera usar CoW Swap en su lugar!
      :::

      Una vez confirmada, la transacción se minará y recibirás tu rETH inmediatamente.

      <video controls="controls" src="https://cdn-rocketpool.s3.us-west-2.amazonaws.com/protocol_stake.mp4" />
    </Tab>
    <Tab label="Vía CoW Swap">
      Haz clic en el botón **Stake via CoW Swap**.

      El proceso involucra varios pasos automatizados:

      1. **Envolvimiento de WETH** (si es necesario)
      - Aprobar conversión de ETH a WETH
      - Se requiere tarifa de gas única

      2. **Aprobación de WETH** (solo la primera vez)
      - Aprobar que el Protocolo CoW use tu WETH
      - Se requiere tarifa de gas única

      3. **Firmar Orden**
      - Revisar detalles de la orden
      - Firmar con MetaMask (sin gas)
      - Sin tarifas de gas

      4. **Ejecución de Orden**
      - Monitorear progreso en el modal
      - Espera típica: 2-5 minutos
      - Puedes cerrar el modal y continuar navegando

      5. **Finalización**
      - rETH aparece automáticamente en la cartera
      - Ver en Etherscan si es necesario

      <video controls="controls" src="https://cdn-rocketpool.s3.us-west-2.amazonaws.com/cowswap_stake.mp4" preload="auto"/>
    </Tab>

  </Tabs>
</div>

::: tip NOTA
Es **completamente normal** recibir menos rETH que el ETH que pusiste. rETH y ETH tienen una **tasa de cambio dinámica**: a medida que la red de Rocket Pool gana recompensas, 1 rETH vale más que 1 ETH.
:::

## Retirando rETH del Stake por ETH

Cuando estés listo para retirar del stake y cambiar tu rETH de vuelta a ETH, regresa al sitio web de staking y haz clic en el **botón de dirección de intercambio** para cambiar al modo de retiro de stake:

### Paso 1: Ingresar Cantidad

Ingresa la cantidad de rETH que quieres retirar del stake en el campo **Unstake rETH**.

### Paso 2: Verificar Disponibilidad de Enrutamiento

La interfaz mostrará:

- **Liquidez del protocolo** disponible en el deposit pool
- Estado de la **tarjeta del protocolo** (disponible o "Liquidez insuficiente")
- **Tarjeta CoW Swap** con la salida de ETH estimada

### Paso 3: Ejecutar Retiro del Stake

<div className="p-3">
  <Tabs>
    <Tab label="Vía Protocolo">
      Si la liquidez del protocolo está disponible:

      1. Haz clic en **Unstake via Protocol**
      2. Confirma la transacción en MetaMask
      3. Paga las tarifas de gas
      4. Recibe ETH inmediatamente

      ::: warning NOTA
      El retiro del stake por protocolo solo es posible cuando el deposit pool tiene suficiente ETH. Si ves "Liquidez insuficiente", usa CoW Swap en su lugar.
      :::

      <video controls="controls" src="https://cdn-rocketpool.s3.us-west-2.amazonaws.com/unstake_mainnet.mp4" preload="auto"/>
    </Tab>
    <Tab label="Vía CoW Swap">
      CoW Swap siempre está disponible para retirar del stake:

      1. **Aprobación de rETH** (solo la primera vez)
      - Aprobar rETH para el Protocolo CoW
      - Tarifa de gas única

      2. **Firmar Orden**
      - Revisar detalles
      - Firmar orden (sin gas)

      3. **Ejecución de Orden**
      - Monitorear en el modal
      - Espera de 2-5 minutos

      4. **Desenvolvimiento de WETH** (automático)
      - Recibe WETH del intercambio
      - Se desenvuelve automáticamente a ETH
      - ETH aparece en la cartera

      <video controls="controls" src="https://cdn-rocketpool.s3.us-west-2.amazonaws.com/cowswap_unstake.mp4" preload="auto"/>
    </Tab>

  </Tabs>
</div>

## Solución de Problemas

### Problemas Comunes

#### Orden Expirada (CoW Swap)

Tu orden no se ejecutó dentro del límite de tiempo.

**Soluciones:**

- Aumentar el tiempo de expiración de la orden (hasta 24 horas)
- Ajustar la tolerancia al deslizamiento más alta
- Intentar de nuevo con los precios actuales del mercado
- Usar la ruta de Protocolo si está disponible

#### Saldo Insuficiente

No hay suficiente ETH/rETH para la transacción.

**Soluciones:**

- Verificar el saldo de la cartera
- Tener en cuenta las tarifas de gas (ruta de Protocolo)
- Reducir la cantidad de stake/retiro del stake

#### Pool Lleno (Staking de Protocolo)

El deposit pool ha alcanzado su límite.

**Solución:**

- Usar la ruta CoW Swap (seleccionada automáticamente)
- Esperar a que los operadores de nodos retiren ETH del pool
- Volver a verificar más tarde para disponibilidad

#### Liquidez Insuficiente (Retiro del Stake de Protocolo)

No hay suficiente ETH en el deposit pool para retirar del stake.

**Solución:**

- Usar la ruta CoW Swap (seleccionada automáticamente)
- Siempre disponible independientemente del estado del pool

### Conversión Manual de WETH

Si tienes WETH que no se desinvolvió automáticamente:

1. Visita [swap.cow.fi](https://swap.cow.fi)
2. Conecta tu cartera
3. Intercambia WETH → ETH (relación 1:1, sin gas)

O usa Etherscan:

1. Ve al contrato WETH: `0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2`
2. Conecta la cartera a "Write Contract"
3. Usa la función `withdraw`
4. Ingresa la cantidad en Wei
5. Ejecuta la transacción

## Mejores Prácticas

### Para Tasas Óptimas

- Deja que la interfaz auto-seleccione la mejor ruta
- Verifica durante baja actividad de red para mejor disponibilidad del protocolo
- Para cantidades grandes, CoW Swap a menudo proporciona mejores tasas
- Ajusta el deslizamiento cuidadosamente para equilibrar la probabilidad de ejecución vs precio

### Para Seguridad

- Verifica que estás en el sitio web correcto: [https://stake.rocketpool.net](https://stake.rocketpool.net)
- Comienza con cantidades pequeñas de prueba
- Revisa todos los detalles de la transacción antes de confirmar
- Mantén algo de ETH para tarifas de gas
- Solo aprueba contratos confiables

### Para Optimización de Gas

- Compara los costos de gas entre rutas
- Agrupa transacciones cuando sea posible
- Usa CoW Swap para cantidades pequeñas para evitar altas tarifas de gas
- Monitorea los precios del gas en [etherscan.io/gastracker](https://etherscan.io/gastracker)

## Implicaciones Fiscales

::: warning IMPORTANTE
Esta sección proporciona solo información educativa general. Las leyes fiscales varían significativamente según la jurisdicción y las circunstancias individuales. **Siempre consulta con un profesional fiscal calificado** para obtener asesoramiento específico para tu situación.
:::

### Entendiendo rETH e Impuestos

Al hacer stake con Rocket Pool, es crucial entender las posibles implicaciones fiscales:

#### La Transacción de Staking (ETH → rETH)

**Eventos Fiscales Potenciales:**

- **Intercambio de Tokens**: Convertir ETH a rETH puede considerarse un evento imponible en muchas jurisdicciones
- **Ganancias/Pérdidas de Capital**: Si tu ETH se ha apreciado desde la adquisición, puedes deber impuestos sobre ganancias de capital
- **Base de Costo**: El valor de rETH recibido se convierte en tu nueva base de costo para transacciones futuras

**Escenario de Ejemplo:**

```
Compraste 1 ETH a $1,000
Haces stake cuando ETH vale $2,000
Ganancia imponible potencial: $1,000
Tu base de costo de rETH: $2,000
```

#### Manteniendo rETH (Ganando Recompensas)

**Cómo se Aprecia rETH:**

- rETH aumenta en valor en relación con ETH automáticamente
- No se reciben nuevos tokens - el token en sí se aprecia
- Esta apreciación representa tus recompensas de staking

**El Tratamiento Fiscal Varía:**

- **Algunas jurisdicciones**: Impuesto sobre apreciación solo cuando se realiza (al vender/intercambiar)
- **Otras jurisdicciones**: Pueden gravar las ganancias no realizadas anualmente
- **Ingreso vs. Ganancias de Capital**: La clasificación afecta las tasas de impuestos

#### La Transacción de Retiro del Stake (rETH → ETH)

**Consideraciones Fiscales:**

- Convertir rETH de vuelta a ETH es típicamente un evento imponible
- Calcula ganancia/pérdida basándote en:
- **Base de costo**: Valor cuando adquiriste rETH
- **Valor de disposición**: Valor al convertir de vuelta a ETH
- La diferencia es tu ganancia o pérdida de capital

### Implicaciones Fiscales del Método de Enrutamiento

#### Ruta de Protocolo

- Evento fiscal único por transacción
- Marca de tiempo y valor claro para registros fiscales
- La transacción en cadena proporciona un registro permanente

#### Ruta CoW Swap

- El envolvimiento/desenvolvimiento de WETH típicamente no es imponible (conversión 1:1)
- El intercambio principal (ETH/WETH ↔ rETH) es el evento imponible
- La ejecución de la orden proporciona documentación fiscal clara

### Mejores Prácticas de Mantenimiento de Registros

**Registros Esenciales para Mantener:**

1. **Para Cada Stake:**

- Fecha y hora de la transacción
- Cantidad de ETH en stake
- Cantidad de rETH recibida
- Precio de ETH en el momento del staking
- Hash de la transacción
- Tarifas de gas pagadas

2. **Mientras Mantienes:**

- Instantáneas periódicas de la tasa de cambio rETH/ETH
- Tu saldo de rETH a lo largo del tiempo
- Valores de mercado en fechas clave (fin de año, etc.)

3. **Para Cada Retiro del Stake:**

- Fecha y hora de la transacción
- Cantidad de rETH retirada del stake
- Cantidad de ETH recibida
- Precio de ETH en el momento del retiro del stake
- Hash de la transacción
- Tarifas de gas pagadas

**Herramientas para Rastrear:**

- Exportar transacciones desde Etherscan
- Usar aplicaciones de seguimiento de portafolio que soporten rETH
- Mantener una hoja de cálculo con todas las transacciones
- Considerar usar software de impuestos cripto

### Estrategias de Optimización Fiscal

**Consideraciones de Tiempo:**

- **Recolección de Pérdidas Fiscales**: Retira del stake durante caídas del mercado si tienes pérdidas para compensar ganancias
- **Largo Plazo vs. Corto Plazo**: Muchas jurisdicciones favorecen las tenencias a largo plazo (típicamente >1 año)
- **Planificación de Fin de Año**: Considera el tiempo de las transacciones alrededor de los límites del año fiscal

**Métodos de Base de Costo:**

- **FIFO (Primero en Entrar, Primero en Salir)**: Predeterminado en muchas jurisdicciones
- **LIFO (Último en Entrar, Primero en Salir)**: Puede estar disponible en algunas regiones
- **Identificación Específica**: Rastrea porciones específicas de rETH si está permitido

### Escenarios Fiscales Comunes

#### Escenario 1: Staking Regular

```
Acción: Hacer stake de 10 ETH por 9.5 rETH
Evento Fiscal: Disposición de ETH, adquisición de rETH
Reportar: Ganancia/pérdida de capital en disposición de ETH
Rastrear: 9.5 rETH con nueva base de costo
```

#### Escenario 2: Retiro Parcial del Stake

```
Acción: Retirar del stake 5 rETH por 5.3 ETH
Evento Fiscal: Disposición de rETH, adquisición de ETH
Reportar: Ganancia/pérdida de capital en disposición de rETH
Rastrear: Saldo de rETH restante y base de costo
```

#### Escenario 3: Integración DeFi

```
Acción: Usar rETH en protocolos DeFi
Evento Fiscal: Cada interacción de protocolo puede ser imponible
Reportar: Rastrea todos los movimientos y cambios de valor
Rastrear: Rendimientos, intercambios y provisiones de liquidez
```

### Consideraciones Específicas de Jurisdicción

**Estados Unidos:**

- El IRS trata los intercambios cripto-a-cripto como imponibles
- Las recompensas de staking pueden ser imponibles cuando se reciben o cuando se venden (orientación en evolución)
- Formulario 8949 y Anexo D para reportar

**Unión Europea:**

- El tratamiento fiscal varía según el estado miembro
- Algunos países gravan al realizarse, otros anualmente
- Considera las regulaciones fiscales de cripto locales

**Reino Unido:**

- HMRC trata las recompensas de staking como ingreso o ganancias de capital dependiendo de las circunstancias
- Se requiere mantener registros detallados
- Considera las reglas de "bed and breakfasting"

**Otras Jurisdicciones:**

- Investiga la guía de cripto de tu autoridad fiscal local
- Muchos países aún están desarrollando marcos
- Se recomienda encarecidamente asesoramiento profesional

### Usando Software Fiscal

**Herramientas Populares de Impuestos Cripto:**

- La mayoría soporta el rastreo de rETH
- Pueden importar desde Etherscan
- Calculan ganancias/pérdidas automáticamente
- Generan reportes fiscales para tu jurisdicción

**Consejos de Integración:**

1. Importa todas las direcciones de cartera
2. Verifica que las transacciones de rETH/ETH estén correctamente clasificadas
3. Asegúrate de que las tasas de cambio sean precisas
4. Revisa las ganancias/pérdidas calculadas
5. Exporta reportes para la presentación de impuestos

### Señales de Alerta a Evitar

**Errores Comunes:**

- No rastrear la base de costo
- Olvidar reportar transacciones de staking
- Ignorar transacciones pequeñas
- Perder interacciones DeFi
- Datos incorrectos de tasa de cambio

**Preparación para Auditoría:**

- Mantén todos los registros de transacciones
- Documenta tus métodos de cálculo
- Guarda las fuentes de tasas de cambio
- Mantén prueba de propiedad de la cartera
- Almacena registros por el período de retención requerido

## Preguntas Frecuentes

**P: ¿Qué ruta debo elegir?**
R: La interfaz recomienda automáticamente la mejor ruta con una insignia verde "mejor tasa". Generalmente, usa la opción recomendada.

**P: ¿Por qué CoW Swap a veces ofrece mejores tasas?**
R: CoW Swap agrega liquidez de múltiples DEXs y usa subastas por lotes para encontrar precios óptimos, a menudo superando la tasa fija del protocolo.

**P: ¿Es realmente sin gas CoW Swap?**
R: La creación y firma de órdenes son sin gas. Solo pagas gas por el envolvimiento inicial de WETH y las aprobaciones de tokens (configuración única).

**P: ¿Cuánto tiempo toman las órdenes de CoW Swap?**
R: Típicamente 2-5 minutos, pero puede variar según las condiciones del mercado.

**P: ¿Qué sucede si mi orden de CoW Swap expira?**
R: No se pierde nada. Tus tokens permanecen en tu cartera. Puedes colocar una nueva orden con parámetros ajustados.

**P: ¿Por qué la ruta de Protocolo a veces no está disponible?**
R: **Para staking:** El deposit pool está lleno. **Para retiro del stake:** Liquidez de ETH insuficiente. Estos son estados temporales que cambian a medida que los usuarios interactúan con el protocolo.

**P: ¿Son imponibles las transacciones de staking?**
R: En la mayoría de las jurisdicciones, sí. Convertir ETH a rETH y viceversa son típicamente eventos imponibles. Consulta a un profesional fiscal para tu situación específica.

**P: ¿Cómo rastrea mi base de costo de rETH?**
R: Registra el valor de ETH cuando haces stake - esto se convierte en tu base de costo de rETH. Usa hashes de transacciones, marcas de tiempo y precios para registros precisos.

**P: ¿Es diferente para impuestos moverse entre las rutas de Protocolo y CoW Swap?**
R: El tratamiento fiscal es típicamente el mismo - ambos involucran intercambiar ETH por rETH. La ruta elegida generalmente no afecta las obligaciones fiscales, aunque el mantenimiento de registros puede diferir ligeramente.

## Recursos Adicionales

- [Documentación de Rocket Pool](https://docs.rocketpool.net)
- [Documentación de CoW Swap](https://docs.cow.fi)
- [Discord de Rocket Pool](https://discord.gg/rocketpool)
- [Rastreador de Gas de Etherscan](https://etherscan.io/gastracker)

## Direcciones de Contratos

### Mainnet

- **Token rETH:** `0xae78736Cd615f374D3085123A210448E74Fc6393`
- **Token WETH:** `0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2`
- **Rocket Storage:** `0x1d8f8f00cfa6758d7bE78336684788Fb0ee0Fa46`
- **CoW Protocol VaultRelayer:** `0xC92E8bdf79f0507f65a392b0ab4667716BFE0110`

### Testnet Hoodi

- **Token rETH:** `0x7322c24752f79c05ffd1e2a6fcb97020c1c264f1`
- Consulta la [Documentación de Rocket Pool](https://docs.rocketpool.net) para otras direcciones de la testnet Hoodi.

---

¡Eso es todo lo que hay que saber sobre hacer staking con Rocket Pool! Esperamos que encuentres útiles las nuevas opciones de enrutamiento para obtener el mejor valor por tu stake.

Siéntete libre de pasar por [nuestro servidor de Discord](https://discord.gg/rocketpool) para hacernos saber lo que pensaste y mantener un ojo en el proyecto a medida que evoluciona.
