---
next:
  text: Rescatando un Minipool Disuelto
  link: "/es/node-staking/rescue-dissolved"
---

# Cerrar un Minipool

## Saliendo de tu Validador

Cuando hayas decidido que ya no quieres ejecutar un minipool y quieras acceder al saldo completo bloqueado en la Beacon Chain, tendrás que seguir varios pasos:

1. Enviar una solicitud de salida voluntaria para el validador del minipool desde la Beacon Chain.
2. Esperar a que tu validador salga.
3. Esperar a que el saldo de tu validador sea retirado a tu minipool en la capa de Ejecución.
4. Cerrar el minipool para distribuir las recompensas y acceder a los fondos

Cubriremos cada paso a continuación.

### Enviando la Solicitud de Salida

Si quieres salir del validador conectado a un minipool, ejecuta el siguiente comando:

```shell
rocketpool minipool exit
```

Se te presentará una lista de minipools que pueden salir:

```
Please select a minipool to exit:
1: All available minipools
2: 0x7E5700bcd65B1770bA68abB288D3f53814d376aC (staking since 2023-02-08, 06:33 +0000 UTC)
3: 0xd8E804cFA64ADb386F52DB20717810130c90f674 (staking since 2023-02-08, 06:33 +0000 UTC)
```

Una vez que confirmes que quieres salir, tu nodo enviará una solicitud de salida voluntaria a la Beacon Chain.
Esta **no** es una transacción normal de la capa de Ejecución, por lo que no necesitas pagar gas por ella.

Si necesitas la clave pública del validador para el minipool del que acabas de salir, puedes recuperarla usando `rocketpool minipool status`.
Puedes ver el estado de salida de tu validador en un explorador de Beacon Chain como [https://beaconcha.in](https://beaconcha.in) (o [https://hoodi.beaconcha.in](https://hoodi.beaconcha.in) para la Testnet Hoodi).
Tomará algo de tiempo para que tu estado se actualice, pero una vez que lo haga, lo verás en el estado "exiting":

<img src="./images/exiting.png" width="100%" height="auto" />

Aquí puedes ver que el Estado es `Exiting`, la época en la que saldrá está resaltada (5224), y el ícono "Exited" estará pulsando en verde para indicar que la operación está en progreso.
Puede tomar algo de tiempo para que tu validador salga, _especialmente_ si hay un gran número de validadores saliendo de la Beacon Chain al mismo tiempo; el protocolo está diseñado para permitir que solo un pequeño número de validadores salga por época, por lo que es posible que tengas que esperar tu turno.

Una vez que haya pasado tu época de salida, tu validador saldrá oficialmente de la cadena y ya no atestiguará ni propondrá bloques.
Puedes confirmar esto en los registros de tu Cliente Validador, o en el explorador:

<img src="./images/exited.png" width="100%" height="auto" />

El estado ha cambiado a `Exited` y hay algo de texto debajo que indica tu **época retirable** (que debería ser 256 épocas después de que salgas, o aproximadamente 27 horas).
Beaconcha.in también proporciona convenientemente las marcas de tiempo locales para cuando tu validador saldrá y cuando será retirable.

Una vez que haya entrado en el estado **retirable**, tu validador será puesto en cola por la Beacon Chain para la distribución de recompensas.
Esta cola depende de cuántos validadores están retirando actualmente.
Una vez que sea tu turno, la Beacon Chain enviará _automáticamente_ tu saldo a la dirección de tu minipool en la capa de Ejecución.
En este punto, puedes acceder a él usando la CLI de Smartnode para hacer una distribución.

### Distribuyendo Recompensas Completas

::: tip NOTA
Este proceso requiere que tu validador haya salido de la Beacon Chain y que el saldo de tu validador haya sido transferido al contrato del minipool.
Si necesitas un recordatorio sobre cómo hacer ese proceso, por favor consulta la sección [**Saliendo de tu Validador**](#saliendo-de-tu-validador) arriba - regresa aquí una vez que hayas terminado.
:::

Si has salido de tu validador de la Beacon Chain y tu saldo ha sido depositado en el contrato del minipool, puedes retirar todo de manera segura en un solo comando.
A diferencia de la [distribución manual](./skimming#manual-distribution), este proceso **finalizará** realmente tu minipool, lo que lo cierra y lo deja inactivo.
Una vez que tu saldo haya sido retirado de la Beacon Chain y pases por el siguiente proceso para acceder a los fondos, el deber del minipool habrá terminado.

Para recuperar los fondos y cerrar el minipool, ejecuta el siguiente comando:

```shell
rocketpool minipool close
```

Esto te presentará una lista de minipools que son elegibles para cerrar:

```
Please select a minipool to close:
1: All available minipools
2: 0xd8E804cFA64ADb386F52DB20717810130c90f674 (32.007209 ETH available, 8.002559 ETH is yours plus a refund of 0.000000 ETH)
```

Aquí puedes ver el saldo total para cada minipool elegible, cuánto de ese saldo se distribuirá a ti, y cuánto de ese saldo está reservado para ti como reembolso (que evita la distribución).

Selecciona qué minipool te gustaría distribuir y cerrar de la lista, confirma la acción, y espera a que tu transacción sea validada.
Una vez que lo haga, tu parte del saldo del minipool (y tu reembolso) se enviarán a tu dirección de retiro, y el minipool entrará en el estado `finalized`.

Puedes verificarlo mirando la transacción en un explorador de bloques; por ejemplo, consulta [la transacción para cerrar el minipool anterior (Testnet Goerli)](https://goerli.etherscan.io/tx/0xe81415b3b66f9b42d43ac17a0983e792725726c9fdd35ac855745bd12a053509).

### Retirando RPL del Stake

En este punto, tu RPL efectivo se actualizará para eliminar este minipool del cálculo.
Ahora puedes retirar del stake cualquier RPL que tengas que te pondría por encima del umbral del 60% de ETH vinculado.

Para retirar RPL del stake contra el nodo, ejecuta el siguiente comando:

```shell
rocketpool node withdraw-rpl
```

::: tip NOTA
Hay dos limitaciones en los retiros de RPL:

El RPL no puede retirarse dentro de los 28 días posteriores al staking (o re-staking) de RPL. Ten cuidado si reclamas estas recompensas antes de cerrar tu minipool, si vuelves a hacer stake de cualquier cantidad de recompensas RPL, no podrás retirar ninguna cantidad de RPL durante 28 días desde la última acción de staking.

El RPL puede retirarse hasta el 60% de tu ETH vinculado total. En una salida completa, eso significa que todo puede retirarse; para salidas parciales, planifica teniendo en cuenta este límite.
:::

## Una Nota sobre el Delegado Antiguo

El **delegado de minipool original** asignado a cada minipool desde el lanzamiento de Rocket Pool hasta el despliegue de Atlas fue construido con dos suposiciones en mente:

1. La única vez que tu minipool tendrá un saldo es después de que el validador haya salido de la Beacon Chain.
2. El Oracle DAO cambiará el estado de tu minipool de "staking" a "withdrawable" una vez que el saldo haya sido transferido desde la Beacon Chain al contrato del minipool.

El primer punto claramente ya no es relevante ahora que Ethereum está siendo actualizado para soportar el skimming.
El segundo punto _tampoco_ es verdadero, porque el Oracle DAO **ya no** marcará los minipools "withdrawable".
Esta fue una decisión de diseño intencional para reducir el poder que el Oracle DAO ejerce sobre los operadores de nodos de Rocket Pool y permitirles acceder a las recompensas sin ningún requisito suplementario de partes confiables.

Debido a estas deficiencias, la CLI de Smartnode **ya no soporta** retiros o distribución de fondos en el delegado de minipool original.
Si deseas acceder a tus recompensas, **debes** actualizar al delegado Atlas que soporta las nuevas condiciones de retiro listadas arriba.

::: danger PELIGRO
Si eres un usuario avanzado y evitas la CLI para invocar la funcionalidad de distribución en el contrato directamente a través de una herramienta de terceros, ten en cuenta las siguientes cosas:

1. La función de distribución del delegado se revertirá si el saldo del minipool está **por debajo de 16 ETH**. Los saldos por debajo de 16 ETH **no pueden ser accedidos.**
2. Si el minipool tiene **entre 16 y 32 ETH** en su saldo, la distribución por el delegado original asumirá que tu validador ha sido **slashed**. Devolverá 16 ETH al staking pool y te dará lo que quede. _Solo_ funcionará correctamente si el saldo del minipool está por encima de 32 ETH.
3. El minipool nunca entrará en el estado `finalized` porque el Oracle DAO nunca lo marcará como `withdrawable`, así que aunque puedas acceder a tu ETH, **tu RPL estará bloqueado** hasta que actualices al delegado Atlas.

Debido a estos puntos, **recomendamos encarecidamente** que simplemente actualices al delegado Atlas en primer lugar y los evites por completo.
:::
