import { Tab, Tabs } from "@rspress/core/theme";
import powershell from "./images/powershell.png";

# Introducción a Secure Shell (SSH)

En general, hay dos formas de acceder a tu máquina de nodo: **localmente** y **remotamente**.

- **Localmente** se refiere a sentarte en el nodo físico y usar un monitor y teclado conectados directamente a él.
- **Remotamente** se refiere a conectarse al nodo usando una computadora diferente (digamos, una laptop o escritorio) a través de una red e interactuar con él desde allí.

La mayoría de las veces, los Node Operators prefieren la flexibilidad de trabajar en su nodo **remotamente**.

El Smartnode actualmente no tiene una GUI (Interfaz Gráfica de Usuario), solo una CLI (Interfaz de Línea de Comandos), lo que significa que interactuar con él se hace completamente escribiendo comandos en un terminal de línea de comandos.
Como tal, interactuar con él remotamente requiere alguna forma de acceder al terminal de tu nodo desde una máquina diferente.
En esta sección, proporcionaremos una breve introducción a la forma más popular de hacer esto: **SSH**.

<div className="p-3">
  <Tabs>
    <Tab label="Usando una Máquina Windows">
      Hay algunas formas diferentes de usar SSH desde una máquina Windows.

      La más simple es usar **Powershell**, que es un potente terminal de comandos que viene integrado en versiones modernas de
      Windows.
      Powershell tiene SSH incluido, por lo que puedes usarlo de inmediato sin instalar ningún programa suplementario.

      Puedes encontrarlo abriendo el menú Inicio y escribiendo `Powershell` en la barra de búsqueda; habrá varias
      opciones, pero la opción que deseas se llama simplemente `Windows Powershell`:

      <img src={powershell} width="100%" height="auto" />

      Esto abrirá un terminal con un fondo azul.
      Puedes usar `ssh` desde aquí - consulta a continuación las instrucciones sobre cómo hacer eso.

      Otra herramienta popular se llama [PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html).
      PuTTY es un programa especial que incluye un terminal dedicado para el uso de SSH, pero también viene con una GUI conveniente
      para hacer cosas como cambiar configuraciones, guardar configuraciones en un "perfil" y mantener una lista de máquinas a las
      que puedes conectarte fácilmente seleccionando de una lista.

      En lugar de usar `ssh` como lo harías con las otras herramientas, PuTTY hará esto por ti automáticamente - todo lo que necesitas
      proporcionar es el nombre de usuario y la contraseña.
      Para obtener información sobre cómo usar PuTTY, echa un vistazo a [este excelente
      tutorial](https://tonyteaches.tech/putty-ssh-windows-tutorial/).

      <p className="rspress-directive warning">
        **NOTA**: PuTTY puede mostrar los colores incorrectos en la interfaz de usuario basada en texto (TUI) de `rocketpool service
        config`.
        Hay una solución fácil para esto. En la configuración de PuTTY, navega a **Connection** > **Data** > **Terminal Details**
        en el menú desplegable. Debería haber un cuadro de texto **Terminal-type string**. Escribe `xterm-256color`, luego guarda
        la configuración
        para resolver esto.
      </p>

    </Tab>
    <Tab label="Usando una Máquina Linux o macOS">
      Usar SSH desde una máquina Linux o macOS es trivial; si ya estás usando una de estas, probablemente ya hayas
      interactuado con el terminal en algún momento.
      SSH está integrado directamente en el terminal; úsalo ejecutando el comando `ssh`. Por defecto, SSH te permitirá
      conectarte a la cuenta de usuario principal de tu nodo.
    </Tab>

  </Tabs>
</div>

Así es como te conectarías a tu nodo usando SSH.

:::warning NOTA
¡Ejecuta el siguiente comando desde tu laptop o escritorio, **no desde tu nodo mismo**!
:::

```shell
ssh username@node-ip-address
```

Por ejemplo, si el nombre de usuario de tu nodo es `staker` y la dirección IP de tu nodo es `192.168.1.10`,
te conectarías con el siguiente comando:

```shell
ssh staker@192.168.1.10
```

La primera vez que hagas esto, verás un mensaje presentando la clave pública que tu nodo está usando - si estás
familiarizado con cómo verificar esta clave, puedes hacerlo ahora.
De lo contrario, si confías en que tienes la dirección IP del nodo correcta en tu comando `ssh`, simplemente puedes decir `yes` para
aceptarla.
Solo necesitas hacer esto una vez.

El cliente entonces te pedirá la contraseña de tu usuario; una vez que la ingreses, ¡estás dentro!
Serás recibido con un mensaje de bienvenida, algunos detalles sobre tu máquina y un nuevo prompt.

En este punto, todo lo que escribas en el terminal **se ejecuta remotamente en tu máquina de nodo** - ¡es como si
estuvieras conectado directamente a la máquina de nodo y escribiendo en ella con un teclado conectado localmente!

Necesitarás conectarte por SSH al terminal periódicamente para actualizaciones y mantenimiento.
Puede ser inconveniente recordar cómo iniciar sesión en tu nodo, por lo que puede ser útil acortar este comando creando un alias memorable - un "atajo" de comando personalizado.

:::warning NOTA
Si haces esto, asegúrate de crear el alias en la **máquina cliente**, **no** en el nodo.
Si tu terminal todavía está conectado al nodo, primero ejecuta `exit` en el prompt de comando (o simplemente abre una nueva
ventana de terminal).
:::

:::warning NOTA
Esta sección solo se aplica a usuarios de Linux/OSX o WSL - PowerShell no es compatible.
:::

En este ejemplo, crearemos un alias llamado `ethnode` que reemplazará el comando SSH.
Asumiendo, como antes, que el nombre de usuario de tu nodo es `staker` y la dirección IP de tu nodo es `192.168.1.10`, crea el
alias con el siguiente comando:

```shell
echo "alias ethnode='ssh staker@192.168.1.10'" >> ~/.bash_aliases
```

Recarga la lista de alias para hacer que tu ventana de terminal actual sea consciente del nuevo alias:

```shell
source ~/.bash_aliases
```

Ahora, puedes conectarte al nodo usando el alias que acabas de crear en lugar del comando más largo que implica
especificar la dirección IP del nodo:

```shell
ethnode
```
