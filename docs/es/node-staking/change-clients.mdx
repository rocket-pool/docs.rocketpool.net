import tui_select_ec from "./images/tui-select-ec.png";
import tui_confirm_ec from "./images/tui-confirm-ec.png";
import tui_select_cc from "./images/tui-select-cc.png";
import tui_checkpoint_sync from "./images/tui-checkpoint-sync.png";
import tui_confirm_cc from "./images/tui-confirm-cc.png";

# Cambiar Clientes de Execution o Consensus

En circunstancias normales, probablemente solo seleccionarás un cliente de Execution y Consensus cuando crees tu nodo de Rocket Pool por primera vez y los dejarás funcionar felizmente durante la vida de tu Nodo.
Sin embargo, hay algunas situaciones donde es posible que desees cambiar tu selección de cliente.
Aquí hay algunos ejemplos:

- Tu cliente obtiene una participación de [supermayoría](https://clientdiversity.org/) en las cadenas de Execution o Beacon, y deseas cambiar por la salud general de la red
- Un error hace que tu cliente deje de funcionar correctamente, y necesitas volver a estar en línea rápidamente para reanudar las tareas de validación
- Deseas probar una nueva función que ofrece un cliente diferente
- Un cliente diferente es más adecuado para el hardware de tu nodo (por ejemplo, algunos clientes son mejores en sistemas ARM que otros)

Afortunadamente, el stack del Smartnode hace que cambiar de clientes sea extremadamente fácil.
Todo lo que se necesita son algunos cambios en el TUI de Configuración, y algunos comandos adicionales opcionales para respaldar los datos de tu cliente existente antes de cambiar de cliente.

## Cambiar Clientes de Execution

Antes de cambiar tu cliente de Execution, vale la pena señalar los siguientes puntos:

- Los datos de cadena **no se comparten** entre clientes. Tu nuevo cliente necesitará resincronizar los datos de cadena de Mainnet, lo que puede tomar algún tiempo (aunque cada cliente admite snap sync, que el Smartnode usa para acelerar la resincronización).
- Por defecto, el Smartnode dejará los datos de cadena de tu cliente antiguo en tu disco en caso de que desees volver a tu antiguo cliente de Execution y continuar donde lo dejaste. Es posible que desees **exportarlos a una ubicación diferente** y eliminarlos para liberar espacio antes de cambiar de cliente, ya que los clientes de Execution pueden usar cientos de gigabytes. Tenemos pasos a continuación sobre cómo hacer esto.
- Mientras tu nuevo cliente se resincroniza, la mayoría de las funciones del CLI del Smartnode estarán fuera de línea ya que dependen del cliente de Execution. **Deberías tener un cliente de Execution de respaldo disponible antes de hacer esto para mitigar el tiempo de inactividad en tu Smartnode.**

### (Opcional) Exportar la Base de Datos de tu Cliente de Execution

El primer paso en el proceso es opcional: si lo deseas, puedes exportar tus datos de cadena existentes para tu cliente de Execution actual.
Esto te permitirá liberar espacio de disco valioso en tu nodo para tu nuevo cliente de Execution, y puedes mantener los datos de cadena antiguos en caso de que desees volver al cliente antiguo y continuar donde lo dejaste.

Consulta la guía [Respaldo de tu Nodo](./backups##respaldo-de-tus-datos-de-cadena-de-execution) para más detalles.

### Cambiar tu Cliente de Execution Seleccionado

Para cambiar tu cliente seleccionado, ejecuta `rocketpool service config` para ingresar a la interfaz de usuario de configuración.
Navega a la sección `Execution Client (ETH1)`, y selecciona el menú desplegable `Execution Client`:

<img src={tui_select_ec} width="100%" height="auto" />

Abre el menú desplegable con `Enter`, usa las teclas de flecha para navegar a tu cliente de elección, y presiona `Enter` nuevamente para confirmar la selección.

Ten en cuenta que cada cliente tiene sus propias opciones únicas, por lo que es posible que veas algunas configuraciones adicionales aparecer en esta pantalla después de seleccionar un cliente diferente.
Siéntete libre de explorarlas para ver cómo afectan las cosas.

Cuando estés satisfecho con tu elección, presiona `Esc` para volver al menú principal, luego `Tab` para resaltar el botón `Review Changes and Save`.
Se te presentará la pantalla de revisión, que mostrará tu cambio de selección de cliente:

<img src={tui_confirm_ec} width="100%" height="auto" />

Presiona `Enter` para aceptar los cambios, ¡y listo!
Tu nuevo cliente de Execution comenzará a sincronizar inmediatamente.
Como de costumbre, puedes seguirlo con `rocketpool service logs eth1`.
**Recomendamos que hagas esto para verificar que no haya errores y que funcione correctamente.**

::: danger NOTA
Ahora que las capas de Execution y Consensus se han fusionado, apagar tu cliente de Execution _también_ apagará tu cliente de Consensus hasta que tu cliente de Execution haya terminado de resincronizar.
Esto significa que tu nodo **dejará de atestar y proponer bloques, y perderá ETH en lugar de ganarlo.**

Para evitar esto y continuar validando mientras tu cliente de Execution se resincroniza, **por favor configura un [nodo de respaldo](./fallback)**.
:::

### (Recomendado) Eliminar tus Datos de Cadena Antiguos

Este no es un paso requerido, pero **recomendamos fuertemente** que elimines los datos de cadena de tu cliente antiguo ahora que has cambiado a uno nuevo para que puedas liberar espacio en disco para él.

Para hacer esto, simplemente ejecuta el siguiente comando:

```shell
rocketpool service resync-eth1
```

Esto eliminará todos tus datos de cliente de Execution y lo reiniciará.

::: tip CONSEJO
Dado que acabas de seleccionar un nuevo cliente de Execution, no se verá afectado por esto - esencialmente, todo lo que hará es eliminar tus datos de cadena antiguos.
Deberías hacer esto lo antes posible después de cambiar de cliente para evitar una pérdida innecesaria de progreso en tu nuevo cliente.
:::

## Cambiar Clientes de Consensus

Cambiar clientes de Consensus es incluso más fácil que los clientes de Execution, gracias al [Checkpoint Sync](./config-docker#beacon-chain-checkpoint-syncing).
Esta función te permite sincronizar inmediatamente un nuevo cliente de Consensus con la red, por lo que no hay necesidad de preservar tus datos de cadena antiguos.

Comienza usando la interfaz de usuario `rocketpool service config` y navegando a la sección `Consensus Client (ETH2)`.
A continuación, selecciona el menú desplegable `Consensus Client`:

<img src={tui_select_cc} width="100%" height="auto" />

Abre el menú desplegable con `Enter`, usa las teclas de flecha para navegar a tu cliente de elección, y presiona `Enter` nuevamente para confirmar la selección.

Ten en cuenta que cada cliente tiene sus propias opciones únicas, por lo que es posible que veas algunas configuraciones adicionales aparecer en esta pantalla después de seleccionar un cliente diferente.
Siéntete libre de explorarlas para ver cómo afectan las cosas.

A continuación, verifica que estés usando un proveedor de Checkpoint Sync:

<img src={tui_checkpoint_sync} width="100%" height="auto" />

Si no tienes un proveedor de Checkpoint Sync configurado, [puedes usar fácilmente las instrucciones de aquí para hacerlo gratis](./config-docker#beacon-chain-checkpoint-syncing).

Cuando estés satisfecho con tu elección, presiona `Esc` para volver al menú principal, luego `Tab` para resaltar el botón `Review Changes and Save`.
Se te presentará la pantalla de revisión, que mostrará tu cambio de selección de cliente:

<img src={tui_confirm_cc} width="100%" height="auto" />

Presiona `Enter` para aceptar los cambios, ¡y listo!
Tu nuevo cliente de Consensus comenzará a sincronizar inmediatamente.
Como de costumbre, puedes seguirlo con `rocketpool service logs eth2`.
**Recomendamos que hagas esto para verificar que no haya errores y que funcione correctamente.**
