import { Tab, Tabs } from "@rspress/core/theme";

# Propuestas del Oracle DAO

Como recordatorio, hay dos tipos de deberes del Oracle DAO:

1. **Deberes automatizados** - estos son deberes relacionados con la operación rutinaria de Rocket Pool, como el transporte de información de la Capa de Consenso a la Capa de Ejecución, el cálculo de varios aspectos del protocolo fuera de la cadena y su envío como actualizaciones a los Smart Contracts. Cada uno de estos se realiza automáticamente por el proceso daemon `watchtower` y no requiere intervención manual siempre que tus Clientes de Ejecución y Consenso, y tu daemon `watchtower`, estén funcionando normalmente. Ya configuraste el daemon `watchtower` en los pasos anteriores, por lo que esta sección no los cubrirá nuevamente.
2. **Deberes manuales** - estos son deberes que requieren tu propia toma de decisiones y comunicación fuera de banda con el resto del Oracle DAO para realizarse. Incluyen cosas como votar en actualizaciones de contratos, cambiar parámetros e invitar o expulsar miembros hacia/desde el Oracle DAO. Todos estos pueden hacerse a través de la CLI estándar de Smartnode. Esta sección describe cada uno de estos deberes y cómo realizarlos.

Las propuestas forman el núcleo de tus responsabilidades fuera de los deberes automatizados de `watchtower`.
Esencialmente, funcionan de la siguiente manera:

- El Oracle DAO colectivo debe discutir una próxima propuesta extensamente con anticipación, para que cada miembro esté al tanto de ella y entienda lo que esa propuesta implicará.
- Un miembro del Oracle DAO luego crea la propuesta a través de una transacción en cadena.
- La propuesta luego entrará en un **período de espera** antes de que pueda comenzar la votación para tener más discusión y formar su opinión sobre ella. Esto es actualmente **7 días** en Mainnet.
- Después de que el período de espera haya terminado, los miembros pueden votar sobre la propuesta a través de un simple voto de sí o no.
- Cuando un quórum del 51% de los miembros del Oracle DAO haya votado de la misma manera, se concluye la votación. Si el 51% acordó la propuesta, podrá ser **ejecutada**. Cualquier miembro puede ejecutar la propuesta una vez que sea aprobada.
- La ejecución se refiere a desencadenar formalmente el cambio en cadena, modificando así el estado de los contratos principales de Rocket Pool.

## Hacer una Propuesta

Una vez que hagas una propuesta, entrará en un **período de revisión** donde los otros miembros pueden verla y discutirla, pero no podrán votar sobre ella.
Al momento de escribir esto, esto es actualmente **7 días**.

Después del período de revisión, habrá un **período de votación** donde los miembros pueden votar a favor de la propuesta, o en contra de ella.
Al momento de escribir esto, esto es actualmente **14 días**.

Si la propuesta alcanza el quórum antes de que expire (es decir, si suficientes miembros votan a favor de ella para alcanzar el consenso), será **aprobada**.
El quórum es un parámetro configurable por el Oracle DAO; actualmente está establecido en al menos **51%** del conjunto total de miembros.

Una vez que se aprueba una votación, puede ser **ejecutada**, lo que hace que sus cambios entren en vigencia.
Al momento de escribir esto, la ejecución es **14 días** después de que la propuesta fue aprobada.

El proceso para hacer una nueva propuesta depende del tipo de propuesta que desees hacer.
Selecciona un tipo de las pestañas a continuación.

<div className="p-3">
  <Tabs>
    <Tab label="Lista de Miembros del Oracle DAO">
      Para proponer modificar la lista de miembros del Oracle DAO, usa el comando `rocketpool odao propose member` que
      proporciona las siguientes opciones:

      ```
      NAME:
      rocketpool odao propose member - Make an oracle DAO member proposal

      USAGE:
      rocketpool odao propose member command [command options] [arguments...]

      COMMANDS:
      invite, i Propose inviting a new member
      leave, l Propose leaving the oracle DAO
      kick, k Propose kicking a member

      OPTIONS:
      --help, -h show help
      ```

      #### invite

      Invitar a un miembro se hace a través de `rocketpool odao propose member invite` que tomará 3 argumentos adicionales:

      - La dirección del nodo a invitar (debe ser un nodo de Rocket Pool registrado)
      - El nombre / etiqueta para este nodo
      - La URL o información de contacto para el usuario u organización que ejecuta el nodo

      Por ejemplo: para invitar a un nuevo miembro, ejecuta `rocketpool odao propose member invite
      0xabcd1234abcd1234abcd1234abcd1234abcd1234 some-user user@example.com`.

      #### kick

      Expulsar a un miembro del Oracle DAO se hace a través del comando `rocketpool odao propose member kick`.
      Te pedirá que selecciones qué miembro deseas expulsar, e impongas una multa opcional (desde 0 RPL hasta la cantidad de
      RPL vinculado, actualmente 1750 RPL).
      Esta multa, si se proporciona, quemará parte de (o todo el) vínculo de RPL del miembro si el Oracle DAO vota para expulsar a ese
      miembro.

      #### leave

      Si deseas renunciar voluntariamente al Oracle DAO, usa el comando `rocketpool odao propose member leave`.
      Esto creará una nueva propuesta para que los otros miembros puedan votar si aprueban o no tu renuncia.
    </Tab>
    <Tab label="Parámetros del Oracle DAO">
      Para proponer modificar los parámetros que rigen cómo funcionan las votaciones del Oracle DAO y la modificación de membresía, usa el
      comando `rocketpool odao propose setting` que proporciona las siguientes opciones:

      ```
      NAME:
      rocketpool odao propose setting - Make an oracle DAO setting proposal

      USAGE:
      rocketpool odao propose setting command [command options] [arguments...]

      COMMANDS:
      members-quorum, q Propose updating the members.quorum setting - takes a percent, from 0 to 100
      members-rplbond, b Propose updating the members.rplbond setting - takes an RPL amount (e.g. 5000)
      proposal-cooldown, c Propose updating the proposal.cooldown.time setting - format is e.g. 1h30m45s
      proposal-vote-timespan, v Propose updating the proposal.vote.time setting - format is e.g. 1h30m45s
      proposal-vote-delay-timespan, d Propose updating the proposal.vote.delay.time setting - format is e.g. 1h30m45s
      proposal-execute-timespan, x Propose updating the proposal.execute.time setting - format is e.g. 1h30m45s
      proposal-action-timespan, a Propose updating the proposal.action.time setting - format is e.g. 1h30m45s
      scrub-period, s Propose updating the minipool.scrub.period setting - format is e.g. 1h30m45s

      OPTIONS:
      --help, -h show help
      ```

      #### members-quorum

      Usar `rocketpool odao propose setting members-quorum value` cambiará el quórum requerido para los deberes del Oracle DAO
      antes de que se consideren canonizados.
      `value` aquí puede ser un número de punto flotante entre 0 y 100, indicando el porcentaje de miembros necesarios para alcanzar
      el quórum en las votaciones del Oracle DAO.

      ::: warning NOTA
      Ten en cuenta que esto **no** afecta el quórum requerido para deberes automatizados como el precio de RPL y el envío del saldo de rETH;
      esas configuraciones son controladas por el Protocol DAO (pDAO), _no_ por el Oracle DAO.
      :::

      #### members-rplbond

      Usa `rocketpool odao propose setting members-rplbond value` para cambiar la cantidad de RPL requerida como vínculo para nuevos
      miembros invitados al Oracle DAO.
      Por ejemplo, ingresar `5000` para `value` establecerá el vínculo en 5000 RPL.
      Ten en cuenta que esto no afecta a los miembros que ya existen; solo afecta a los nuevos miembros invitados después del cambio.

      #### proposal-cooldown

      Usa `rocketpool odao propose setting proposal-cooldown value` para cambiar el tiempo de espera que un miembro debe esperar
      entre el envío de propuestas.

      `value` es una duración de tiempo formateada como cadena, como `1h30m45s` para una hora, treinta minutos y cuarenta y cinco
      segundos.
      No acepta días; para múltiples días, simplemente usa el número total de horas.

      #### proposal-vote-timespan

      Usa `rocketpool odao propose setting proposal-vote-timespan value` para cambiar cuánto tiempo puede existir una votación antes de
      expirar.

      `value` es una duración de tiempo formateada como cadena, como `1h30m45s` para una hora, treinta minutos y cuarenta y cinco
      segundos.
      No acepta días; para múltiples días, simplemente usa el número total de horas.

      #### proposal-vote-delay-timespan

      Usa `rocketpool odao propose setting proposal-vote-delay-timespan value` para cambiar cuánto tiempo el Oracle DAO debe
      esperar antes de poder votar sobre una nueva propuesta.

      `value` es una duración de tiempo formateada como cadena, como `1h30m45s` para una hora, treinta minutos y cuarenta y cinco
      segundos.
      No acepta días; para múltiples días, simplemente usa el número total de horas.

      #### proposal-execute-timespan

      Usa `rocketpool odao propose setting proposal-execute-timespan value` para cambiar cuánto tiempo el Oracle DAO tiene para
      ejecutar (promulgar) una propuesta después de que sea aprobada.
      Si ninguno de los miembros ejecuta la propuesta durante esta ventana, expirará y la propuesta se volverá
      inválida.

      `value` es una duración de tiempo formateada como cadena, como `1h30m45s` para una hora, treinta minutos y cuarenta y cinco
      segundos.
      No acepta días; para múltiples días, simplemente usa el número total de horas.

      #### proposal-action-timespan

      Ciertas propuestas requieren acciones secundarias después de ser ejecutadas para que terminen de tener efecto (como
      invitar a un miembro a unirse, luego que se unan realmente).
      Usa `rocketpool odao propose setting proposal-action-timespan `value`` para cambiar cuánto tiempo esta acción secundaria está
      disponible para ser ejecutada después de que la propuesta sea ejecutada.
      El usuario no podrá realizar esta acción _después_ de esta ventana; si la acción no se toma a tiempo, la propuesta
      es esencialmente inválida.

      `value` es una duración de tiempo formateada como cadena, como `1h30m45s` para una hora, treinta minutos y cuarenta y cinco
      segundos.
      No acepta días; para múltiples días, simplemente usa el número total de horas.

      #### scrub-period

      Usa `rocketpool odao propose setting scrub-period value` para cambiar cuánto dura el "período de limpieza" (el tiempo
      entre que un nuevo minipool entra en estado `prelaunch` y entra en estado `staking`).
      El Oracle DAO tiene este tiempo para verificar nuevos minipools para el [exploit de credenciales de retiro](https://github.com/rocket-pool/rocketpool-research/blob/master/Reports/withdrawal-creds-exploit) y
      limpiarlos si se detecta el exploit, asegurando así que los fondos de rETH no sean robados.
      Este deber se realiza automáticamente por el daemon `watchtower`.
      Como la verificación generalmente se realiza en cuestión de minutos, este valor está simplemente diseñado para actuar como un buffer de seguro
      en el caso de que el Oracle DAO no pueda llegar a consenso debido a una falla del nodo; los miembros tienen este tiempo para
      resolver el problema y alcanzar el quórum sobre la limpieza de un minipool explotado.

      `value` es una duración de tiempo formateada como cadena, como `1h30m45s` para una hora, treinta minutos y cuarenta y cinco
      segundos.
      No acepta días; para múltiples días, simplemente usa el número total de horas.
    </Tab>
    <Tab label="Actualizaciones de Contratos">
      Las actualizaciones de contratos están actualmente fuera del alcance de la CLI.
      Las transacciones deben enviarse manualmente; consulta con el equipo de Rocket Pool si deseas aprender cómo
      proponer una actualización de contrato a la red.
    </Tab>

  </Tabs>
</div>

## Ver Propuestas

Para ver un breve resumen de todas las propuestas en la historia del protocolo, usa `rocketpool odao proposals list`.
Esto ordenará las propuestas por su estado y mostrará quién la propuso y qué hace.

Para ver los detalles de una propuesta específica, usa `rocketpool odao proposals details value` donde `value` es el ID de la propuesta que deseas ver.
Esto mostrará un desglose completo de la información de la propuesta, incluido quién la creó, cuándo se creó, el cuerpo de la carga útil, cuántos miembros votaron a favor, cuántos miembros votaron en contra y si tu nodo ha votado sobre ella todavía.

## Votar sobre Propuestas

Para votar sobre una propuesta, usa el siguiente comando:

```shell
rocketpool odao proposals vote
```

Esto te proporcionará un diálogo interactivo preguntando sobre qué propuesta te gustaría votar, y si te gustaría votar a favor o en contra de ella.
Sigue las indicaciones cuidadosamente para completar la votación.

## Ejecutar Propuestas

Cuando una propuesta ha recibido suficientes votos a favor para alcanzar el quórum, cualquier miembro del Oracle DAO puede entonces _ejecutar_ la propuesta (aplicar sus cambios) usando el siguiente comando:

```shell
rocketpool odao proposals execute
```

Esto te proporcionará un diálogo interactivo preguntando qué propuesta te gustaría ejecutar.
Sigue las indicaciones cuidadosamente para completar la ejecución.
