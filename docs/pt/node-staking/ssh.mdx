import { Tab, Tabs } from "@rspress/core/theme";
import powershell from "./images/powershell.png";

# Introdução ao Secure Shell (SSH)

Em geral, existem duas maneiras de acessar sua máquina de nó: **localmente**, e **remotamente**.

- **Localmente** refere-se a sentar-se no nó físico e usar um monitor e teclado conectados diretamente a ele.
- **Remotamente** refere-se a conectar-se ao nó usando um computador diferente (digamos, um laptop ou desktop) por uma rede e interagir com ele de lá.

Na maioria das vezes, os node operators preferem a flexibilidade de trabalhar em seu nó **remotamente**.

O Smartnode atualmente não tem uma GUI (Interface Gráfica do Usuário), apenas uma CLI (Interface de Linha de Comando), o que significa que interagir com ele é feito inteiramente digitando comandos em um terminal de linha de comando.
Como tal, interagir com ele remotamente requer alguma forma de acessar o terminal do seu nó de uma máquina diferente.
Nesta seção, forneceremos uma breve introdução à maneira mais popular de fazer isso: **SSH**.

<div className="p-3">
  <Tabs>
    <Tab label="Usando uma Máquina Windows">
      Existem algumas maneiras diferentes de usar SSH de uma máquina Windows.

      A mais simples é usar o **Powershell**, que é um poderoso terminal de comando que vem integrado nas versões modernas do
      Windows.
      O Powershell tem SSH incluído, então você pode usá-lo imediatamente sem instalar nenhum programa suplementar.

      Você pode encontrá-lo abrindo o menu Iniciar e digitando `Powershell` na barra de pesquisa; haverá várias
      opções, mas a opção que você deseja é simplesmente chamada `Windows Powershell`:

      <img src={powershell} width="100%" height="auto" />

      Isso abrirá um terminal com um fundo azul.
      Você pode usar `ssh` daqui - veja abaixo para instruções sobre como fazer isso.

      Outra ferramenta popular é chamada [PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html).
      PuTTY é um programa especial que inclui um terminal dedicado para uso de SSH, mas também vem com uma GUI conveniente
      para fazer coisas como alterar configurações, salvar configurações em um "perfil", e manter uma lista de máquinas que você
      pode facilmente conectar selecionando de uma lista.

      Em vez de usar `ssh` como você faria com as outras ferramentas, PuTTY fará isso para você automaticamente - tudo que você precisa
      fornecer são o nome de usuário e senha.
      Para informações sobre como usar PuTTY, dê uma olhada [neste ótimo
      tutorial](https://tonyteaches.tech/putty-ssh-windows-tutorial/).

      <p className="rspress-directive warning">
        **NOTA**: PuTTY pode exibir as cores erradas na interface de usuário baseada em texto (TUI) `rocketpool service
        config`.
        Há uma solução fácil para isso. Nas configurações do PuTTY, navegue até **Connection** > **Data** > **Terminal Details**
        no menu suspenso. Deve haver uma caixa de texto **Terminal-type string**. Digite `xterm-256color`, depois salve
        as configurações
        para resolver isso.
      </p>

    </Tab>
    <Tab label="Usando uma Máquina Linux ou macOS">
      Usar SSH de uma máquina Linux ou macOS é trivial; se você já está usando uma delas, então provavelmente já
      interagiu com o terminal em algum momento.
      SSH é integrado diretamente no terminal; use-o executando o comando `ssh`. Por padrão, SSH permitirá que você
      conecte-se à conta de usuário principal do seu nó.
    </Tab>

  </Tabs>
</div>

Aqui está como você se conectaria ao seu nó usando SSH.

:::warning NOTA
Execute o seguinte comando do seu laptop ou desktop, **não do próprio nó**!
:::

```shell
ssh username@node-ip-address
```

Digamos, por exemplo, que o nome de usuário do seu nó é `staker` e o endereço IP do seu nó é `192.168.1.10`.
Você se conectaria a ele com o seguinte comando:

```shell
ssh staker@192.168.1.10
```

A primeira vez que você fizer isso, verá uma mensagem apresentando a chave pública que seu nó está usando - se você está
familiarizado com como verificar esta chave, pode fazer isso agora.
Caso contrário, se você confiar que tem o endereço IP correto do nó em seu comando `ssh`, pode simplesmente dizer `yes` para
aceitá-lo.
Você só precisa fazer isso uma vez.

O cliente solicitará sua senha de usuário; depois de inserir isso, você está dentro!
Você será recebido com uma mensagem de boas-vindas, alguns detalhes sobre sua máquina, e um novo prompt.

Neste ponto, tudo que você digitar no terminal **é executado remotamente na sua máquina de nó** - é como se você
estivesse conectado diretamente à máquina do nó e digitando nela com um teclado conectado localmente!

Você precisará fazer SSH no terminal periodicamente para atualizações e manutenção.
Pode ser inconveniente lembrar como fazer login no seu nó, então pode ser útil encurtar este comando criando um alias memorável - um "atalho" personalizado.

:::warning NOTA
Se você fizer isso, certifique-se de criar o alias na **máquina cliente**, **não** no nó!
Se o seu terminal ainda estiver conectado ao nó, primeiro execute `exit` no prompt de comando (ou simplesmente abra uma nova
janela de terminal).
:::

:::warning NOTA
Esta seção se aplica apenas a usuários Linux/OSX ou WSL - PowerShell não é suportado.
:::

Neste exemplo, criaremos um alias chamado `ethnode` que substituirá o comando SSH.
Assumindo, como antes, que o nome de usuário do seu nó é `staker` e o endereço IP do seu nó é `192.168.1.10`, crie o
alias com o seguinte comando:

```shell
echo "alias ethnode='ssh staker@192.168.1.10'" >> ~/.bash_aliases
```

Recarregue a lista de aliases para tornar sua janela de terminal atual ciente do novo alias:

```shell
source ~/.bash_aliases
```

Agora, você pode conectar-se ao nó usando o alias que acabou de criar em vez do comando mais longo que envolve
especificar o endereço IP do nó:

```shell
ethnode
```
