---
next:
  text: Resgatando um Minipool Dissolvido
  link: "/pt/node-staking/rescue-dissolved"
---

# Encerrar um Minipool

## Saindo do seu Validador

Quando você decidir que não quer mais executar um minipool e quer acessar o saldo total bloqueado na Beacon Chain, você terá que seguir várias etapas:

1. Enviar uma solicitação de saída voluntária para o validador do minipool da Beacon Chain.
2. Aguardar a saída do seu validador.
3. Aguardar que o saldo do seu validador seja retirado para seu minipool na camada de Execução.
4. Fechar o minipool para distribuir as recompensas e acessar os fundos

Vamos cobrir cada etapa abaixo.

### Enviando a Solicitação de Saída

Se você quiser sair do validador anexado a um minipool, execute o seguinte comando:

```shell
rocketpool minipool exit
```

Você receberá uma lista de minipools que podem ser encerrados:

```
Please select a minipool to exit:
1: All available minipools
2: 0x7E5700bcd65B1770bA68abB288D3f53814d376aC (staking since 2023-02-08, 06:33 +0000 UTC)
3: 0xd8E804cFA64ADb386F52DB20717810130c90f674 (staking since 2023-02-08, 06:33 +0000 UTC)
```

Uma vez que você confirme que quer sair, seu nó enviará uma solicitação de saída voluntária para a Beacon Chain.
Esta **não** é uma transação normal da camada de Execução, então você não precisa pagar gas por ela.

Se você precisar da chave pública do validador para o minipool que acabou de sair, você pode recuperá-la usando `rocketpool minipool status`.
Você pode visualizar o status de saída do seu validador em um explorador da Beacon Chain como [https://beaconcha.in](https://beaconcha.in) (ou [https://hoodi.beaconcha.in](https://hoodi.beaconcha.in) para a Hoodi Testnet).
Levará algum tempo para que seu status seja atualizado, mas uma vez que seja, você o verá no estado "exiting":

<img src="./images/exiting.png" width="100%" height="auto" />

Aqui você pode ver que o Status é `Exiting`, a época em que ele sairá está destacada (5224), e o ícone "Exited" estará pulsando verde para indicar que a operação está em andamento.
Pode levar algum tempo para o seu validador sair, _especialmente_ se houver um grande número de validadores saindo da Beacon Chain ao mesmo tempo; o protocolo é projetado para permitir apenas um pequeno número de validadores saírem por época, então você pode ter que esperar sua vez.

Uma vez que sua época de saída tenha passado, seu validador oficialmente sairá da chain e não atestará ou proporá blocos mais.
Você pode confirmar isso nos logs do seu Cliente de Validador, ou no explorador:

<img src="./images/exited.png" width="100%" height="auto" />

O status mudou para `Exited` e há algum texto embaixo que indica sua **época de retirada** (que deve ser 256 épocas após você sair, ou cerca de 27 horas).
Beaconcha.in também convenientemente fornece os timestamps locais para quando seu validador sairá e quando será possível retirá-lo.

Uma vez que tenha entrado no estado **withdrawable**, seu validador será enfileirado pela Beacon Chain para distribuição de recompensas.
Esta fila depende de quantos validadores estão atualmente retirando.
Quando chegar sua vez, a Beacon Chain irá _automaticamente_ enviar seu saldo para o endereço do seu minipool na camada de Execução.
Neste ponto, você pode acessá-lo usando a CLI do Smartnode para fazer uma distribuição.

### Distribuindo Recompensas Completas

::: tip NOTA
Este processo requer que seu validador tenha saído da Beacon Chain e que o saldo do seu validador tenha sido transferido para o contrato do minipool.
Se você precisar de uma atualização sobre como fazer esse processo, consulte a seção [**Saindo do seu Validador**](#saindo-do-seu-validador) acima - volte aqui quando terminar.
:::

Se você saiu do seu validador da Beacon Chain e seu saldo foi depositado no contrato do minipool, você pode retirar com segurança tudo em um comando.
Diferentemente da [distribuição manual](./skimming#manual-distribution), este processo irá realmente **finalizar** seu minipool, o que o fecha e o torna inativo.
Uma vez que seu saldo tenha sido retirado da Beacon Chain e você passe pelo seguinte processo para acessar os fundos, o dever do minipool acabou.

Para recuperar os fundos e fechar o minipool, execute o seguinte comando:

```shell
rocketpool minipool close
```

Isso apresentará uma lista de minipools que são elegíveis para fechamento:

```
Please select a minipool to close:
1: All available minipools
2: 0xd8E804cFA64ADb386F52DB20717810130c90f674 (32.007209 ETH available, 8.002559 ETH is yours plus a refund of 0.000000 ETH)
```

Aqui você pode ver o saldo total para cada minipool elegível, quanto desse saldo será distribuído para você e quanto desse saldo está reservado para você como reembolso (que ignora a distribuição).

Selecione qual minipool você gostaria de distribuir e fechar da lista, confirme a ação e aguarde a validação da sua transação.
Uma vez que isso aconteça, sua parte do saldo do minipool (e seu reembolso) será enviada para seu endereço de retirada, e o minipool entrará no estado `finalized`.

Você pode verificá-lo olhando a transação em um explorador de blocos; por exemplo, veja [a transação para fechar o minipool acima (Goerli Testnet)](https://goerli.etherscan.io/tx/0xe81415b3b66f9b42d43ac17a0983e792725726c9fdd35ac855745bd12a053509).

### Retirando RPL

Neste ponto, seu RPL efetivo será atualizado para remover este minipool do cálculo.
Você agora pode retirar qualquer RPL que você tenha que o colocaria acima do limite de 60% de ETH vinculado.

Para retirar RPL contra o nó, execute o seguinte comando:

```shell
rocketpool node withdraw-rpl
```

::: tip NOTA
Existem duas limitações nas retiradas de RPL:

RPL não pode ser retirado dentro de 28 dias após fazer staking (ou restaking) de RPL. Tenha cuidado se você reivindicar essas recompensas antes de fechar seu minipool, se você refizer o stake de qualquer quantidade de recompensas RPL, você não poderá retirar qualquer quantidade de RPL por 28 dias desde a última ação de staking.

RPL pode ser retirado até 60% do seu ETH total vinculado. Em uma saída completa, isso significa que tudo pode ser retirado; para saídas parciais, planeje com esse limite em mente.
:::

## Uma Nota sobre o Delegado Antigo

O **delegado de minipool original** atribuído a cada minipool desde o lançamento do Rocket Pool até a implantação do Atlas foi construído com duas suposições em mente:

1. A única vez que seu minipool terá um saldo é após o validador ter saído da Beacon Chain.
2. O Oracle DAO mudará o estado do seu minipool de "staking" para "withdrawable" uma vez que o saldo tenha sido transferido da Beacon Chain para o contrato do minipool.

O primeiro ponto claramente não é mais relevante agora que o Ethereum está sendo atualizado para suportar skimming.
O segundo ponto _também_ não é mais verdadeiro, porque o Oracle DAO **não está mais** sinalizando minipools "withdrawable".
Esta foi uma decisão de design intencional para reduzir o poder que o Oracle DAO exerce sobre os operadores de nós Rocket Pool e permitir que eles acessem recompensas sem qualquer requisito suplementar em partes confiáveis.

Devido a essas deficiências, a CLI do Smartnode **não suporta mais** retiradas ou distribuição de fundos no delegado de minipool original.
Se você quiser acessar suas recompensas, você **deve** atualizar para o delegado Atlas que suporta as novas condições de retirada listadas acima.

::: danger PERIGO
Se você é um usuário avançado e ignora a CLI para invocar a funcionalidade de distribuição no contrato diretamente via uma ferramenta de terceiros, esteja ciente das seguintes coisas:

1. A função de distribuição do delegado reverterá se o saldo do minipool estiver **abaixo de 16 ETH**. Saldos abaixo de 16 ETH **não podem ser acessados.**
2. Se o minipool tiver **entre 16 e 32 ETH** em seu saldo, a distribuição pelo delegado original assumirá que seu validador foi **cortado** (slashed). Ele retornará 16 ETH para o pool de staking e dará a você o que sobrar. Ele _somente_ funcionará adequadamente se o saldo do minipool estiver acima de 32 ETH.
3. O minipool nunca entrará no estado `finalized` porque o Oracle DAO nunca o marcará como `withdrawable`, então mesmo que você possa acessar seu ETH, **seu RPL ficará bloqueado** até que você atualize para o delegado Atlas.

Devido a esses pontos, nós **fortemente recomendamos** que você simplesmente atualize para o delegado Atlas em primeiro lugar e evite-os completamente.
:::
