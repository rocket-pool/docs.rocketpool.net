import { Tab, Tabs } from "@rspress/core/theme";

# Migrando da Rede de Teste para a Mainnet

Se você já usou o Rocket Pool em nossa rede de teste Hoodi, está confortável com seus detalhes e está pronto para fazer stake de ETH ou executar um nó de verdade na cadeia principal Ethereum, então este guia é para você!
Aqui você encontrará instruções sobre como migrar uma stack Smartnode existente da rede de teste Hoodi para uma conectada à mainnet Ethereum, pronta para fazer stake do seu próprio ETH e RPL reais.

## Pool Staking na Mainnet

O pool staking é basicamente o mesmo processo na mainnet como era na testnet.
A URL será diferente e o endereço do token rETH pode ser diferente, mas não há mudanças significativas no fluxo de trabalho.
Siga o [Guia de Staking](../../liquid-staking/overview), que foi atualizado com instruções para a mainnet.

### Diferenças Entre a Testnet e a Mainnet

- O Smartnode da testnet tem uma faucet para ETH de teste. O Smartnode da mainnet **não tem uma faucet**. Você precisará fornecer seu próprio ETH para fazer stake.
- A mainnet suporta muitas carteiras Ethereum via WalletConnect, então você pode usar outras carteiras que não podia usar na testnet. **Você não está mais restrito a usar o Metamask para fazer stake**.

## Operação do Smartnode na Mainnet

::: danger NOTA
**Nada** da rede de teste pode ser migrado para a mainnet.
Os dados da cadeia são diferentes tanto para Execution quanto para Consensus, então você deve remover os dados antigos da cadeia e ressincronizar as cadeias da mainnet do zero.
Seus validadores na testnet não são transferidos para a mainnet.
Além disso, por questões de segurança, compatibilidade e segurança, **você deve criar uma nova carteira na mainnet!**
**Não use sua carteira de nó da testnet na mainnet!**

**Os passos a seguir deletarão todos os seus dados da testnet.**
Se você quiser preservar sua configuração da rede de teste, você deve fazer backup do seu disco rígido ou movê-lo para uma segunda máquina.
:::

### Diferenças Entre a Testnet e a Mainnet

- O Smartnode da testnet tem uma faucet para ETH e RPL. O Smartnode da mainnet **não tem uma faucet**. Você precisará fornecer seu próprio ETH e seu próprio RPL.
- Se você está usando Geth, a carga de trabalho do seu nó será **consideravelmente maior**. Geth ocupa aproximadamente 40x o espaço de armazenamento de Hoodi, e requer mais poder de CPU e RAM para processar. Se você está usando o painel Grafana do Rocket Pool, prepare-se para ver um uso muito maior.
  Um nó Geth completo usa 1,4 TB em 2025-09-19. [Expirar dados de blocos anteriores ao merge](../maintenance/history-expiry) pode reduzir o uso de armazenamento em cerca de 300-500 GB.
- Seus peers da Beacon Chain (e assim, sua efetividade de atestação) serão **maiores** do que na testnet. Os peers na mainnet são muito mais diversos e tendem a ser de maior qualidade do que na testnet.
- O checkpoint de recompensas RPL ocorre a cada **28 dias** em vez de a cada 2 dias, para ajudar a compensar os altos custos de gas.
- O preço do RPL usado pela rede Rocket Pool (e assim, seu nível de colateral) junto com o total de RPL em stake efetivo em toda a rede são reportados **uma vez a cada 24 horas** em vez de uma vez por hora.

### Migração Automática (Somente Modo Docker)

Para usuários do Modo Docker, o Smartnode pode migrar para a Mainnet para você automaticamente.

**Enquanto você ainda tem a testnet configurada**, saia de seus validadores no Hoodi:

```
rocketpool minipool exit
```

Selecione `1: All available minipools` da lista de opções e aguarde até completar.
Isso ajudará a limpar a rede removendo seus validadores em vez de deixá-los falhando constantemente atestações e enfraquecendo a saúde do Hoodi (já que eles não estão mais online).

Quando isso estiver feito, abra o Settings Manager:

```
rocketpool service config
```

Em seguida, abra a categoria **Smartnode and TX Fees** e mude o dropdown **Network** de `Hoodi Testnet` para `Ethereum Mainnet`:

<img src="../images/tui-change-network.png" width="100%" height="auto" />

Quando você salvar e sair, você será avisado com uma notificação de que tudo está prestes a ser apagado e um diálogo de confirmação:

```
WARNING: You have requested to change networks.

All of your existing chain data, your node wallet, and your validator keys will be removed.

Please confirm you have backed up everything you want to keep, because it will be deleted if you answer `y` to the prompt below.

Would you like the Smartnode to automatically switch networks for you? This will destroy and rebuild your `data` folder and all of Rocket Pool's Docker containers. [y/n]
```

Faça backup de qualquer coisa que você queira manter (como sua pasta `data` que contém sua carteira de nó e chaves de validador), então pressione `y` e `Enter` quando estiver pronto.
O Smartnode cuidará da troca automaticamente.

Quando terminar, você ficará com uma instalação nova na Mainnet.
Todas as suas configurações (como escolha de cliente) serão preservadas, mas você precisará criar uma nova carteira. Além disso, você provavelmente não terá uma _Checkpoint Sync URL_ na mainnet e deve configurar uma conforme explicado [aqui](../config-docker#beacon-chain-checkpoint-syncing); caso contrário, levará muito tempo para sincronizar a beacon chain da mainnet.

### Migrando Manualmente

Se por algum motivo você não puder aproveitar o processo de migração automática do Smartnode, você pode fazê-lo manualmente em alguns passos simples:

<div className="p-3">
  <Tabs>
    <Tab label="Docker">
      1. **Enquanto você ainda tem a testnet configurada**, saia de seus validadores no Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Selecione `1: All available minipools` da lista de opções e aguarde até completar.
      Isso ajudará a limpar a rede removendo seus validadores em vez de deixá-los falhando constantemente atestações e enfraquecendo a saúde do Hoodi (já que eles não estão mais online).

      2. Desligue a testnet:

      ```shell
      rocketpool service stop
      ```

      3. Delete seus dados da cadeia da testnet e contêineres Docker:

      ```shell
      rocketpool service terminate
      ```

      4. Delete sua pasta de configuração do Rocket Pool:

      ```shell
      sudo rm -rf ~/.rocketpool
      ```

      5. (Opcional) Delete seu CLI do Rocket Pool:

      ```shell
      rm ~/bin/rocketpool
      ```
      Você vai sobrescrever isso com a versão mais recente do CLI de qualquer forma, mas se você quiser ser minucioso, pode remover o antigo primeiro.

      Neste ponto sua instalação da testnet foi purgada, e você pode migrar com segurança para uma nova instalação da mainnet.
      Siga o guia [Criando Nó com Docker](../docker) cuidadosamente para configurá-lo.
    </Tab>
    <Tab label="Native Mode">
      1. **Enquanto você ainda tem a testnet configurada**, saia de seus validadores no Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Selecione `1: All available minipools` da lista de opções e aguarde até completar.
      Isso ajudará a limpar a rede removendo seus validadores em vez de deixá-los falhando constantemente atestações e enfraquecendo a saúde do Hoodi (já que eles não estão mais online).

      2. Pare todos os serviços do Rocket Pool e Ethereum (usando, por exemplo, `geth` e `lighthouse`; substitua pelos serviços que você criou durante a instalação):

      ```shell
      sudo systemctl stop rp-node rp-watchtower geth lh-bn lh-vc
      ```

      3. Delete todos os dados da cadeia da testnet (por exemplo, usando `geth` e `lighthouse` no x64; substitua pela sua própria configuração):

      ```shell
      sudo rm -rf /srv/geth/geth_data
      sudo rm -rf /srv/lighthouse/lighthouse_data
      ```

      4. Delete a pasta de configuração do Rocket Pool:

      ```shell
      sudo rm -rf /srv/rocketpool
      ```

      5. (Opcional) Remova os binários do CLI e Daemon do Rocket Pool:
      ```shell
      sudo rm /usr/local/bin/rocketpool /usr/local/bin/rocketpoold
      ```
      Você vai sobrescrever estes com as versões mais recentes de qualquer forma, mas se você quiser ser minucioso, pode remover os antigos primeiro.

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTA</p>
        Por uma questão de simplicidade, estas instruções _não incluem_ alguns passos como remover os usuários `eth1` e `eth2`, ou remover os serviços que você parou anteriormente.
        Você pode reutilizá-los e ignorar os passos envolvidos em configurá-los no guia de instalação.

        Você precisará refazer alguns dos passos de instalação incluindo:

        - Criar a pasta `/srv/rocketpool` e seu framework esqueleto, e definir as permissões adequadamente
        - Obter as versões mais recentes dos binários dos clientes Execution e Consensus, e Validador
        - Definir a **string `ExecStart`** nos serviços (**use a configuração da mainnet definida no guia de instalação!)**
        - Obter os binários mais recentes do CLI e Daemon
            - Obter os arquivos de configuração mais recentes do arquivo do instalador, colocá-los em `/srv/rocketpool`, e ajustá-los para corresponder à configuração do seu nó
      </p>

      Neste ponto você está pronto para migrar seguindo o [guia de instalação nativa](../native).
    </Tab>

  </Tabs>
</div>
