import { Tab, Tabs } from "@rspress/core/theme";
import mmNetwork from "./images/mm_network.png";
import mmNetworkMain from "./images/mm_network_main.png";

# Fazer stake de ETH em nome do nó

O RPIP-32 permite que uma conta [faça stake de ETH em nome](https://rpips.rocketpool.net/RPIPs/RPIP-32) de um nó Rocket Pool registrado no protocolo. Isso suporta diversas situações onde o operador do nó não está fornecendo diretamente o ETH:

- Segurança aprimorada para operadores de nós, pois podem fazer stake diretamente de sua carteira de hardware, eliminando a necessidade de transferir fundos para o nó antecipadamente.
- Provedores de Staking como Serviço onde a custódia dos fundos é gerenciada por um custodiante confiável.
- Integrações de protocolo onde a custódia dos fundos é gerenciada por contratos inteligentes.
- DAOs ou organizações onde a custódia dos fundos é gerenciada por um tesouro.

Embora o objetivo principal deste recurso seja facilitar cenários de depositante único, vale notar que vários depositantes independentes também podem aproveitar essa capacidade criando contratos inteligentes em camadas por cima. O Rocket Pool também introduziu a capacidade de [fazer stake de RPL em nome](../../node-staking/create-validator#whitelisting-an-address-to-stake-on-behalf) de um nó em nosso lançamento anterior Atlas.

### Pré-requisito

Certifique-se de ter configurado corretamente o [endereço de retirada primário](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) do nó que você pretende financiar. Siga o link acima para um guia sobre como os endereços de retirada funcionam pós-houston.

::: tip NOTA
Não pule esta etapa! Todo ETH de vínculo/recompensas será retirado para o endereço de retirada primário. Em outras palavras, o endereço que fornece ETH para um nó deve ser usado como o endereço de retirada primário! Por favor, certifique-se de que o endereço de retirada primário do nó esteja definido para uma carteira que você tenha custódia.
:::

O processo é ligeiramente diferente para a Hoodi Testnet e Mainnet, então escolha a rede de seu interesse nas abas abaixo.

<div className="p-3">
  <Tabs>
    <Tab label="Preparando na Hoodi Testnet">

      <p className="rspress-directive danger">
        <p className="rspress-directive-title">AVISO</p>
        Ao praticar stake na rede de teste, você **não precisa fornecer nenhum de seu ETH real** durante este processo.
        Você receberá **ETH de teste falso** para usar.

        **Não tente mover seu ETH real da mainnet para a testnet ou você o perderá permanentemente!**
      </p>

      Comece instalando o [MetaMask](https://metamask.io/) se você ainda não o fez.
      Siga as instruções no site deles para instalar a extensão, criar uma conta e fazer login.

      Em seguida, abra o painel MetaMask usando seu ícone na barra de ferramentas do navegador.

      Você precisará adicionar a Hoodi Testnet ao MetaMask.

      Clique no menu suspenso superior esquerdo e clique no botão "Add Network".

      Você verá uma lista de redes, Hoodi não está nesta lista, então clique no botão "Add a network manually".

      Preencha os seguintes detalhes:

      ```
      Network Name: Hoodi
      New RPC Url: https://rpc.hoodi.ethpandaops.io
      Chain ID: 560048
      Currency Symbol: ETH
      Block Explorer Url: https://hoodi.etherscan.io
      ```

      Em seguida, clique em Save. Você deve ver agora a rede Hoodi no menu suspenso superior esquerdo.

      Clique no **menu suspenso de rede** no canto superior esquerdo da extensão Metamask e selecione **Hoodi Test Network**:

      <img src={mmNetwork} width="100%" height="auto"/>

      Agora que você tem um endereço de carteira no MetaMask, você precisa preenchê-lo com algum ETH de teste.
      Vá para a página [Praticando com a Rede de Teste](../../node-staking/testnet/overview#getting-test-eth-on-hoodi) para um guia rápido sobre como usar uma faucet de testnet para obter algum ETH de teste na Hoodi.

      Depois de ter algum ETH Hoodi para testar, vá para [https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node](https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node).

      Se você ver um aviso sobre um navegador web3 sendo necessário, ou o ID da rede atual não sendo suportado, certifique-se de ter completado as etapas anteriores corretamente antes de continuar.
    </Tab>
    <Tab label="Preparando na Ethereum Mainnet">
      Comece instalando o [MetaMask](https://metamask.io/) se você ainda não o fez.

      Siga as instruções no site deles para instalar a extensão, criar uma conta e fazer login.

      Em seguida, abra o painel MetaMask usando seu ícone na barra de ferramentas do navegador.

      Clique no **menu suspenso de rede** na barra de ferramentas na parte superior e certifique-se de que **Ethereum Mainnet** esteja selecionado:

      <img src={mmNetworkMain} width="100%" height="auto"/>

      Agora que você tem um endereço de carteira no MetaMask, você precisa transferir algum ETH para ele.

      Você precisará fornecer isso de uma carteira existente ou comprar ETH em uma exchange.

      Depois de ter algum ETH para fazer stake, vá para [https://node.rocketpool.net/deposit-eth-on-behalf-of-node](https://node.rocketpool.net/deposit-eth-on-behalf-of-node).

      Se você ver um aviso sobre um navegador web3 sendo necessário, ou o ID da rede atual não sendo suportado, certifique-se de ter completado as etapas anteriores corretamente antes de continuar.
    </Tab>

  </Tabs>
</div>

Uma vez no site, clique no botão **connect wallet**. Por favor, leia e aceite os Termos de Serviço e Política de Privacidade, isso habilitará diferentes formas de conectar, então clique em **connect metamask**.

O MetaMask solicitará que você selecione uma conta para conectar ao site.
Escolha uma, confirme algumas permissões. Você verá uma visão geral de seus saldos clicando no ícone da carteira localizado no canto superior direito da janela.

A partir daqui, você desejará inserir o endereço do nó para o qual gostaria de depositar ETH em nome de. A página deve parecer assim:

<img src="./images/enter_node_address.png" width="100%" height="auto" />

Vá em frente e cole seu endereço desejado nesta caixa e clique em find. Neste exemplo, usaremos `0xd3e317806456102d19db283b4c2201f0ef41a296`

<img src="./images/eth_on_behalf.png" width="100%" height="auto" />

Na primeira caixa, insira a quantidade de ETH que você gostaria de depositar em nome do nó. A segunda caixa indica para qual endereço você estará depositando ETH em nome de. Por favor, certifique-se de ter inserido o endereço e depósito corretos. Quando estiver satisfeito, clique em Deposit e o MetaMask abrirá uma janela pedindo para você confirmar sua transação.

Depois de confirmá-la, a transação começará.
Quando for incluída em um bloco e adicionada à cadeia, seu delegado poderá usar o comando `rocketpool node status` no smartnode para ver o novo saldo. Este saldo também pode ser visualizado através do site de staking do Rocket Pool.

```
The node has 0.000000 ETH in its credit balance and 8.000000 ETH staked on its behalf. 8.000000 can be used to make new minipools.
```

::: warning NOTA
Se um operador de nó depositar seu ETH em um minipool, você não poderá sair de seu minipool sem acesso às suas credenciais de retirada, então tenha isso em mente! Você pode usar o site de staking do Rocket Pool para retirar ETH feito stake em nome de um nó se não estiver sendo usado em um minipool.
:::

É isso!
Você está agora fazendo staking com o Rocket Pool.

# Retirar ETH feito stake em nome do nó

<div className="p-3">
  <Tabs>
    <Tab label="Preparando na Hoodi Testnet">
      Quando estiver pronto para retirar o ETH que você fez stake em nome de um nó, vá para [https://testnet.node.rocketpool.net/withdraw-eth](https://testnet.node.rocketpool.net/withdraw-eth). Depois
      de fazer login como o [endereço de retirada primário](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) do nó, você deve ser recebido com um menu familiar. Será solicitado
      que você insira o endereço do nó do qual deseja retirar:
    </Tab>
    <Tab label="Preparando na Ethereum Mainnet">
      Quando estiver pronto para retirar o ETH que você fez stake em nome de um nó, vá para [https://node.rocketpool.net/withdraw-eth](https://node.rocketpool.net/withdraw-eth). Depois de fazer login
      como o [endereço de retirada primário](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) do nó, você deve ser recebido com um menu familiar. Será solicitado que você
      insira o endereço do nó do qual deseja retirar:
    </Tab>
  </Tabs>
</div>

<img src="./images/enter_node_address.png" width="100%" height="auto" />

Depois de inserir um endereço, clicar em "Find" levará você ao próximo menu onde você pode retirar o ETH que fez stake em nome daquele nó.

<img src="./images/withdraw_eth_on_behalf.png" width="100%" height="auto" />

Você poderá ver quanto ETH está disponível para retirada no canto superior direito. Depois de inserir a quantidade desejada e confirmar o endereço do nó, clique no botão laranja **Withdraw ETH** para enviar a transação para a rede.

Uma vez que a transação seja confirmada, você verá os saldos adequados em sua conta!

Isso é tudo o que há para fazer stake de ETH em nome de um nó! Esperamos que você tenha achado o processo rápido e fácil.

Sinta-se à vontade para visitar [nosso servidor Discord](https://discord.gg/G46XgK264a) para nos dizer o que você achou e acompanhar o projeto à medida que ele evolui.
