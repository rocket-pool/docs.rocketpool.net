import { Tab, Tabs } from "@rspress/core/theme";

# Propostas do Oracle DAO

Como lembrete, existem dois tipos de tarefas do Oracle DAO:

1. **Tarefas automatizadas** - estas são tarefas relacionadas à operação rotineira do Rocket Pool, como transferir informações da Camada de Consensus para a Camada de Execution, calcular vários aspectos do protocolo off-chain e submetê-los como atualizações para os Smart Contracts. Cada uma delas é realizada automaticamente pelo processo daemon `watchtower` e não requer intervenção manual, desde que seus Clientes Execution e Consensus, e seu daemon `watchtower`, estejam todos operando normalmente. Você já configurou o daemon `watchtower` nos passos anteriores, então esta seção não irá abordá-los novamente.
2. **Tarefas manuais** - estas são tarefas que requerem sua própria tomada de decisão e comunicação fora da banda com o resto do Oracle DAO para realizar. Elas incluem coisas como votar em atualizações de contratos, mudar parâmetros e convidar ou expulsar membros de/para o Oracle DAO. Todas podem ser feitas via CLI padrão do Smartnode. Esta seção descreve cada uma dessas tarefas e como realizá-las.

As propostas formam o núcleo de suas responsabilidades fora das tarefas automatizadas da `watchtower`.
Essencialmente, elas funcionam da seguinte forma:

- O Oracle DAO coletivo deve discutir uma proposta futura extensivamente com antecedência, para que cada membro esteja ciente dela e entenda o que essa proposta implicará.
- Um membro do Oracle DAO então cria a proposta via uma transação on-chain.
- A proposta então entrará em um **período de espera** antes que a votação possa começar para ter mais discussão e formar sua opinião sobre ela. Atualmente é **7 dias** na Mainnet.
- Após o período de espera terminar, os membros podem votar na proposta via um voto simples de sim ou não.
- Quando um quórum de 51% dos membros do Oracle DAO votou da mesma forma, o voto é concluído. Se 51% concordaram com a proposta, ela poderá ser **executada**. Qualquer membro pode executar a proposta uma vez que seja aprovada.
- Execução refere-se a acionar formalmente a mudança on-chain, modificando assim o estado dos contratos principais do Rocket Pool.

## Fazendo uma Proposta

Uma vez que você faz uma proposta, ela entrará em um **período de revisão** onde os outros membros podem vê-la e discuti-la, mas não poderão votar nela.
No momento desta escrita, atualmente são **7 dias**.

Após o período de revisão, haverá um **período de votação** onde os membros podem votar a favor da proposta ou contra ela.
No momento desta escrita, atualmente são **14 dias**.

Se a proposta alcançar quórum antes de expirar (ou seja, se membros suficientes votarem a favor dela para alcançar consenso), ela será **aprovada**.
Quórum é um parâmetro configurável pelo Oracle DAO; atualmente está definido em pelo menos **51%** do pool total de membros.

Uma vez que um voto é aprovado, pode ser **executado** o que faz com que suas mudanças entrem em vigor.
No momento desta escrita, a execução é **14 dias** após a proposta ter sido aprovada.

O processo para fazer uma nova proposta depende do tipo de proposta que você quer fazer.
Selecione um tipo das abas abaixo.

<div className="p-3">
  <Tabs>
    <Tab label="Lista de Membros do Oracle DAO">
      Para propor modificar a lista de membros do Oracle DAO, use o comando `rocketpool odao propose member` que
      fornece as seguintes opções:

      ```
      NAME:
      rocketpool odao propose member - Make an oracle DAO member proposal

      USAGE:
      rocketpool odao propose member command [command options] [arguments...]

      COMMANDS:
      invite, i Propose inviting a new member
      leave, l Propose leaving the oracle DAO
      kick, k Propose kicking a member

      OPTIONS:
      --help, -h show help
      ```

      #### invite

      Convidar um membro é feito via `rocketpool odao propose member invite` que receberá 3 argumentos adicionais:

      - O endereço do node a convidar (deve ser um node Rocket Pool registrado)
      - O nome / rótulo para este node
      - A URL ou informação de contato para o usuário ou organização que executa o node

      Por exemplo: para convidar um novo membro, execute `rocketpool odao propose member invite
      0xabcd1234abcd1234abcd1234abcd1234abcd1234 some-user user@example.com`.

      #### kick

      Expulsar um membro do Oracle DAO é feito via o comando `rocketpool odao propose member kick`.
      Ele pedirá que você selecione qual membro você quer expulsar e emita uma multa opcional (de 0 RPL até o
      valor de RPL vinculado, atualmente 1750 RPL).
      Esta multa, se fornecida, queimará parte (ou todo) do bond de RPL do membro se o Oracle DAO votar para expulsar aquele
      membro.

      #### leave

      Se você gostaria de voluntariamente renunciar do Oracle DAO, use o comando `rocketpool odao propose member leave`.
      Isso criará uma nova proposta para que os outros membros possam votar se aprovam ou não sua renúncia.
    </Tab>
    <Tab label="Parâmetros do Oracle DAO">
      Para propor modificar os parâmetros que governam como os votos do Oracle DAO e modificação de membros funcionam, use o
      comando `rocketpool odao propose setting` que fornece as seguintes opções:

      ```
      NAME:
      rocketpool odao propose setting - Make an oracle DAO setting proposal

      USAGE:
      rocketpool odao propose setting command [command options] [arguments...]

      COMMANDS:
      members-quorum, q Propose updating the members.quorum setting - takes a percent, from 0 to 100
      members-rplbond, b Propose updating the members.rplbond setting - takes an RPL amount (e.g. 5000)
      proposal-cooldown, c Propose updating the proposal.cooldown.time setting - format is e.g. 1h30m45s
      proposal-vote-timespan, v Propose updating the proposal.vote.time setting - format is e.g. 1h30m45s
      proposal-vote-delay-timespan, d Propose updating the proposal.vote.delay.time setting - format is e.g. 1h30m45s
      proposal-execute-timespan, x Propose updating the proposal.execute.time setting - format is e.g. 1h30m45s
      proposal-action-timespan, a Propose updating the proposal.action.time setting - format is e.g. 1h30m45s
      scrub-period, s Propose updating the minipool.scrub.period setting - format is e.g. 1h30m45s

      OPTIONS:
      --help, -h show help
      ```

      #### members-quorum

      Usar `rocketpool odao propose setting members-quorum value` mudará o quórum necessário para as tarefas do Oracle DAO
      antes de serem consideradas canonizadas.
      `value` aqui pode ser um número de ponto flutuante entre 0 e 100, indicando a porcentagem de membros necessários para alcançar
      quórum nos votos do Oracle DAO.

      ::: warning NOTA
      Note que isso **não** afeta o quórum necessário para tarefas automatizadas como submissão de preço RPL e saldo rETH; essas configurações são controladas pelo Protocol DAO (pDAO), _não_ pelo Oracle DAO.
      :::

      #### members-rplbond

      Use `rocketpool odao propose setting members-rplbond value` para mudar a quantidade de RPL necessária como bond para novos
      membros convidados para o Oracle DAO.
      Por exemplo, inserir `5000` para `value` definirá o bond em 5000 RPL.
      Note que isso não afeta membros que já existem; afeta apenas novos membros convidados após a mudança.

      #### proposal-cooldown

      Use `rocketpool odao propose setting proposal-cooldown value` para mudar o tempo de cooldown que um membro deve esperar
      entre submeter propostas.

      `value` é uma duração de tempo formatada como string, como `1h30m45s` para uma hora, trinta minutos e quarenta e cinco
      segundos.
      Não aceita dias; para vários dias, simplesmente use o número total de horas.

      #### proposal-vote-timespan

      Use `rocketpool odao propose setting proposal-vote-timespan value` para mudar quanto tempo um voto pode existir antes de
      expirar.

      `value` é uma duração de tempo formatada como string, como `1h30m45s` para uma hora, trinta minutos e quarenta e cinco
      segundos.
      Não aceita dias; para vários dias, simplesmente use o número total de horas.

      #### proposal-vote-delay-timespan

      Use `rocketpool odao propose setting proposal-vote-delay-timespan value` para mudar quanto tempo o Oracle DAO deve
      esperar antes de poder votar em uma nova proposta.

      `value` é uma duração de tempo formatada como string, como `1h30m45s` para uma hora, trinta minutos e quarenta e cinco
      segundos.
      Não aceita dias; para vários dias, simplesmente use o número total de horas.

      #### proposal-execute-timespan

      Use `rocketpool odao propose setting proposal-execute-timespan value` para mudar quanto tempo o Oracle DAO tem para
      executar (efetivar) uma proposta após ser aprovada.
      Se nenhum dos membros executar a proposta durante esta janela, ela expirará e a proposta se tornará
      inválida.

      `value` é uma duração de tempo formatada como string, como `1h30m45s` para uma hora, trinta minutos e quarenta e cinco
      segundos.
      Não aceita dias; para vários dias, simplesmente use o número total de horas.

      #### proposal-action-timespan

      Certas propostas requerem ações secundárias após serem executadas para terminarem de entrar em vigor (como
      convidar um membro para entrar, então eles realmente entrando).
      Use `rocketpool odao propose setting proposal-action-timespan `value`` para mudar quanto tempo esta ação secundária pode
      ser executada após a proposta ser executada.
      O usuário não poderá realizar esta ação _após_ esta janela; se a ação não for realizada a tempo, a proposta
      é essencialmente inválida.

      `value` é uma duração de tempo formatada como string, como `1h30m45s` para uma hora, trinta minutos e quarenta e cinco
      segundos.
      Não aceita dias; para vários dias, simplesmente use o número total de horas.

      #### scrub-period

      Use `rocketpool odao propose setting scrub-period value` para mudar quanto tempo o "período de scrub" dura (o tempo
      entre um novo minipool entrar no status `prelaunch` e entrar no status `staking`).
      O Oracle DAO tem esse tempo para verificar novos minipools quanto ao [exploit de credenciais de
      retirada](https://github.com/rocket-pool/rocketpool-research/blob/master/Reports/withdrawal-creds-exploit) e
      fazer scrub neles se o exploit for detectado, garantindo assim que fundos rETH não sejam roubados.
      Esta tarefa é realizada automaticamente pelo daemon `watchtower`.
      Como a verificação geralmente é feita em questão de minutos, este valor é simplesmente projetado para atuar como um buffer de seguro
      no caso de que o Oracle DAO não possa chegar a consenso devido a falha de node; os membros têm esse tempo para
      resolver o problema e alcançar o quórum para fazer scrub em um minipool exploitado.

      `value` é uma duração de tempo formatada como string, como `1h30m45s` para uma hora, trinta minutos e quarenta e cinco
      segundos.
      Não aceita dias; para vários dias, simplesmente use o número total de horas.
    </Tab>
    <Tab label="Atualizações de Contrato">
      Atualizações de contrato estão atualmente fora do escopo da CLI.
      As transações devem ser submetidas manualmente; por favor consulte a equipe Rocket Pool se você gostaria de aprender como
      propor uma atualização de contrato para a rede.
    </Tab>

  </Tabs>
</div>

## Visualizando Propostas

Para ver um resumo breve de todas as propostas na história do protocolo, use `rocketpool odao proposals list`.
Isso classificará as propostas por seu status e mostrará quem a propôs e o que ela faz.

Para ver os detalhes de uma proposta específica, use `rocketpool odao proposals details value` onde `value` é o ID da proposta que você gostaria de ver.
Isso mostrará um detalhamento abrangente das informações da proposta incluindo quem a criou, quando foi criada, o corpo da carga, quantos membros votaram a favor dela, quantos membros votaram contra ela, e se o seu node já votou nela ou não.

## Votando em Propostas

Para votar em uma proposta, use o seguinte comando:

```shell
rocketpool odao proposals vote
```

Isso fornecerá um diálogo interativo perguntando em qual proposta você gostaria de votar, e se você gostaria de votar a favor dela ou contra ela.
Siga os prompts cuidadosamente para completar o voto.

## Executando Propostas

Quando uma proposta recebeu votos suficientes a favor dela para alcançar quórum, qualquer membro do Oracle DAO pode então _executar_ a proposta (aplicar suas mudanças) usando o seguinte comando:

```shell
rocketpool odao proposals execute
```

Isso fornecerá um diálogo interativo perguntando qual proposta você gostaria de executar.
Siga os prompts cuidadosamente para completar a execução.
