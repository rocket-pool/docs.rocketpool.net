# 准备 Raspberry Pi

::: warning 注意
此页面已保留在此处用于存档目的。由于运行 Ethereum 验证器的硬件和性能要求增加，我们不再建议在 Raspberry Pi 上运行 Rocket Pool。
:::

本指南将引导您了解如何使用 Raspberry Pi 运行 Rocket Pool 节点。
虽然在大多数质押指南中通常不建议这样做，但我们认识到这很有吸引力，因为它是一个比建立整个 PC 更实惠的选择。
为此，我们努力调整和优化一系列设置，并确定了一个似乎运行良好的配置。

此设置将在 Pi 上运行**完整的执行节点**和**完整的共识节点**，使您的系统为 Ethereum 网络的健康做出贡献，同时充当 Rocket Pool 节点运营商。

## 初步设置

要在 Raspberry Pi 上运行 Rocket Pool 节点，您首先需要有一个正常工作的 Raspberry Pi。
如果您已经有一个正在运行的 - 太好了！您可以跳到[挂载 SSD](#挂载-ssd)部分。
在继续之前，请确保您已**安装了风扇**。
如果您从头开始，那么请继续阅读。

### 您需要什么

以下是在 Pi 上运行 Rocket Pool 需要购买的推荐组件：

- **Raspberry Pi 4 Model B**，**8 GB 型号**
  - 注意：虽然您_可以_使用此设置使用 4 GB，但我们强烈建议您使用 8 GB 以获得安心……它真的不贵多少。
- Pi 的 **USB-C 电源**。您需要一个提供**至少 3 安培**的电源。
- **MicroSD 卡**。它不必很大，16 GB 就足够了，现在它们非常便宜……但它应该至少是 **Class 10 (U1)**。
- PC 的 **MicroSD 到 USB** 适配器。这是必需的，以便您可以在将其加载到 Pi 之前将操作系统安装到卡上。
  如果您的 PC 已经有 SD 端口，那么您不需要购买新端口。
- 一些**散热片**。您将在重负载下 24/7 运行 Pi，它会变热。
  散热片将有所帮助，这样它就不会限制自己。您理想情况下需要一套 3 个：一个用于 CPU，一个用于 RAM，一个用于 USB 控制器。
  [这是一个很好的示例](https://www.canakit.com/raspberry-pi-4-heat-sinks.html)。
- **机箱**。这里有两种方式：带风扇和无风扇。
  - 带风扇：
    - 40mm **风扇**。与上述相同，目标是在运行 Rocket Pool 节点时保持凉爽。
    - 带有**风扇支架的机箱**以将所有内容固定在一起。
      您也可以获得一个带有集成风扇的机箱[像这样](https://www.amazon.com/Raspberry-Armor-Metal-Aluminium-Heatsink/dp/B07VWM4J4L)，这样您就不必单独购买风扇。
  - 无风扇：
    - 充当一个巨大散热片的**无风扇机箱**，例如[这个](https://www.amazon.com/Akasa-RA08-M1B-Raspberry-case-Aluminium/dp/B081VYVNTX)。
      这是一个不错的选择，因为它很安静，但您的 Pi **会**变得相当热 - 特别是在初始区块链同步过程中。
      感谢 Discord 用户 Ken 为我们指明了这个方向！
  - 作为一般规则，我们建议**使用风扇**，因为我们将大幅超频 Pi。

为了方便起见，您可以将很多东西捆绑在一起 - 例如，[Canakit 提供一个套件](https://www.amazon.com/CanaKit-Raspberry-8GB-Starter-Kit/dp/B08956GVXN)，其中包含许多组件。
但是，如果您单独获取部件，您可能能够更便宜地获得所有部件（如果您有设备，您可以[3D 打印自己的 Pi 机箱](https://www.thingiverse.com/thing:3793664)。）

您还需要其他组件：

- **USB 3.0+ 固态硬盘**。一般建议使用 **2 TB 驱动器**。
  - [Samsung T5](https://www.amazon.com/Samsung-T5-Portable-SSD-MU-PA2T0B/dp/B073H4GPLQ) 是一个已知运行良好的优秀示例。
  - :warning: 由于[这样的问题](https://www.raspberrypi.org/forums/viewtopic.php?f=28&t=245931)，**不建议**使用带有 SATA 到 USB 适配器的 SATA SSD。
    如果您走这条路，我们在[测试 SSD 性能](#测试-ssd-性能)部分中包含了一个性能测试，您可以使用它来检查它是否有效。
- 用于互联网访问的**以太网电缆**。它应该至少是 **Cat 5e** 级别。
  - **不建议**通过 Wi-Fi 运行节点，但如果您没有其他选择，可以使用它而不是使用以太网电缆。
- **UPS** 作为电源，如果您失去电力。
  Pi 实际上并不消耗太多电力，因此即使是小型 UPS 也会持续一段时间，但通常越大越好。选择您能负担得起的最大的 UPS。
  此外，我们建议您也**将调制解调器、路由器和其他网络设备**连接到它 - 如果您的路由器死了，保持 Pi 活着没有多大意义。

根据您的位置、销售、您选择的 SSD 和 UPS 以及您已经拥有的这些东西的数量，您可能最终会为完整的设置花费**约 200 到 500 美元**。

### 让风扇运行更安静

当您获得风扇时，默认情况下，您可能会被指示将其连接到 5v GPIO 引脚，如下图所示。
风扇将有一个带有两个孔的连接器；黑色的应该连接到 GND（引脚 6），红色的应该连接到 +5v（引脚 4）。
![](./images/pi/Pinout.png)

但是，根据我们的经验，这会使风扇运行非常响亮和快速，这实际上不是必需的。
如果您想让它更安静同时仍然保持凉爽，请尝试将其连接到 3.3v 引脚（引脚 1，蓝色）而不是 5v 引脚。
这意味着在您的风扇上，黑点仍将连接到 GND（引脚 6），但现在红点将连接到 +3.3v（引脚 1）。

如果您的风扇有一个连接器，其中两个孔并排，并且您无法将它们分开，则可以在它和 Pi 上的 GPIO 引脚之间放置[像这样的跳线](https://www.amazon.com/GenBasic-Female-Solderless-Breadboard-Prototyping/dp/B077N7J6C4)。

### 安装操作系统

有几种支持 Raspberry Pi 的 Linux 操作系统变体。
对于本指南，我们将坚持使用 **Ubuntu 20.04**。
Ubuntu 是一个经过验证的操作系统，在世界各地使用，20.04 是（在撰写本文时）长期支持 (LTS) 版本中的最新版本，这意味着它将继续获得安全补丁很长时间。
如果您更愿意坚持使用不同版本的 Linux，例如 Raspbian，请随意遵循现有的安装指南 - 只需记住本指南是为 Ubuntu 构建的，因此并非所有说明都可能与您的操作系统匹配。

Canonical 的优秀人员编写了[一个关于如何在 Pi 上安装 Ubuntu Server 镜像的精彩指南](https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi#1-overview)。

对于服务器设置，请遵循上述指南的**步骤 1 到 4**。
对于操作系统镜像，您需要选择 `Ubuntu Server 20.04.2 LTS (RPi 3/4/400) 64-bit server OS with long-term support for arm64 architectures`。

如果您决定要桌面 UI（以便您可以使用鼠标并拖动窗口），您还需要遵循步骤 5。
我们建议您不要这样做，只坚持使用服务器镜像，因为桌面 UI 会在 Pi 上增加一些额外的开销和处理工作，收益相对较小。
但是，如果您决心运行桌面，那么我们建议选择 Xubuntu 选项。
它对资源的要求很轻，并且非常用户友好。

完成后，您就可以开始准备 Ubuntu 以运行 Rocket Pool 节点了。
您可以在其上使用本地终端，或者您可以按照安装指南的建议从台式机/笔记本电脑通过 SSH 登录。
无论哪种方式，过程都是相同的，因此请做对您最方便的事情。

如果您不熟悉 `ssh`，请查看[安全外壳简介](../ssh)指南。

::: warning 注意
此时，您应该_强烈考虑_配置路由器以使 Pi 的 IP 地址**静态**。
这意味着您的 Pi 将永远拥有相同的 IP 地址，因此您始终可以使用该 IP 地址通过 SSH 登录。
否则，您的 Pi 的 IP 可能会在某个时候更改，并且上面的 SSH 命令将不再有效。
您必须进入路由器的配置以找出 Pi 的新 IP 地址是什么。

每个路由器都不同，因此您需要查阅路由器的文档以了解如何分配静态 IP 地址。
:::

## 挂载 SSD

如您所知，在遵循上述安装说明后,核心操作系统将在 microSD 卡上运行。
这对于容纳所有执行和共识区块链数据来说既不够大也不够快，这就是 SSD 的用武之地。
要使用它，我们必须为其设置文件系统并将其挂载到 Pi。

### 将 SSD 连接到 USB 3.0 端口

首先将您的 SSD 插入 Pi 的 USB 3.0 端口之一。这些是**蓝色**端口，而不是黑色端口：

![](./images/pi/USB.png)

黑色的是慢速 USB 2.0 端口；它们只适用于鼠标和键盘等配件。
如果您的键盘插入蓝色端口，请将其取出并立即插入黑色端口。

_[其余的 SSD 格式化、挂载、性能测试、交换空间设置和超频部分已保留但未在此处完全翻译，因为这是存档内容]_

## 下一步

有了这个，您的 Pi 已启动并运行，可以运行 Rocket Pool！
继续到[选择您的 ETH 客户端](../eth-clients)部分。
