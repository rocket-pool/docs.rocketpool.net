import { Tab, Tabs } from "@rspress/core/theme";

# 通过Layer 2去中心化交易所质押

提醒一下,你不必通过Rocket Pool直接将ETH兑换为rETH来享受去中心化质押的好处。
你只需要持有rETH,它的价值就会自然增长 - 你如何获得它并不重要!

话虽如此,主要关注点之一(尤其是近期)是与质押或将ETH兑换为rETH相关的gas成本。

为了帮助降低这一成本,Ethereum网络已经开始采用[rollups](https://www.youtube.com/watch?v=7pWxCklcNsU)的使用 - 也称为**Layer 2**。

Layer 2由多个独立网络组成,这些网络位于Ethereum之下,像Ethereum通常那样执行大量交易,但将所有交易汇总到一个"超级"交易中,然后将_该交易_发布到主Ethereum链上。
理想情况下,这意味着你可以获得与Ethereum去中心化特性相关的所有安全优势,但享受**更低的gas费用**,因为Layer 2上的执行和存储成本可以低得多,并且只有一部分交易必须存储在状态更昂贵的Layer 1上。

Rocket Pool目前支持两个Layer 2网络:[Optimism](https://www.optimism.io/)和[Arbitrum](https://arbitrum.io/)。
它们都运行着[Uniswap](https://docs.uniswap.org/protocol/introduction)的版本,这是使用最广泛的去中心化交易协议。
使用Uniswap,你可以快速轻松地将ETH兑换为rETH。

使用这种方法的优势是**gas费用将大大低于**其他方法。
如果这对你很重要,因为你想质押少量ETH,那么使用Layer 2网络可能是你的首选。

缺点是你可能无法获得rETH的最佳价格。
Uniswap需要向其流动性提供者支付一小笔费用,而大额交易需要大型流动性池才能在没有太多价格影响的情况下获得好价格。
Layer 2网络往往比主Ethereum网络拥有更低的rETH流动性。

因此,我们建议你比较在Layer 2网络上获得的rETH总量与通过其他方法获得的数量,以确定是否有意义选择此路径。

您可以查看 [Optimism 池](https://info.uniswap.org/#/optimism/pools/0xaefc1edaede6adadcdf3bb344577d45a80b19582) 和 [Arbitrum 池](https://info.uniswap.org/#/arbitrum/pools/0xaac7de2b91293ba1791503d9127d2bdf2159db65) 的当前 ETH 和 rETH 余额,以确定它们是否有足够的 rETH 来覆盖您的兑换。

在以下示例中,我们将演示如何与 Layer 2 网络交互并使用 Uniswap 将 ETH 兑换为 rETH。

::: warning 注意
目前这种方法仅在主网上可用。
如果您想在 Hoodi 测试网上练习,您必须[直接与 Rocket Pool 进行兑换](./via-rp)。

**本指南的其余部分将假设您在主网上。**
:::

这个过程可以使用任何兼容 web3 的钱包完成。
出于演示目的,我们将使用 [MetaMask](https://metamask.io/),因为它是较受欢迎的钱包选择之一。

**如果您选择使用不同的钱包,您应该能够按照类似的步骤进行操作——只需在每一步中找到钱包中的可比功能。**

## 在主网上设置 MetaMask

首先,如果您还没有安装 [MetaMask](https://metamask.io/),请先安装。
按照他们网站上的说明安装扩展程序、创建帐户并登录。

接下来,使用浏览器工具栏中的图标打开 MetaMask 面板。
单击顶部工具栏中的**网络下拉菜单**,并确保选择了 **Ethereum Mainnet**:

<img src="./images/mm_network_main.png" width="100%" height="auto" />

正下方的地址是您的 **Ethereum 钱包地址**。

在继续之前,您需要向该钱包提供 ETH。
如果您之前没有在该帐户中使用过 ETH,您可以通过将 ETH 从现有帐户转移到该钱包地址来完成此操作。

## 通过 Hop 将 ETH 从 Layer 1 转移到 Layer 2

有几种方法可以将 ETH 从 Ethereum 主网桥接到 Layer 2 网络。
在这个演示中,我们将使用 [Hop](https://docs.hop.exchange/faq) 协议——一种简单可靠的方式,可以将 ETH(以及其他一些币)从 Layer 1 转移到几个 Layer 2 网络,或者在 Layer 2 网络之间转移。

导航到 Hop 交易所网站:

[https://app.hop.exchange/send?token=ETH](https://app.hop.exchange/send?token=ETH)

主屏幕应该如下所示:

<img src="./images/hop.png" width="100%" height="auto" />

首先单击右上角的 **Connect a Wallet** 按钮。
您将看到一个屏幕,询问您想使用哪个钱包提供商。
对于此示例,选择 **MetaMask**。

::: tip 注意
如果您不使用 MetaMask,其他提供商之一(如 WalletConnect)可能会与您的钱包兼容。
:::

单击该按钮后,MetaMask 将弹出一个提示,要求您选择要使用的帐户。
假设您只有一个帐户,您的帐户应该已经被选中。
单击 **Next**。

然后它会询问您是否愿意让 Hop 访问查看您帐户的地址:

<img src="./images/hop_connect.png" width="100%" height="auto" />

单击 **Connect**,短暂暂停后,您的钱包将连接到 Hop。
您现在应该在屏幕右上角看到其 ETH 余额。

现在,您可以使用 **From** 和 **To (estimated)** 框中的两个下拉菜单选择您的网络,并在 **From** 框中输入您想发送的 ETH 数量。

例如,这是将 0.1 ETH 从 Layer 1 发送到 Arbitrum 的样子:

<img src="./images/hop_send.png" width="100%" height="auto" />

::: warning 注意
提醒一下,Uniswap(因此 Rocket Pool staking)**目前仅在 Optimism 和 Arbitrum 上受支持**。
您必须选择其中一个网络。
:::

准备好后,单击 **Send** 按钮。
Metamask 将弹出一个确认对话框,显示与交易相关的 gas 费用:

<img src="./images/hop_confirm.png" width="100%" height="auto" />

如果您对这些 gas 费用感到满意,请单击 **Confirm** 开始交易。
片刻之后,MetaMask 将弹出一个成功的交易确认消息,您的 ETH 现在将在您选择的 Layer 2 网络上可用!

## 在 Layer 2 上连接到 Uniswap

现在您的钱包已设置并充值,请转到此 URL,它将打开 Uniswap 并自动显示将 ETH 兑换为 rETH:

[https://app.uniswap.org/#/swap?inputCurrency=eth](https://app.uniswap.org/#/swap?inputCurrency=eth)

该页面最初将如下所示:

<img src="./images/uni_connect.png" width="100%" height="auto" />

单击其中一个 `Connect Wallet` 按钮,例如右上角突出显示的那个。
您将看到一个屏幕,询问您想使用哪个钱包提供商。
对于此示例,选择 **MetaMask**。

::: tip 注意
如果您不使用 MetaMask,其他提供商之一(如 WalletConnect)可能会与您的钱包兼容。
:::

单击该按钮后,MetaMask 将弹出另一个提示,要求您选择要使用的帐户,就像它在 Hop 中所做的那样。
保持您的帐户被选中,单击 **Next**,然后像之前在 Hop 中那样单击 **Connect**。
短暂暂停后,您的钱包将连接到 Uniswap。
您现在应该在屏幕右上角看到其 ETH 余额。

首先要做的是将您的网络从 Ethereum 主网更改为您刚刚交换到的 Layer 2。
单击屏幕右上角的网络下拉菜单(此处以红色突出显示):

<img src="./images/uni_network.png" width="100%" height="auto" />

一旦您这样做,MetaMask 将提示您确认要添加自定义网络:

<img src="./images/uni_net_confirm.png" width="100%" height="auto" />

单击 **Approve**,然后单击 **Switch Network**。
这将更改 MetaMask,使其使用新的 Layer 2 网络而不是 Ethereum 主网进行交易。

::: warning 注意
在使用 MetaMask 进行任何交易之前,_始终_通过打开 MetaMask 并查看顶部的网络下拉菜单来验证它当前使用的是哪个网络!
很容易意外切换到不同的网络并忘记!
:::

## 将 rETH 添加到 MetaMask

下一步是将 rETH 代币添加到 MetaMask,以便您可以看到您的余额并访问它进行交易。
单击 **Assets** 选项卡,然后单击 **Add Token**:

<img src="./images/mm_add_token.png" width="100%" height="auto" />

确保在此对话框中选择了 **Custom Token**,并在下方选择您选择的 Layer 2 网络的相应选项卡:

<div className="p-3">
  <Tabs>
    <Tab label="Optimism">
      在 **Token Contract Address** 框中,输入以下值:

      ```shell
      0x9bcef72be871e61ed4fbbc7630889bee758eb81d
      ```

      **Token Symbol** 应自动填充为 `rETH`,**Decimals of Precision** 应自动填充为 `18`。

      接受其余提示,然后您将看到 rETH 代币出现在您的列表中。
    </Tab>
    <Tab label="Arbitrum">
      在 **Token Contract Address** 框中,输入以下值:

      ```shell
      0xec70dcb4a1efa46b8f2d97c310c9c4790ba5ffa8
      ```

      **Token Symbol** 应自动填充为 `rETH`,**Decimals of Precision** 应自动填充为 `18`。

      接受其余提示,然后您将看到 rETH 代币出现在您的列表中。
    </Tab>

  </Tabs>
</div>

## 使用 Uniswap 将 ETH 兑换为 rETH

流程的最后一步是进行兑换!

单击 **Select a token** 下拉菜单,并输入您刚刚添加到 MetaMask 的 rETH 地址(您也可以只输入 rETH,但**确保它是正确的代币而不是冒充或诈骗代币**,首先验证其地址)。

::: warning 注意
您可能最初会看到如下警告:

<img src="./images/unknown_token.jpg" width="100%" height="auto" />

这只是一个临时警告,直到 Uniswap 将 rETH 添加到您正在使用的 Layer 上的规范代币列表中。
只要代币地址在 Optimism 上是 `0x9bcef72be871e61ed4fbbc7630889bee758eb81d` 或在 Arbitrum 上是 `0xec70dcb4a1efa46b8f2d97c310c9c4790ba5ffa8`,您就可以安全地添加它。
:::

接下来,输入您想兑换的 ETH 数量,Uniswap 的 UI 将显示您将收到的 rETH 数量:

<img src="./images/arb_swap.png" width="100%" height="auto" />

::: warning 注意
请注意,您收到的 rETH 数量将**少于**您投入的 ETH 数量。
这是正常的,因为 **rETH 比 ETH 更有价值**并且随着时间的推移持续增值。
您可以在截图底部突出显示的汇率中看到这一点。
:::

现在单击 **Swap** 查看交易的详细信息,包括由于滑点您可能收到的最小金额。
如果您满意,请单击 **Confirm Swap**。
这将向 MetaMask 发送请求,您可以在其中查看总交易成本,然后再确认:

<img src="./images/arb_gas.png" width="100%" height="auto" />

::: tip 注意
**密切关注**此处估计的 gas 费用。
您可能会注意到,在 Layer 2 网络上进行此兑换的 gas 费用**大约便宜 10 倍**,相比在 Ethereum 主网上!
:::

如果您对相对于您将收到的 rETH 总量的 gas 费用感到满意,请单击 **Confirm** 提交交易。
短暂时间后,您应该会看到 MetaMask 的通知,表明交易成功完成,您现在将在钱包中看到 rETH 代币。

就是这样!您现在正在使用 Rocket Pool 进行 staking。您只需持有 rETH,就会随着 rETH 代币价值的增加自动获得 staking 奖励。
