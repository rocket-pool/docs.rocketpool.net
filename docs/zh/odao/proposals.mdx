import { Tab, Tabs } from "@rspress/core/theme";

# Oracle DAO提案

提醒一下,Oracle DAO职责有两种类型:

1. **自动职责** - 这些是与日常Rocket Pool操作相关的职责,例如将信息从共识层传输到执行层,离链计算协议的各个方面,并将它们作为更新提交给智能合约。这些中的每一个都由`watchtower`守护进程自动执行,只要您的执行和共识客户端以及您的`watchtower`守护进程都正常运行,就不需要手动干预。您已经在前面的步骤中设置了`watchtower`守护进程,因此本节不会再次介绍它们。
2. **手动职责** - 这些是需要您自己的决策和与Oracle DAO其他成员的带外通信才能执行的职责。它们包括诸如对合约升级进行投票、更改参数以及邀请或踢出Oracle DAO成员等事项。这些都可以通过标准的Smartnode CLI完成。本节描述了这些职责中的每一个以及如何执行它们。

提案构成了您在自动`watchtower`职责之外的核心责任。
本质上,它们的工作方式如下:

- 集体Oracle DAO应该提前广泛讨论即将到来的提案,以便每个成员都知道它并理解该提案将涉及什么。
- 然后,Oracle DAO成员通过链上交易创建提案。
- 然后提案将进入**等待期**,在投票开始之前进行进一步讨论并形成对它的意见。目前在主网上这是**7天**。
- 等待期结束后,成员可以通过简单的是或否投票对提案进行投票。
- 当51%的Oracle DAO成员的法定人数以相同的方式投票时,投票结束。如果51%同意该提案,它将能够被**执行**。任何成员都可以在提案被批准后执行该提案。
- 执行是指正式触发链上的更改,从而修改核心Rocket Pool合约的状态。

## 提出提案

一旦您提出提案,它将进入**审查期**,其他成员可以看到它并讨论它,但无法对其进行投票。
在撰写本文时,目前这是**7天**。

审查期结束后,将有一个**投票期**,成员可以投票支持或反对该提案。
在撰写本文时,目前这是**14天**。

如果提案在到期之前达到法定人数(即,如果有足够的成员投票支持它以达成共识),它将被**通过**。
法定人数是Oracle DAO的可配置参数;目前设置为至少总成员池的**51%**。

一旦投票通过,它可以被**执行**,这导致其更改生效。
在撰写本文时,执行期是提案通过后的**14天**。

提出新提案的过程取决于您想提出的提案类型。
从下面的选项卡中选择一种类型。

<div className="p-3">
  <Tabs>
    <Tab label="Oracle DAO成员列表">
      要提议修改Oracle DAO成员列表,请使用`rocketpool odao propose member`命令,该命令
      提供以下选项:

      ```
      NAME:
      rocketpool odao propose member - Make an oracle DAO member proposal

      USAGE:
      rocketpool odao propose member command [command options] [arguments...]

      COMMANDS:
      invite, i Propose inviting a new member
      leave, l Propose leaving the oracle DAO
      kick, k Propose kicking a member

      OPTIONS:
      --help, -h show help
      ```

      #### invite

      邀请成员通过`rocketpool odao propose member invite`完成,它将接受3个额外的参数:

      - 要邀请的节点地址(必须是注册的Rocket Pool节点)
      - 此节点的名称/标签
      - 运行节点的用户或组织的URL或联系信息

      例如:要邀请新成员,运行`rocketpool odao propose member invite
      0xabcd1234abcd1234abcd1234abcd1234abcd1234 some-user user@example.com`。

      #### kick

      将成员踢出Oracle DAO通过`rocketpool odao propose member kick`命令完成。
      它将要求您选择要踢出的成员,并发出可选的罚款(从0 RPL到绑定的
      RPL金额,目前为1750 RPL)。
      如果提供了此罚款,如果Oracle DAO投票踢出该成员,将燃烧该成员的部分(或全部)RPL保证金。

      #### leave

      如果您想自愿从Oracle DAO辞职,请使用`rocketpool odao propose member leave`
      命令。
      这将创建一个新提案,以便其他成员可以投票是否批准您的辞职。
    </Tab>
    <Tab label="Oracle DAO参数">
      要提议修改管理Oracle DAO投票和成员资格修改工作方式的参数,请使用
      `rocketpool odao propose setting`命令,该命令提供以下选项:

      ```
      NAME:
      rocketpool odao propose setting - Make an oracle DAO setting proposal

      USAGE:
      rocketpool odao propose setting command [command options] [arguments...]

      COMMANDS:
      members-quorum, q Propose updating the members.quorum setting - takes a percent, from 0 to 100
      members-rplbond, b Propose updating the members.rplbond setting - takes an RPL amount (e.g. 5000)
      proposal-cooldown, c Propose updating the proposal.cooldown.time setting - format is e.g. 1h30m45s
      proposal-vote-timespan, v Propose updating the proposal.vote.time setting - format is e.g. 1h30m45s
      proposal-vote-delay-timespan, d Propose updating the proposal.vote.delay.time setting - format is e.g. 1h30m45s
      proposal-execute-timespan, x Propose updating the proposal.execute.time setting - format is e.g. 1h30m45s
      proposal-action-timespan, a Propose updating the proposal.action.time setting - format is e.g. 1h30m45s
      scrub-period, s Propose updating the minipool.scrub.period setting - format is e.g. 1h30m45s

      OPTIONS:
      --help, -h show help
      ```

      #### members-quorum

      使用`rocketpool odao propose setting members-quorum value`将更改Oracle DAO的
      职责所需的法定人数,在它们被认为是规范化之前。
      这里的`value`可以是0到100之间的浮点数,表示在Oracle DAO投票中达到
      法定人数所需的成员百分比。

      ::: warning 注意
      请注意,这**不**影响自动职责所需的法定人数,例如RPL价格和rETH余额
      提交;这些设置由协议DAO(pDAO)控制,_而不是_Oracle DAO。
      :::

      #### members-rplbond

      使用`rocketpool odao propose setting members-rplbond value`来更改新成员
      被邀请加入Oracle DAO所需的RPL保证金金额。
      例如,为`value`输入`5000`将将保证金设置为5000 RPL。
      请注意,这不会影响已经存在的成员;它只影响更改后被邀请的新成员。

      #### proposal-cooldown

      使用`rocketpool odao propose setting proposal-cooldown value`来更改成员在
      提交提案之间必须等待的冷却时间。

      `value`是字符串格式的时间持续时间,例如`1h30m45s`表示一小时三十分钟四十五
      秒。
      它不接受天数;对于多天,只需使用总小时数。

      #### proposal-vote-timespan

      使用`rocketpool odao propose setting proposal-vote-timespan value`来更改投票在
      到期之前可以存在多长时间。

      `value`是字符串格式的时间持续时间,例如`1h30m45s`表示一小时三十分钟四十五
      秒。
      它不接受天数;对于多天,只需使用总小时数。

      #### proposal-vote-delay-timespan

      使用`rocketpool odao propose setting proposal-vote-delay-timespan value`来更改Oracle DAO在
      能够对新提案进行投票之前必须等待多长时间。

      `value`是字符串格式的时间持续时间,例如`1h30m45s`表示一小时三十分钟四十五
      秒。
      它不接受天数;对于多天,只需使用总小时数。

      #### proposal-execute-timespan

      使用`rocketpool odao propose setting proposal-execute-timespan value`来更改Oracle DAO在
      提案被批准后必须执行(颁布)提案的时间。
      如果没有成员在此窗口期间执行提案,它将到期,提案将变为
      无效。

      `value`是字符串格式的时间持续时间,例如`1h30m45s`表示一小时三十分钟四十五
      秒。
      它不接受天数;对于多天,只需使用总小时数。

      #### proposal-action-timespan

      某些提案在执行后需要次要操作才能完成生效(例如
      邀请成员加入,然后他们实际加入)。
      使用`rocketpool odao propose setting proposal-action-timespan `value``来更改在提案执行后
      能够运行此次要操作的时间。
      用户将无法在此窗口_之后_采取此操作;如果操作没有及时采取,提案
      本质上是无效的。

      `value`是字符串格式的时间持续时间,例如`1h30m45s`表示一小时三十分钟四十五
      秒。
      它不接受天数;对于多天,只需使用总小时数。

      #### scrub-period

      使用`rocketpool odao propose setting scrub-period value`来更改"scrub期"持续的时间
      (新minipool进入`prelaunch`状态和进入`staking`状态之间的时间)。
      Oracle DAO有这么长的时间来检查新的minipool是否存在[提款凭证
      漏洞](https://github.com/rocket-pool/rocketpool-research/blob/master/Reports/withdrawal-creds-exploit)并
      如果检测到漏洞则scrub它们,从而确保rETH资金不会被盗。
      此职责由`watchtower`守护进程自动执行。
      由于检查通常在几分钟内完成,此值只是设计为在
      Oracle DAO由于节点故障而无法达成共识的情况下作为保险缓冲;成员有这么长的时间来
      解决问题并在scrub被利用的minipool上达到法定人数。

      `value`是字符串格式的时间持续时间,例如`1h30m45s`表示一小时三十分钟四十五
      秒。
      它不接受天数;对于多天,只需使用总小时数。
    </Tab>
    <Tab label="合约升级">
      合约升级目前不在CLI的范围内。
      必须手动提交交易;如果您想了解如何
      向网络提议合约升级,请咨询Rocket Pool团队。
    </Tab>

  </Tabs>
</div>

## 查看提案

要查看协议历史上所有提案的简要摘要,请使用`rocketpool odao proposals list`。
这将按状态对提案进行排序,并显示是谁提出的以及它做什么。

要查看特定提案的详细信息,请使用`rocketpool odao proposals details value`,其中`value`是您想查看的提案的ID。
这将显示提案信息的全面细分,包括谁创建了它,它是什么时候创建的,有效负载主体,有多少成员投票支持它,有多少成员投票反对它,以及您的节点是否已对其进行投票。

## 对提案投票

要对提案投票,请使用以下命令:

```shell
rocketpool odao proposals vote
```

这将为您提供一个交互式对话框,询问您想对哪个提案进行投票,以及您是想投票支持还是反对它。
仔细按照提示完成投票。

## 执行提案

当提案收到足够的支持票以达到法定人数时,Oracle DAO的任何成员都可以*执行*提案(应用其更改),使用以下命令:

```shell
rocketpool odao proposals execute
```

这将为您提供一个交互式对话框,询问您想执行哪个提案。
仔细按照提示完成执行。
