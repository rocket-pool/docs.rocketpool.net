import { Tab, Tabs } from "@rspress/core/theme";
import mmNetwork from "./images/mm_network.png";
import mmNetworkMain from "./images/mm_network_main.png";

# Staker de l'ETH au nom d'un nœud

RPIP-32 permet à un compte de [staker de l'ETH au nom](https://rpips.rocketpool.net/RPIPs/RPIP-32) d'un nœud Rocket Pool enregistré dans le protocole. Cela prend en charge diverses situations où l'opérateur de nœud ne fournit pas directement l'ETH :

- Sécurité améliorée pour les opérateurs de nœuds, car ils peuvent staker directement depuis leur portefeuille matériel, éliminant le besoin de transférer des fonds vers le nœud au préalable.
- Fournisseurs de Staking en tant que Service où la garde des fonds est gérée par un dépositaire de confiance.
- Intégrations protocolaires où la garde des fonds est gérée par des contrats intelligents.
- DAO ou organisations où la garde des fonds est gérée par une trésorerie.

Bien que l'objectif principal de cette fonctionnalité soit de faciliter les scénarios à déposant unique, il convient de noter que plusieurs déposants indépendants peuvent également tirer parti de cette capacité en créant des contrats intelligents superposés. Rocket Pool a également introduit la possibilité de [staker du RPL au nom](../../node-staking/create-validator#whitelisting-an-address-to-stake-on-behalf) d'un nœud lors de notre précédente version Atlas.

### Prérequis

Assurez-vous d'avoir correctement configuré l'[adresse de retrait principale](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) du nœud que vous avez l'intention de financer. Suivez le lien ci-dessus pour un guide sur le fonctionnement des adresses de retrait après Houston.

::: tip NOTE
Ne sautez pas cette étape ! Tous les bonds ETH/récompenses seront retirés vers l'adresse de retrait principale. En d'autres termes, l'adresse qui fournit l'ETH pour un nœud doit être utilisée comme adresse de retrait principale ! Veuillez vous assurer que l'adresse de retrait principale du nœud est définie sur un portefeuille que vous contrôlez.
:::

Le processus est légèrement différent pour le Hoodi Testnet et le Mainnet, alors choisissez le réseau qui vous intéresse dans les onglets ci-dessous.

<div className="p-3">
  <Tabs>
    <Tab label="Préparation sur le Hoodi Testnet">

      <p className="rspress-directive danger">
        <p className="rspress-directive-title">AVERTISSEMENT</p>
        Lors de la pratique du staking sur le réseau de test, vous **n'avez pas besoin de fournir votre véritable ETH** pendant ce processus.
        Vous recevrez **de faux ETH de test** à utiliser à la place.

        **N'essayez pas de déplacer votre véritable ETH du mainnet vers le testnet ou vous le perdrez définitivement !**
      </p>

      Commencez par installer [MetaMask](https://metamask.io/) si ce n'est pas déjà fait.
      Suivez les instructions sur leur site pour installer l'extension, créer un compte et vous connecter.

      Ensuite, ouvrez le panneau MetaMask en utilisant son icône dans la barre d'outils de votre navigateur.

      Vous devrez ajouter le Hoodi Testnet à MetaMask.

      Cliquez sur le menu déroulant en haut à gauche et cliquez sur le bouton "Add Network".

      Vous verrez une liste de réseaux, Hoodi n'est pas dans cette liste, alors cliquez sur le bouton "Add a network manually".

      Remplissez les détails suivants :

      ```
      Network Name: Hoodi
      New RPC Url: https://rpc.hoodi.ethpandaops.io
      Chain ID: 560048
      Currency Symbol: ETH
      Block Explorer Url: https://hoodi.etherscan.io
      ```

      Cliquez ensuite sur Enregistrer. Vous devriez maintenant voir le réseau Hoodi dans le menu déroulant en haut à gauche.

      Cliquez sur le **menu déroulant du réseau** en haut à gauche de l'extension Metamask et sélectionnez **Hoodi Test Network** :

      <img src={mmNetwork} width="100%" height="auto"/>

      Maintenant que vous avez une adresse de portefeuille dans MetaMask, vous devez la remplir avec des ETH de test.
      Rendez-vous sur la page [Pratiquer avec le réseau de test](../../node-staking/testnet/overview#getting-test-eth-on-hoodi) pour un guide rapide sur l'utilisation d'un faucet de testnet pour obtenir des ETH de test sur Hoodi.

      Une fois que vous avez des ETH Hoodi pour tester, rendez-vous sur [https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node](https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node).

      Si vous voyez un avis concernant la nécessité d'un navigateur web3, ou que l'ID de réseau actuel n'est pas pris en charge, assurez-vous d'avoir correctement terminé les étapes précédentes avant de continuer.
    </Tab>
    <Tab label="Préparation sur le Ethereum Mainnet">
      Commencez par installer [MetaMask](https://metamask.io/) si ce n'est pas déjà fait.

      Suivez les instructions sur leur site pour installer l'extension, créer un compte et vous connecter.

      Ensuite, ouvrez le panneau MetaMask en utilisant son icône dans la barre d'outils de votre navigateur.

      Cliquez sur le **menu déroulant du réseau** dans la barre d'outils en haut et assurez-vous que **Ethereum Mainnet** est sélectionné :

      <img src={mmNetworkMain} width="100%" height="auto"/>

      Maintenant que vous avez une adresse de portefeuille dans MetaMask, vous devez y transférer de l'ETH.

      Vous devrez fournir cela depuis un portefeuille existant ou acheter de l'ETH sur une plateforme d'échange.

      Une fois que vous avez de l'ETH à staker, rendez-vous sur [https://node.rocketpool.net/deposit-eth-on-behalf-of-node](https://node.rocketpool.net/deposit-eth-on-behalf-of-node).

      Si vous voyez un avis concernant la nécessité d'un navigateur web3, ou que l'ID de réseau actuel n'est pas pris en charge, assurez-vous d'avoir correctement terminé les étapes précédentes avant de continuer.
    </Tab>

  </Tabs>
</div>

Une fois sur le site, cliquez sur le bouton **connect wallet**. Veuillez lire et accepter les Conditions d'utilisation et la Politique de confidentialité, cela activera différentes méthodes de connexion, puis cliquez sur **connect metamask**.

MetaMask vous invitera à sélectionner un compte à connecter au site Web.
Choisissez-en un, confirmez quelques autorisations. Vous verrez un aperçu de vos soldes en cliquant sur l'icône de portefeuille située en haut à droite de la fenêtre.

À partir de là, vous voudrez entrer l'adresse du nœud pour lequel vous souhaitez déposer de l'ETH au nom. La page devrait ressembler à ceci :

<img src="./images/enter_node_address.png" width="100%" height="auto" />

Allez-y et collez votre adresse souhaitée dans cette case et cliquez sur find. Dans cet exemple, nous utiliserons `0xd3e317806456102d19db283b4c2201f0ef41a296`

<img src="./images/eth_on_behalf.png" width="100%" height="auto" />

Dans la première case, entrez le montant d'ETH que vous souhaitez déposer au nom du nœud. La deuxième case indique pour quelle adresse vous déposerez de l'ETH. Veuillez vous assurer que vous avez entré la bonne adresse et le bon dépôt. Une fois satisfait, cliquez sur Deposit et MetaMask affichera une fenêtre vous demandant de confirmer votre transaction.

Une fois que vous l'avez confirmé, la transaction commencera.
Lorsqu'elle a été incluse dans un bloc et ajoutée à la chaîne, votre délégué pourra utiliser la commande `rocketpool node status` dans smartnode pour voir le nouveau solde. Ce solde peut également être consulté via le site de staking Rocket Pool.

```
The node has 0.000000 ETH in its credit balance and 8.000000 ETH staked on its behalf. 8.000000 can be used to make new minipools.
```

::: warning NOTE
Si un opérateur de nœud dépose votre ETH dans un minipool, vous ne pourrez pas quitter leur minipool sans accès à leurs identifiants de retrait, alors gardez cela à l'esprit ! Vous pouvez utiliser le site de staking Rocket Pool pour retirer l'ETH staké au nom d'un nœud s'il n'est pas utilisé dans un minipool.
:::

C'est tout !
Vous stakez maintenant avec Rocket Pool.

# Retirer l'ETH staké au nom d'un nœud

<div className="p-3">
  <Tabs>
    <Tab label="Préparation sur le Hoodi Testnet">
      Lorsque vous êtes prêt à retirer l'ETH que vous avez staké au nom d'un nœud, rendez-vous sur [https://testnet.node.rocketpool.net/withdraw-eth](https://testnet.node.rocketpool.net/withdraw-eth). Après
      vous être connecté en tant qu'[adresse de retrait principale](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) du nœud, vous devriez être accueilli par un menu familier. Il vous sera demandé d'entrer
      l'adresse du nœud depuis lequel vous souhaitez retirer :
    </Tab>
    <Tab label="Préparation sur le Ethereum Mainnet">
      Lorsque vous êtes prêt à retirer l'ETH que vous avez staké au nom d'un nœud, rendez-vous sur [https://node.rocketpool.net/withdraw-eth](https://node.rocketpool.net/withdraw-eth). Après vous être connecté en tant qu'
      [adresse de retrait principale](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) du nœud, vous devriez être accueilli par un menu familier. Il vous sera demandé d'entrer l'adresse
      du nœud depuis lequel vous souhaitez retirer :
    </Tab>
  </Tabs>
</div>

<img src="./images/enter_node_address.png" width="100%" height="auto" />

Après avoir entré une adresse, cliquer sur "Find" vous amènera au menu suivant où vous pourrez retirer l'ETH que vous avez staké au nom de ce nœud.

<img src="./images/withdraw_eth_on_behalf.png" width="100%" height="auto" />

Vous pourrez voir combien d'ETH est disponible pour le retrait en haut à droite. Après avoir saisi la quantité souhaitée et confirmé l'adresse du nœud, cliquez sur le bouton orange **Withdraw ETH** pour envoyer la transaction au réseau.

Une fois la transaction confirmée, vous verrez les soldes appropriés dans votre compte !

C'est tout ce qu'il y a à faire pour staker de l'ETH au nom d'un nœud ! Nous espérons que vous avez trouvé le processus rapide et facile.

N'hésitez pas à passer sur [notre serveur Discord](https://discord.gg/G46XgK264a) pour nous faire savoir ce que vous en avez pensé et suivre l'évolution du projet.
