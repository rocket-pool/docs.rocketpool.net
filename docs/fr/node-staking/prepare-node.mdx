import { Tab, Tabs } from "@rspress/core/theme";
import nodeAddress from "./images/nodeaddress.png";
import rplWithdrawalConfirmation from "./images/rpl_withdrawal_confirmation.png";

# Préparation de votre Nœud pour l'Exploitation

Si vous êtes ici, vous avez réussi à démarrer les services Smartnode, créé un portefeuille et terminé la synchronisation des chaînes d'exécution et de consensus sur vos clients respectifs.
Si c'est le cas, vous êtes prêt à enregistrer votre nœud sur le réseau Rocket Pool et à créer un megapool avec un validateur !
Sinon, veuillez revoir les sections précédentes et revenir ici une fois ces étapes terminées.

Avant de créer un megapool et un nouveau validateur, il y a quelques étapes à franchir pour terminer la préparation de votre nœud.
Celles-ci ne doivent être effectuées qu'une seule fois ; une fois que vous les avez faites, vous pouvez passer à la section [Créer un validateur Megapool](/fr/node-staking/megapools/create-megapool-validator) si vous souhaitez créer plusieurs validateurs sur votre nœud.

## Chargement de votre Portefeuille de Nœud

L'enregistrement de votre nœud et la mise en place d'un validateur impliquent tous deux de soumettre des transactions au réseau Ethereum à partir de votre portefeuille de nœud.
Cela signifie que **vous devrez avoir de l'ETH dessus** pour payer les frais de gaz de ces transactions.
Si vous souhaitez staker du RPL, vous pouvez le faire directement sur le nœud, ou (de préférence) vous pouvez utiliser la fonction **Stake on Behalf** du site Web Rocket Pool pour staker pour votre nœud avec du RPL dans votre portefeuille froid.
Nous discuterons de la fonction Stake on Behalf plus tard dans ce guide lorsqu'il sera temps de staker votre RPL.


::: tip NOTE
L'ETH requis pour les frais de gaz pour configurer un nœud avec un minipool est d'environ 0,0025 ETH multiplié par le prix actuel du gaz en gwei.
Par exemple, avec un prix du gaz de 30 gwei, vous paieriez environ 0,075 ETH en frais de gaz.

Consultez [cette feuille de calcul](https://docs.google.com/spreadsheets/d/1loB9U8wCIJn73a1DsR-mJJ9PQaYWMlF9asNc7BgM_zc/edit#gid=1413609552https://docs.google.com/spreadsheets/d/1loB9U8wCIJn73a1DsR-mJJ9PQaYWMlF9asNc7BgM_zc/edit#gid=1413609552) pour aider à estimer les frais de gaz pour diverses conditions de réseau.
:::

<div className="p-3">
  <Tabs>
    <Tab label="Running on the Hoodi Test Network">
      Si vous exécutez le réseau de test Hoodi, veuillez consulter la section [Pratique avec le Réseau de Test](/fr/node-staking/testnet/overview) pour apprendre comment acquérir de l'ETH de test.

      Pour le RPL de test, nous avons ajouté une fonction de robinet similaire directement dans la CLI.
      Veuillez consulter le guide [Obtenir du RPL de Test sur Hoodi](/fr/node-staking/testnet/overview#getting-test-rpl-on-hoodi) pour en acquérir.
    </Tab>
    <Tab label="Running on the Main Network">
      Nous supposons que vous avez déjà un portefeuille séparé compatible Ethereum qui contient votre ETH.
      Si vous avez besoin de RPL, vous pouvez l'acheter sur un échange centralisé tel que [Kraken](https://www.kraken.com/prices/rocket-pool?quote=usd) ou un échange décentralisé tel que [Balancer](https://app.balancer.fi/#/trade/ether/0xD33526068D116cE69F19A9ee46F0bd304F21A51f).

      Commencez par transférer de l'ETH de votre portefeuille existant vers le portefeuille de nœud.
      Si vous exécutez sur Mainnet, **laissez votre RPL sur le portefeuille que vous avez utilisé pour l'acheter.**

      Pour rappel, vous pouvez utiliser `rocketpool wallet status` pour obtenir l'adresse du portefeuille de nœud si vous en avez besoin.
      Si vous ne savez pas comment envoyer de la cryptomonnaie depuis votre portefeuille existant, veuillez consulter la documentation de votre portefeuille.

      <p className="rspress-directive danger">
        <p className="rspress-directive-title">WARNING</p>
        L'envoi de cryptomonnaie entre portefeuilles est une opération non réversible !
        Si vous entrez la mauvaise adresse de destinataire, **il n'y a aucun moyen de récupérer vos jetons**.
        Nous vous recommandons d'envoyer d'abord une petite quantité d'ETH comme **transaction de test** pour vérifier que vous avez correctement entré l'adresse du portefeuille de nœud, puis de **mettre sur liste blanche** cette adresse dans votre autre portefeuille, si possible, pour éviter de la mal saisir.
      </p>
    </Tab>

  </Tabs>
</div>

## Enregistrement de votre Nœud sur le Réseau

Une fois que vous avez de l'ETH dans votre portefeuille, vous pouvez enregistrer votre nœud sur le réseau Rocket Pool pour accéder à toutes ses fonctionnalités.
Pour ce faire, exécutez la commande suivante :

```shell
rocketpool node register
```

Cela vous demandera le fuseau horaire avec lequel vous souhaitez vous enregistrer.
Par défaut, cela détectera le fuseau horaire de votre horloge système, mais vous pouvez le changer si vous préférez.
Tout fuseau horaire au format `Pays/Ville` [répertorié sur cette page](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones) devrait être acceptable.

::: tip NOTE
Le fuseau horaire est uniquement utilisé pour la carte mondiale des opérateurs de nœuds affichée sur le site principal.
Vous n'avez pas besoin de le définir sur votre fuseau horaire réel si vous avez des préoccupations de sécurité.
Si vous préférez rester anonyme, utilisez une option générique telle que `Etc/UTC`.
:::

Une fois cela terminé, vous serez officiellement membre du réseau Rocket Pool !

## Définition de votre Adresse de Retrait Principale

Avant toute chose, nous vous recommandons vivement de modifier l'**adresse de retrait principale** de votre nœud.
C'est l'adresse à laquelle toutes vos récompenses de point de contrôle RPL, votre RPL staké et votre ETH Beacon Chain seront envoyés lorsque vous réclamez vos récompenses de point de contrôle ou que vous sortez de votre validateur et retirez de votre megapool.

En option, vous pouvez définir une adresse de retrait pour votre ETH et [une nouvelle pour votre RPL](https://rpips.rocketpool.net/RPIPs/RPIP-31). L'adresse de retrait RPL, si elle est définie, pourra déclencher et réclamer du RPL à partir des récompenses d'inflation et n'aura aucun effet sur les récompenses de consensus ETH ou quoi que ce soit lié à l'ETH. Si vous n'avez pas défini d'adresse de retrait RPL, l'adresse de retrait principale recevra également les récompenses RPL. Par défaut, **celui qui contrôle l'adresse de retrait principale peut accéder à TOUT votre RPL staké, votre ETH et vos récompenses.**

L'adresse utilisée pour fournir un nœud avec de l'ETH devrait être l'adresse de retrait principale du nœud. Cliquez [ici](../legacy/houston/stake-eth-on-behalf.mdx) pour en savoir plus sur **staker de l'ETH au nom d'un nœud**.

::: warning NOTE
Lors de la configuration initiale de votre nœud, celle-ci est définie sur l'adresse du portefeuille de votre nœud.
Cependant, pour des raisons de sécurité, **il est vital de la définir sur une adresse différente contrôlée par un portefeuille froid.**
Un portefeuille froid peut être un portefeuille matériel (tel qu'un [Ledger](https://www.ledger.com/), [Trezor](https://trezor.io/), ou [Grid+](https://gridplus.io/)), ou un portefeuille de contrat intelligent (tel qu'[Argent](https://www.argent.xyz/)).

Nous vous **recommandons vivement** de NE PAS utiliser un portefeuille chaud tel que MetaMask comme adresse de retrait principale.

De cette façon, si votre portefeuille de nœud est compromis, l'attaquant n'a pas accès à votre ETH et RPL stakés en vous forçant à sortir car tous ces fonds seront envoyés à votre portefeuille froid séparé (qu'ils n'ont, espérons-le, pas).

Les adresses de retrait principales sont définies au niveau de l'opérateur de nœud.
Si vous créez plusieurs validateurs megapool, ils feront tous référence à la même adresse de retrait principale, vous n'avez donc besoin d'effectuer cette configuration qu'une seule fois.

[Voir ici](https://ethereum.org/en/security/#wallet-security) pour quelques notions de base sur la sécurité du portefeuille de la Fondation Ethereum.
:::

Il existe deux façons différentes de le faire.
Veuillez lire les deux options ci-dessous pour déterminer laquelle s'applique à vous.

<div className="p-3">
  <Tabs>
    <Tab label="Method 1">
      **Utilisez cette méthode si votre nouvelle adresse de retrait principale peut être utilisée pour signer des transactions via MetaMask ou WalletConnect.**

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTE</p>
        Cette méthode vous obligera à **soumettre une transaction** depuis votre nouvelle adresse de retrait principale, vous devez donc **avoir une petite quantité d'ETH dans cette adresse déjà.**
      </p>


      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTE</p>
        Pour les utilisateurs de portefeuilles matériels **Ledger**, notez que Ledger Live ne prend pas encore en charge MetaMask ou WalletConnect nativement.
        Vous devrez utiliser MetaMask et le connecter à votre Ledger à la place.
        Suivez [les instructions officielles de Ledger](https://www.ledger.com/academy/security/the-safest-way-to-use-metamask) pour ce faire.

        Pour travailler avec le site Web Rocket Pool, vous devrez avoir votre Ledger connecté, déverrouillé et l'application ETH ouverte.
        Vous devrez également **activer la "signature aveugle"** pour la session en cours ; vous pouvez trouver cela dans la partie Paramètres de l'application ETH sur l'appareil.
        La signature aveugle sera automatiquement désactivée après la fermeture de la session.

        Si vous utilisez Hoodi Testnet et souhaitez utiliser votre Ledger comme adresse de retrait principale, **vous devez d'abord créer un nouveau portefeuille Ethereum sur votre Ledger** pour vous assurer de ne pas connecter votre adresse en direct au réseau de test, ce qui a tendance à créer de la confusion.
        Assurez-vous de sélectionner le **Hoodi Testnet** dans le menu déroulant de sélection du réseau lors de la connexion de votre Ledger à MetaMask.
        Notez que Ledger Live n'affichera pas votre solde sur le réseau de test, mais d'autres applications qui prennent en charge le réseau de test (telles que MetaMask et Etherscan) pourront l'afficher.
      </p>

      1. Exécutez `rocketpool node set-primary-withdrawal-address 'votre adresse de portefeuille froid ou nom ENS'`. Votre nouvelle adresse de retrait principale sera marquée comme "en attente". Jusqu'à ce que vous la confirmiez, **votre ancienne adresse de retrait principale sera toujours utilisée**.
      2. Pour la confirmer, vous devez envoyer une transaction spéciale **depuis votre nouvelle adresse de retrait principale** au contrat megapool pour vérifier que vous possédez l'adresse de retrait principale.
      1. Le moyen le plus simple de le faire est de naviguer vers le site d'adresse de retrait principale Rocket Pool (pour le [Hoodi Testnet](https://testnet.node.rocketpool.net/primary-withdrawal-address) ou pour [Mainnet](https://node.rocketpool.net/primary-withdrawal-address)).
      3. Si vous n'avez pas encore connecté Metamask ou WalletConnect au site Web Rocket Pool, faites-le maintenant. Cliquez sur le bouton **select wallet** au centre de l'écran et choisissez MetaMask ou WalletConnect en fonction du portefeuille que vous souhaitez utiliser. Vous serez ensuite invité à confirmer la connexion. Par exemple, en utilisant MetaMask :

      Cliquez sur **Next**, puis cliquez sur **Confirm** pour permettre au site Web Rocket Pool d'utiliser votre portefeuille. 3. Sélectionnez **primary Withdrawal Address** dans le menu supérieur (ou le menu hamburger sur le côté gauche si vous êtes sur un appareil mobile). 4. Vous verrez cette invite :

      4. Tapez votre **adresse de portefeuille de nœud** ici et cliquez sur le **bouton Check Mark** pour continuer.

      1. Vous serez invité avec une question vous demandant si vous souhaitez définir une nouvelle adresse de retrait principale de nœud ou confirmer une adresse en attente. Sélectionnez **Confirm**.
      2. Maintenant, il devrait y avoir une nouvelle boîte de dialogue de confirmation dans votre portefeuille. Encore une fois, en utilisant MetaMask comme exemple, cliquez sur l'icône MetaMask pour l'ouvrir et vous devriez voir quelque chose comme ceci :

      Cliquez sur **Confirm** pour envoyer la transaction au réseau. Cela prendra un certain temps jusqu'à ce qu'elle soit incluse dans un bloc, mais une fois que c'est fait, vous verrez une boîte de dialogue de confirmation :

      <video controls="controls" src="https://cdn-rocketpool.s3.us-west-2.amazonaws.com/confirm_pending_withdrawal.mp4" />

      5. Votre nouvelle adresse de retrait principale sera maintenant confirmée et activée. Vous pouvez afficher cela avec `rocketpool node status`.
    </Tab>
    <Tab label="Method 2">
      **Utilisez cette méthode uniquement si votre adresse de retrait principale _ne peut pas_ être utilisée pour signer des transactions via MetaMask ou WalletConnect.**

      Dans cette méthode, vous exécuterez :

      ```shell
      rocketpool node set-primary-withdrawal-address --force 'votre adresse de portefeuille froid'
      ```

      Vous aurez la possibilité d'envoyer une transaction de test avant de confirmer cela, pour vous assurer que vous avez la bonne adresse.
      Si vous confirmez cette commande lorsqu'elle vous le demande, votre nouvelle adresse de retrait principale sera définie immédiatement.

      ::: danger
      En faisant cela, vous contournez la mesure de sécurité associée à la Méthode 1, qui nécessite que vous prouviez que vous possédez la nouvelle adresse.
      Si vous faites une faute de frappe ici, il n'y a aucun moyen de l'annuler et **les récompenses de votre megapool seront perdues à jamais**.

      Nous vous **encourageons vivement** à utiliser le mécanisme de transaction de test avant de confirmer cela, et si possible, à utiliser la Méthode 1 à la place.
      :::
    </Tab>

  </Tabs>
</div>

Une fois cela fait, vous ne pourrez **plus modifier votre adresse de retrait principale à l'aide de la commande `set-primary-withdrawal-address`**.
Pour la modifier, vous devrez envoyer une transaction signée depuis votre adresse de retrait principale **active** (celle vers laquelle vous venez de basculer).
Le site Web Rocket Pool dispose d'une fonction pour vous aider à le faire.

## Définition de votre Adresse de Signalisation Snapshot

Définir votre adresse de signalisation Snapshot vous permettra de participer aux votes Snapshot sur un navigateur ou un appareil mobile sans avoir à exposer les clés du nœud à un portefeuille chaud.

Il y a quelques éléments à préparer :

- L'adresse de votre nœud
- Une adresse que vous souhaitez utiliser pour le vote snapshot (adresse de signalisation)

Vous signerez un message indiquant que l'adresse de votre nœud peut déléguer à la nouvelle adresse. Ce message indique votre intention d'utiliser votre adresse de portefeuille comme adresse de signalisation Snapshot.

Sélectionnez le réseau que vous utilisez parmi l'un des onglets ci-dessous.

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnet">Si vous essayez cela sur Hoodi testnet, vous pouvez signer sur cette page : https://testnet.node.rocketpool.net/signalling-address</Tab>
    <Tab label="Mainnet">Si vous êtes prêt à configurer cela sur mainnet, allez plutôt ici : https://node.rocketpool.net/signalling-address</Tab>
  </Tabs>
</div>

:::danger WARNING
Ne chargez pas la clé privée de votre nœud sur un portefeuille chaud. Veuillez choisir un autre compte pour être votre adresse de signalisation.
Après avoir défini l'adresse de signalisation, vous pouvez l'utiliser pour voter sur Snapshot avec le pouvoir de vote de votre nœud.
:::

Commencez par **connecter l'adresse que vous souhaitez utiliser comme adresse de signalisation** au site Web en utilisant MetaMask, WalletConnect, ou l'une des autres méthodes prises en charge par le site Web. Vous serez ensuite présenté avec cette boîte de dialogue pour rechercher votre adresse de nœud.

Ensuite, vous entrerez votre adresse de nœud puis cliquerez sur le bouton orange "Find". Cela vérifiera si l'adresse est un nœud enregistré et vous amènera ensuite à l'étape suivante.

:::tip TIP
**Assurez-vous d'avoir la bonne adresse de nœud avant de faire cela !** si vous devez confirmer l'adresse de votre nœud, vous pouvez la récupérer rapidement via la CLI en utilisant la commande `rocketpool node status`.
:::

Une fois que vous vous êtes connecté et avez confirmé votre adresse de nœud, vous verrez votre **adresse de signalisation Snapshot**. Elle devrait être la même que le compte avec lequel vous vous êtes connecté au site. Vérifiez que c'est correct avant de continuer. Une fois que vous êtes sûr d'être connecté au compte souhaité, cliquez sur le bouton orange "Sign Message". Vous verrez une invite dans votre application d'extension de portefeuille pour signer le message suivant :

```
`snapshot signalling address` may delegate to me for Rocket Pool governance
```

La signature ne vous coûtera aucun gaz, mais la définition en coûtera. Après avoir signé, le frontend vous donnera une commande à coller dans le smartnode. Allez-y et collez-la dans la CLI de votre smartnode et suivez les étapes demandées. La commande devrait ressembler à quelque chose comme ceci :

```shell
rocketpool pdao set-signalling-address
`snapshot signalling address`
`EIP712 signature`
```

Si vous voyez ce message dans votre CLI, vous êtes prêt !

```
The node's signalling address was successfully set to `snapshot signalling address`
```

:::tip TIP
Ne vous inquiétez pas si vous fermez accidentellement le site ou perdez la trace de la commande. Vous pouvez simplement répéter les étapes et **signer à nouveau en utilisant la même adresse de nœud et la même adresse de signalisation**. Le frontend utilise `signer.Signmessage()` de la bibliothèque ethers, ce qui signifie que votre signature est déterministe avec la même entrée.
Cliquez [ici](https://docs.ethers.org/v6/api/providers/#cid_865) pour en savoir plus.
:::

Effacer votre adresse de signalisation est assez facile, utilisez simplement cette commande dans la CLI :

```shell
rocketpool pdao clear-signalling-address
```

## Définition de votre Adresse de Retrait RPL

Il est important de comprendre la différence entre votre [adresse de retrait principale](./prepare-node#setting-your-primary-withdrawal-address) et votre adresse de retrait RPL. Par défaut, votre adresse de retrait RPL n'est pas définie et votre adresse de retrait principale est l'endroit où toutes vos récompenses de point de contrôle RPL, votre RPL staké et l'ETH Beacon Chain seront envoyés.

Vous pouvez définir une [adresse de retrait séparée pour votre RPL](https://rpips.rocketpool.net/RPIPs/RPIP-31) si vous le souhaitez. Votre adresse de retrait RPL, si elle est définie, pourra déclencher et réclamer du RPL à partir des récompenses d'inflation et n'aura aucun effet sur les récompenses de consensus ETH ou quoi que ce soit lié à l'ETH. Dans ce cas, votre adresse de retrait principale n'aura plus aucune autorité sur les actions liées au RPL.

Cela crée des opportunités intéressantes où le RPL peut être fourni par une entité à un opérateur de nœud qui ne souhaite pas être exposé au RPL. Cette entité peut ensuite réclamer les récompenses RPL pour avoir fourni la garantie d'assurance requise pour le nœud. En d'autres termes, cela permet à différents acteurs de fournir chaque type de garantie.

::: warning NOTE
Lors de la configuration initiale de votre nœud, votre adresse de retrait RPL est par défaut non définie.
Si vous choisissez de définir une adresse de retrait RPL, **il est vital de la définir sur une adresse différente contrôlée par un portefeuille froid.**
Un portefeuille froid peut être un portefeuille matériel (tel qu'un [Ledger](https://www.ledger.com/), [Trezor](https://trezor.io/), ou [Grid+](https://gridplus.io/)), ou un portefeuille de contrat intelligent (tel que [Safe](https://app.safe.global/welcome)).

Nous vous **recommandons vivement** de NE PAS utiliser un portefeuille chaud tel que MetaMask comme adresse de retrait RPL.

De cette façon, si votre portefeuille de nœud est compromis, l'attaquant n'a pas accès à votre RPL staké en vous forçant à sortir car tous ces fonds seront envoyés à votre portefeuille froid séparé (qu'ils n'ont, espérons-le, pas).

Les adresses de retrait RPL sont définies au niveau de l'opérateur de nœud.
Si vous créez plusieurs validateurs megapool, ils feront tous référence à la même adresse de retrait RPL, vous n'avez donc besoin d'effectuer cette configuration qu'une seule fois.

[Voir ici](https://ethereum.org/en/security/#wallet-security) pour quelques notions de base sur la sécurité du portefeuille de la Fondation Ethereum.
:::

Il existe deux façons différentes de le faire.
Veuillez lire les deux options ci-dessous pour déterminer laquelle s'applique à vous.

<div className="p-3">
  <Tabs>
    <Tab label="Method 1">
      *Utilisez cette méthode si votre nouvelle adresse de retrait RPL peut être utilisée pour signer des transactions via MetaMask ou WalletConnect.**

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTE</p>
        Cette méthode vous obligera à **soumettre une transaction** depuis votre nouvelle adresse de retrait RPL, vous devez donc **avoir une petite quantité d'ETH dans cette adresse déjà.**
      </p>

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTE</p>
        Pour les utilisateurs de portefeuilles matériels **Ledger**, notez que Ledger Live ne prend pas encore en charge MetaMask ou WalletConnect nativement.
        Vous devrez utiliser MetaMask et le connecter à votre Ledger à la place.
        Suivez [les instructions officielles de Ledger](https://www.ledger.com/academy/security/the-safest-way-to-use-metamask) pour ce faire.

        Pour travailler avec le site Web Rocket Pool, vous devrez avoir votre Ledger connecté, déverrouillé et l'application ETH ouverte.
        Vous devrez également **activer la "signature aveugle"** pour la session en cours ; vous pouvez trouver cela dans la partie Paramètres de l'application ETH sur l'appareil.
        La signature aveugle sera automatiquement désactivée après la fermeture de la session.

        Si vous utilisez Hoodi Testnet et souhaitez utiliser votre Ledger comme adresse de retrait RPL, **vous devez d'abord créer un nouveau portefeuille Ethereum sur votre Ledger** pour vous assurer de ne pas connecter votre adresse en direct au réseau de test, ce qui a tendance à créer de la confusion.
        Assurez-vous de sélectionner le **Hoodi Testnet** dans le menu déroulant de sélection du réseau lors de la connexion de votre Ledger à MetaMask.
        Notez que Ledger Live n'affichera pas votre solde sur le réseau de test, mais d'autres applications qui prennent en charge le réseau de test (telles que MetaMask et Etherscan) pourront l'afficher.
      </p>

      1. Exécutez `rocketpool node set-rpl-withdrawal-address 'votre adresse de portefeuille froid ou nom ENS'`. Votre nouvelle adresse de retrait RPL sera marquée comme "en attente". Jusqu'à ce que vous la confirmiez, **votre ancienne adresse de retrait RPL sera toujours utilisée**.
      2. Pour la confirmer, vous devez envoyer une transaction spéciale **depuis votre nouvelle adresse de retrait RPL** au contrat megapool pour vérifier que vous possédez l'adresse de retrait RPL.
      1. Le moyen le plus simple de le faire est de naviguer vers le site d'adresse de retrait RPL Rocket Pool (pour le [Hoodi Testnet](https://testnet.node.rocketpool.net/rpl-withdrawal-address) ou pour [Mainnet](https://node.rocketpool.net/rpl-withdrawal-address)).
      3. Si vous n'avez pas encore connecté Metamask ou WalletConnect au site Web Rocket Pool, faites-le maintenant. Cliquez sur le bouton **select wallet** au centre de l'écran et choisissez MetaMask ou WalletConnect en fonction du portefeuille que vous souhaitez utiliser. Vous serez ensuite invité à confirmer la connexion. Par exemple, en utilisant MetaMask :

      Cliquez sur **Next**, puis cliquez sur **Confirm** pour permettre au site Web Rocket Pool d'utiliser votre portefeuille. 3. Sélectionnez **RPL Withdrawal Address** dans le menu supérieur (ou le menu hamburger sur le côté gauche si vous êtes sur un appareil mobile). 4. Vous verrez cette invite :

      4. Tapez votre **adresse de portefeuille de nœud** ici et cliquez sur le bouton orange **Find** pour continuer.

      <img src={nodeAddress} width="100%" height="auto"/>

      1.  Vous serez invité à confirmer une adresse de retrait RPL en attente. Cela devrait être la même adresse que vous avez utilisée lors de l'exécution de cette commande précédemment : `rocketpool node set-rpl-withdrawal-address` Sélectionnez **Confirm Pending** lorsque vous êtes prêt.
      2.  Maintenant, il devrait y avoir une nouvelle boîte de dialogue de confirmation dans votre portefeuille. Encore une fois, en utilisant MetaMask comme exemple, cliquez sur l'icône MetaMask pour l'ouvrir et vous devriez voir quelque chose comme ceci :

      Cliquez sur **Confirm** pour envoyer la transaction au réseau. Cela prendra un certain temps jusqu'à ce qu'elle soit incluse dans un bloc, mais une fois que c'est fait, vous verrez une boîte de dialogue de confirmation :

      <img src={rplWithdrawalConfirmation} width="100%" height="auto"/>

      5. Votre nouvelle adresse de retrait RPL sera maintenant confirmée et activée. Vous pouvez afficher cela avec `rocketpool node status`.
    </Tab>
    <Tab label="Method 2">
      **Utilisez cette méthode uniquement si votre adresse de retrait RPL _ne peut pas_ être utilisée pour signer des transactions via MetaMask ou WalletConnect.**

      Dans cette méthode, vous exécuterez :

      ```shell
      rocketpool node set-rpl-withdrawal-address --force `votre adresse de portefeuille froid`
      ```

      Vous aurez la possibilité d'envoyer une transaction de test avant de confirmer cela, pour vous assurer que vous avez la bonne adresse.
      Si vous confirmez cette commande lorsqu'elle vous le demande, votre nouvelle adresse de retrait RPL sera définie immédiatement.


      <p className="rspress-directive danger">
        En faisant cela, vous contournez la mesure de sécurité associée à la Méthode 1, qui nécessite que vous prouviez que vous possédez la nouvelle adresse.
        Si vous faites une faute de frappe ici, il n'y a aucun moyen de l'annuler et **les récompenses de votre megapool seront perdues à jamais**.

        Nous vous **encourageons vivement** à utiliser le mécanisme de transaction de test avant de confirmer cela, et si possible, à utiliser la Méthode 1 à la place.
      </p>
    </Tab>

  </Tabs>
</div>

Une fois cela fait, vous ne pourrez **plus modifier votre adresse de retrait RPL à l'aide de la commande `set-rpl-withdrawal-address`**.
Pour la modifier, vous devrez envoyer une transaction signée depuis votre adresse de retrait RPL **active** (celle vers laquelle vous venez de basculer).
Le site Web Rocket Pool dispose d'une fonction pour vous aider à le faire.

Si vous souhaitez désactiver votre adresse de retrait RPL, le processus est assez simple. Tout d'abord, vous voudrez naviguer vers la page d'adresse de retrait RPL sur le site Web Rocket Pool.

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnet">https://testnet.node.rocketpool.net/rpl-withdrawal-address</Tab>
    <Tab label="Mainnet">https://node.rocketpool.net/rpl-withdrawal-address</Tab>
  </Tabs>
</div>

Si vous êtes connecté avec l'adresse de retrait RPL du nœud, vous devriez pouvoir cliquer sur le bouton **unset** sur la droite ici :

<img src="./images/unset_rpl_withdrawal.png" width="100%" height="auto" />

Cliquer sur **unset** vous amènera à une page où vous pourrez confirmer les détails. Si vous êtes satisfait de ce que vous voyez, cliquez sur le bouton orange **unset** pour envoyer la transaction au réseau.

C'est tout ce qu'il y a à faire pour définir votre adresse de retrait RPL ! Nous espérons que vous avez trouvé le processus rapide et facile.

N'hésitez pas à passer sur [notre serveur Discord](https://discord.gg/G46XgK264a) pour nous faire savoir ce que vous en avez pensé et suivre l'évolution du projet.

## Mapper un Nom ENS à votre Portefeuille de Nœud

Si vous souhaitez que l'adresse de votre portefeuille de nœud soit mappée à un nom lisible par l'homme comme `alice.eth`, suivez ces étapes :

1. Achetez un nom ENS sur [le site officiel ENS](https://app.ens.domains).

2. Toujours sur le site ENS, configurez la **résolution directe** pour le nom, en définissant quelle adresse sera utilisée lorsque quelqu'un référence votre nom `.eth`.

- Sélectionnez "My account"
- Cliquez sur le nom ENS que vous souhaitez modifier
- Cliquez sur "Add/edit record"
- Insérez votre adresse ETH souhaitée, cliquez sur "Confirm" et soumettez la transaction.

3. Une fois la transaction précédente confirmée, vous pouvez utiliser la CLI Smartnode pour configurer la **résolution inverse**. Cela permettra aux applications de mapper à partir de l'adresse de votre portefeuille de nœud vers votre nom `.eth`.

Exécutez la commande :

```shell
rocketpool wallet set-ens-name <votre-nom-ens.eth>
```

Cette action nécessite également d'envoyer une transaction. Vous devrez confirmer les paramètres souhaités et soumettre la transaction.

::: warning NOTE
**Assurez-vous d'avoir terminé l'étape 2 pour configurer la résolution directe avant d'exécuter la commande CLI pour configurer la résolution inverse**. Il s'agit d'une mesure de sécurité pour empêcher les portefeuilles d'essayer d'usurper un nom ENS qu'ils ne contrôlent pas.
:::

4. Une fois la transaction incluse avec succès dans un bloc, exécutez `rocketpool node status` pour voir que votre portefeuille est maintenant associé à votre nom ENS.

## Prochaines Étapes

Les prochaines étapes pour préparer votre nœud vous enseigneront la configuration d'un nœud de secours, le fonctionnement des frais de priorité, votre distributeur de frais et la Smoothing Pool, et le MEV.
Chaque sujet vous demandera de faire un choix sur la façon dont vous souhaitez exécuter votre nœud.
Veuillez passer aux sections suivantes du guide lorsque vous êtes prêt.

Une fois que vous avez terminé ces sujets, vous serez guidé à travers le processus de création d'un validateur megapool et de gagner des récompenses de staking.
