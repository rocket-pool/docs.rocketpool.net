import { Tab, Tabs } from "@rspress/core/theme";
import powershell from "./images/powershell.png";

# Introduction à Secure Shell (SSH)

En général, il existe deux façons d'accéder à votre machine de nœud : **localement** et **à distance**.

- **Localement** signifie s'asseoir devant le nœud physique et utiliser un moniteur et un clavier connectés directement à celui-ci.
- **À distance** signifie se connecter au nœud en utilisant un ordinateur différent (disons, un ordinateur portable ou de bureau) via un réseau et interagir avec lui de là.

La plupart du temps, les opérateurs de nœuds préfèrent la flexibilité de travailler sur leur nœud **à distance**.

Le Smartnode n'a actuellement pas d'interface graphique (GUI), seulement une interface en ligne de commande (CLI), ce qui signifie que l'interaction se fait entièrement en tapant des commandes dans un terminal en ligne de commande.
En tant que tel, interagir avec lui à distance nécessite un moyen d'accéder au terminal de votre nœud depuis une machine différente.
Dans cette section, nous fournirons une brève introduction à la méthode la plus populaire pour ce faire : **SSH**.

<div className="p-3">
  <Tabs>
    <Tab label="Utiliser une Machine Windows">
      Il existe plusieurs façons différentes d'utiliser SSH depuis une machine Windows.

      La plus simple est d'utiliser **Powershell**, qui est un terminal de commande puissant intégré aux versions modernes de
      Windows.
      Powershell inclut SSH, vous pouvez donc l'utiliser immédiatement sans installer de programmes supplémentaires.

      Vous pouvez le trouver en ouvrant le menu Démarrer et en tapant `Powershell` dans la barre de recherche ; il y aura plusieurs
      options, mais l'option que vous voulez s'appelle simplement `Windows Powershell` :

      <img src={powershell} width="100%" height="auto" />

      Cela ouvrira un terminal avec un fond bleu.
      Vous pouvez utiliser `ssh` à partir d'ici - voir ci-dessous pour les instructions sur la façon de le faire.

      Un autre outil populaire s'appelle [PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html).
      PuTTY est un programme spécial qui comprend un terminal dédié à l'utilisation de SSH, mais il est également livré avec une interface graphique pratique
      pour faire des choses comme changer les configurations, sauvegarder les paramètres dans un "profil", et garder une liste de machines auxquelles vous
      pouvez facilement vous connecter en sélectionnant dans une liste.

      Au lieu d'utiliser `ssh` comme vous le feriez avec les autres outils, PuTTY le fera automatiquement pour vous - tout ce dont vous avez besoin
      sont le nom d'utilisateur et le mot de passe.
      Pour plus d'informations sur l'utilisation de PuTTY, jetez un œil à [ce super
      tutoriel](https://tonyteaches.tech/putty-ssh-windows-tutorial/).

      <p className="rspress-directive warning">
        **REMARQUE** : PuTTY peut afficher les mauvaises couleurs dans l'interface utilisateur textuelle (TUI) de `rocketpool service
        config`.
        Il existe une solution simple à cela. Dans les
        paramètres de PuTTY, accédez à **Connection** > **Data** > **Terminal Details**
        dans le menu déroulant. Il devrait y avoir une zone de texte **Terminal-type string**. Tapez `xterm-256color`, puis enregistrez
        les paramètres
        pour résoudre ce problème.
      </p>

    </Tab>
    <Tab label="Utiliser une Machine Linux ou macOS">
      L'utilisation de SSH depuis une machine Linux ou macOS est triviale ; si vous en utilisez déjà une, vous avez probablement déjà
      interagi avec le terminal à un moment donné.
      SSH est intégré directement dans le terminal ; utilisez-le en exécutant la commande `ssh`. Par défaut, SSH vous permettra de
      vous connecter au compte utilisateur principal de votre nœud.
    </Tab>

  </Tabs>
</div>

Voici comment vous connecter à votre nœud en utilisant SSH.

:::warning REMARQUE
Exécutez la commande suivante depuis votre ordinateur portable ou de bureau, **pas depuis votre nœud lui-même** !
:::

```shell
ssh username@node-ip-address
```

Par exemple, si le nom d'utilisateur de votre nœud est `staker` et que l'adresse IP de votre nœud est `192.168.1.10`,
vous vous y connecteriez avec la commande suivante :

```shell
ssh staker@192.168.1.10
```

La première fois que vous faites cela, vous verrez un message présentant la clé publique que votre nœud utilise - si vous êtes
familier avec la façon de vérifier cette clé, vous pouvez le faire maintenant.
Sinon, si vous êtes sûr d'avoir la bonne adresse IP du nœud dans votre commande `ssh`, vous pouvez simplement dire `yes` pour
l'accepter.
Vous n'avez besoin de faire cela qu'une seule fois.

Le client vous demandera ensuite le mot de passe de votre utilisateur ; une fois que vous l'aurez entré, vous êtes connecté !
Vous serez accueilli avec un message de bienvenue, quelques détails sur votre machine et une nouvelle invite.

À ce stade, tout ce que vous tapez dans le terminal **est exécuté à distance sur votre machine de nœud** - c'est comme si vous
étiez connecté directement à la machine de nœud et que vous tapiez dessus avec un clavier attaché localement !

Vous devrez vous connecter en SSH au terminal périodiquement pour les mises à jour et la maintenance.
Il peut être peu pratique de se souvenir de la façon de se connecter à votre nœud, il peut donc être utile de raccourcir cette commande en
créant un alias mémorable - une commande de "raccourci" personnalisée.

:::warning REMARQUE
Si vous faites cela, assurez-vous de créer l'alias sur la **machine client**, **pas** sur le nœud !
Si votre terminal est toujours connecté au nœud, exécutez d'abord `exit` à l'invite de commande (ou ouvrez simplement une nouvelle
fenêtre de terminal).
:::

:::warning REMARQUE
Cette section s'applique uniquement aux utilisateurs Linux/OSX ou WSL - PowerShell n'est pas pris en charge.
:::

Dans cet exemple, nous allons créer un alias appelé `ethnode` qui remplacera la commande SSH.
En supposant, comme avant, que le nom d'utilisateur de votre nœud est `staker` et que l'adresse IP de votre nœud est `192.168.1.10`, créez
l'alias avec la commande suivante :

```shell
echo "alias ethnode='ssh staker@192.168.1.10'" >> ~/.bash_aliases
```

Rechargez la liste des alias pour rendre votre fenêtre de terminal actuelle consciente du nouvel alias :

```shell
source ~/.bash_aliases
```

Maintenant, vous pouvez vous connecter au nœud en utilisant l'alias que vous venez de créer au lieu de la commande plus longue qui implique
de spécifier l'adresse IP du nœud :

```shell
ethnode
```
