# RPL Staking and Claiming Rewards

In Saturn 1, RPL has fundamentally transformed into an ETH-accruing revenue share token. This guide covers how to stake RPL to your megapool,
migrate existing RPL stake from legacy minipools, claim your rewards, and withdraw your RPL when needed. This guide also goes over the mechanics of how 
ETH protocol revenue is distributed to megapool RPL stakers via voter share rewards. 

## What's Changed in Saturn 1

Moving forward, legacy RPL previously staked on minipools continue earning inflation rewards and contribute to voting power just like before.
In Saturn 1, staking RPL on your megapool provides several benefits:

1. **ETH Revenue Share**: Megapool staked RPL earns you a proportional share of protocol ETH revenue through the voter share mechanism
2. **RPL Inflation Rewards**: Continue to earn RPL inflation rewards (28-day reward periods)
3. **Voting Power**: Staked RPL grants voting power in Rocket Pool's [Protocol Dao (pDAO) governance](/pdao/overview)

Staking RPL on your megapool unlocks ETH rewards generated by protocol revenue. The voter share (9% of protocol revenue) is distributed proportionally among all
node operators based on their share of total megapool RPL staked. 

## Universal Adjustable Revenue Split (UARS)

Saturn 1 introduces UARS, which distributes protocol ETH revenue from node operator commissions among four groups:

| Group | Default Share | Adjustable via pDAO |
|-------|---------------|---------------------|
| **Base Commission** Share to node operators  | 5% | Yes |
| **Voter Share** to megapool RPL stakers | 9% | Yes |
| **pDAO Treasury** | 0% | Yes |
| **rETH Holders** | 86% (remainder) | Automatic |

These parameters are adjustable via [pDAO governance](/pdao/overview), allowing the Rocket Pool protocol to adapt and be competitive as market conditions shift. By staking RPL
and running validators, you are eligible to participate in this process!

## How Voter Share is Distributed to Megapool RPL stakers

The voter share (9% of protocol revenue) is distributed proportionally among all node operators based on their share of total megapool RPL staked. Every 28 days, the oracle
DAO will take a snapshot of the total ETH accumulated in the voter share pool as well as a record of each node operator's share based on their balance of megapool staked RPL. 
At the end of each 28 day reward period, you'll be able to claim your rewards using the smart node. Alternatively you can accumulate rewards over the span of many periods then 
claim all at once. 

Check out the [Viewing your ETH and RPL rewards](/node-staking/megapools/staking-and-claiming-rewards#viewing-your-nodes-eth-and-rpl-rewards) guide to learn about the different types 
of rewards you can earn, and how to check the status of your rewards. 

Once you're familiar with that, give [Claiming Rewards](/node-staking/megapools/staking-and-claiming-rewards#claiming-rewards) a read to learn how to claim your rewards. 

## Vote Power 

For your RPL to be vote-eligible, it must meet these requirements:

- Staked to your node operator account (both legacy and megapool-attributed RPL are eligible)
- Capped at 150% of your total bonded ETH (across all minipools and megapools)
- Your node must have active validators (minipools or megapools) to contribute bonded ETH

These requirements together serve to ensure fairness by making it harder for large stakers to gain disproportionate influence over the voting process.

The 150% of total bonded ETH maximum vote-eligible RPL is calculated using your bonded ETH across all minipools and megapools as follows:

```
vote-eligible RPL = min(1.5*RPL value of megapool bonded_eth, megapool staked rpl)
```
You should be able to view your node's bonded ETH ratio in the `rocketpool node status` menu: 

```
=== RPL Stake ===
NOTE: The following figures take *any pending bond reductions* into account.

The node has a total stake of 5400.964614 RPL.
This is currently 4.79% of its borrowed ETH and 14.38% of its bonded ETH.
The node has 4383.275814 megapool staked RPL.
The node has 1017.688800 legacy staked RPL.
The node has a total stake (legacy minipool RPL plus megapool RPL) of 5400.964614 RPL.
You have 4383.275814 RPL staked on your megapool and can request to unstake up to 4383.275814 RPL
```

::: tip IMPORTANT
The voting system treats all staked RPL equally when calculating your voting power. 
However, vote-eligible RPL must be staked on a megapool to earn voter share ETH rewards. The voter share (9% of protocol ETH revenue) is only distributed to megapool stakers. 
In other words all vote-eligible RPL grants voting power while vote-eligible megapool RPL earns voter share rewards. 

So in the example above the node's `total stake of 5400.964614 RPL` is vote-eligible as it falls within the 150% bonded ETH max. The node's `4383.275814 megapool staked RPL`
earns voter share rewards while the node's `1017.688800 legacy staked RPL` does not. 
::: 

## Migrating RPL from Legacy Minipools to Megapools

If you're an existing node operator with RPL staked to legacy minipools, you might consider migrating your legacy RPL stake to your megapool. 
Legacy RPL staked on minipools do not earn voter share rewards. However, your legacy RPL stake will continue earning RPL inflation rewards and contribute to your 
node's voting power in [pDAO governance](/pdao/overview). 

To migrate your legacy RPL, you will first [Unstake and withdraw](/node-staking/megapools/staking-and-claiming-rewards#unstaking-and-withdrawing-rpl) your legacy RPL, then stake it again using the `rocketpool node stake` command. We'll go into how
to do so in the next section. 

## Unstaking and Withdrawing RPL 

Saturn 1 introduces a two-step withdrawal system for unstaking RPL. It's intended to reduce market volatility, especially in the case of a bank run. The two-step withdrawal
system also prevents the scenario of a node operator gaming the rewards system by having their RPL earn rewards in Defi then staking it in time for a rewards period. 

1. The first step is to make a request to unstake RPL. You'll decide how much legacy RPL or megapool RPL you wish to unstake. 
2. After a 28 day `unstaking period`, the `unstaking` RPL will be `unstaked`. At this point you may withdraw your `unstaked` RPL.  

There's no limit on how much megapool staked RPL you can unstake, which means you can unstake and withdraw all of it any time. 
Node operators with legacy RPL may withdraw down to 15% borrowed ETH collateral. This 15% minimum only considers borrowed ETH from legacy minipools, not megapools. The next few sections
will go over the two steps for unstaking and withdrawing RPL.  


::: tip Note for Legacy RPL Stakers 
If you want to lower your percentage of borrowed ETH collateral to withdraw more of your RPL, you might want to consider 
[exiting your minipool(s)](/node-staking/withdraw#shut-down-a-minipool) to lower your borrowed ETH collateral amount.  


::: 

### Step 1: Request to Unstake RPL 

::: warning WARNING

During the 28 day unstaking period:
- The RPL you've requested to unstake does not continue earning rewards.
- You can't cancel the unstaking process, but you may withdraw after the 28 day period then restake it. 
- You may initiate a new withdrawal during the 28 day period, but all your unstaking RPL will refresh to 28 days in unstaking. It's recommended 
to complete your initial withdrawal before making another one. Otherwise you'll need wait the full length of the unstaking period again. 

:::

To begin the process, use the `rocketpool node withdraw-rpl` command. You'll see the following prompt: 
```
The RPL withdrawal process has changed in Saturn. It is now a 2-step process:
1. Request to unstake a certain RPL amount;
2. Wait for the unstaking period to end (currently 28 days), and then withdraw the RPL.

Your node has 1017.688800 RPL on its legacy stake (previously associated to minipools) and 4383.275814 RPL staked on its megapool.
Your node currently has 0.000000 RPL locked on pDAO proposals.
Your node's RPL withdrawal address is 0x89e860C8Feb86D9f54Ad4D7D6bcBe019EB1D6C24.

You have 0.000000 RPL unstaked and ready to be withdrawn to your RPL withdrawal address.
Please select one of the three options below.

1: withdraw unstaked RPL
2: request to unstake RPL
3: request to unstake legacy RPL
```

- If you're unstaking megapool RPL, select the second option `request to unstake RPL` by typing `2`, then pressing `enter` on your keyboard.

- If you're in the process of migrating legacy RPL, select the third option `request to unstake legacy RPL`. 

You'll be prompted to either unstake your full balance or to input a custom amount to unstake. Enter `y` to unstake the full amount or enter `n` to input a custom amount to unstake. 
From here, the smart node will walk you through the rest of the steps required to make the unstake request. 
```
You have 4383.275814 RPL staked on your megapool and can request to unstake up to 4383.275814 RPL.
Would you like to unstake the maximum amount of staked RPL? [y/n]
n

Please enter an amount of staked RPL to unstake:
1000

+================ Suggested Gas Prices ================+
| Avg Wait Time |   Max Fee    |     Total Gas Cost     |
| 15 Seconds    | 2.97747 gwei | 0.00061 to 0.00091 ETH |
| 1 Minute      | 2.47747 gwei | 0.00050 to 0.00076 ETH |
| 3 Minutes     | 1.97747 gwei | 0.00040 to 0.00060 ETH |
| >10 Minutes   | 1.97747 gwei | 0.00040 to 0.00060 ETH |
+======================================================+

These prices include a maximum priority fee of 0.010 gwei.
Please enter your max fee (including the priority fee) or leave blank for the default of 2.47747 gwei:


Using a max fee of 2.477 gwei and a priority fee of 0.010 gwei.
Are you sure you want to unstake 1000.000000 RPL? [y/n]
y

Unstaking RPL...
Transaction has been submitted with hash <transaction-hash>.
You may follow its progress by visiting:
https://hoodi.etherscan.io/tx/<transaction-hash>

Waiting for the transaction to be included in a block... you may wait here for it, or press CTRL+C to exit and return to the terminal.

Successfully unstaked 1000.000000 RPL.

```
### Checking the Status of Your Unstaking RPL 

After you've successfully made a request to unstake RPL, the `rocketpool node withdraw-rpl` command will inform of when the unstaking RPL is eligible for a withdrawal: 
```
Your node has 1017.688800 RPL on its legacy stake (previously associated to minipools) and 3383.275814 RPL staked on its megapool.
Your node currently has 0.000000 RPL locked on pDAO proposals.
Your node's RPL withdrawal address is <node-address>.

You have 1000.000000 RPL currently unstaking until 2026-02-19, 04:05 +0000 UTC (47h57m19s from now).
```

### Step 2: Withdrawing Unstaked RPL

After the 28 day unstaking period has passed, the status will be reflected in the `rocketpool node withdraw-rpl` command and you'll finally be able to withdraw your unstaked RPL. 
```
You have 1000.000000 RPL unstaked and ready to be withdrawn to your RPL withdrawal address.
```

If you don't have an RPL withdrawal address configured, the RPL will be withdrawn to your node wallet. Node operators with a custom RPL withdrawal address will need to withdraw from the withdrawal 
address and not from the node address. You can use this site to withdraw using your RPL withdrawal address: https://node.rocketpool.net/withdraw-rpl

```
Your node has 1017.688800 RPL on its legacy stake (previously associated to minipools) and 3383.275814 RPL staked on its megapool.
Your node currently has 0.000000 RPL locked on pDAO proposals.
Your node's RPL withdrawal address is <RPL-withdrawal-address>.

You have 1000.000000 RPL unstaked and ready to be withdrawn to your RPL withdrawal address.
Please select one of the three options below.

1: withdraw unstaked RPL
2: request to unstake RPL
3: request to unstake legacy RPL
1

+================ Suggested Gas Prices ================+
| Avg Wait Time |   Max Fee    |     Total Gas Cost     |
| 15 Seconds    | 2.97747 gwei | 0.00061 to 0.00091 ETH |
| 1 Minute      | 2.47747 gwei | 0.00050 to 0.00076 ETH |
| 3 Minutes     | 1.97747 gwei | 0.00040 to 0.00060 ETH |
| >10 Minutes   | 1.97747 gwei | 0.00040 to 0.00060 ETH |
+======================================================+

These prices include a maximum priority fee of 0.010 gwei.
Please enter your max fee (including the priority fee) or leave blank for the default of 2.47747 gwei:


Using a max fee of 2.477 gwei and a priority fee of 0.010 gwei.
Are you sure you want to withdraw 1000.000000 RPL? [y/n]
y

Withdrawing RPL...
Transaction has been submitted with hash <transaction-hash>.
You may follow its progress by visiting:
https://hoodi.etherscan.io/tx/transaction-hash

Waiting for the transaction to be included in a block... you may wait here for it, or press CTRL+C to exit and return to the terminal.

Successfully withdrew 1000.000000 RPL.
```

## Staking
todo: `rocketpool node stake-rpl` command

## Viewing your node's ETH and RPL rewards

todo: `rocketpool claims`command

## Claiming Rewards 
todo: `rocketpool claim-all` command

## Next Steps

Now that you understand RPL staking and rewards in Saturn 1, feel free to check out the [pDAO governance](/pdao/overview) section to learn how your voting power can be 
used to participate in making key decisions to improve Rocket Pool. And please take the time to review [Monitoring and Maintenance](/node-staking/maintenance/overview) to 
learn how you can apply updates, monitor your node, and brush up on how to keep your node in tip top shape throughout its life. 

For more technical details on UARS and the economics behind voter share, see [RPIP-46: Universal Adjustable Revenue Split](https://rpips.rocketpool.net/RPIPs/RPIP-46).