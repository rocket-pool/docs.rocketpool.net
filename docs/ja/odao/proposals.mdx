import { Tab, Tabs } from "@rspress/core/theme";

# Oracle DAOプロポーザル

念のため、Oracle DAOの役割には2つのタイプがあります:

1. **自動化された役割** - これらは、Consensus LayerからExecution Layerへの情報の伝達、プロトコルのさまざまな側面のオフチェーン計算、およびそれらをSmart Contractsへの更新として送信するなど、Rocket Poolの通常運用に関連する役割です。これらはすべて`watchtower`デーモンプロセスによって自動的に実行され、Execution ClientとConsensus Client、および`watchtower`デーモンがすべて正常に動作している限り、手動介入は必要ありません。`watchtower`デーモンは前のステップですでに設定しているため、このセクションでは再度説明しません。
2. **手動の役割** - これらは、Oracle DAOの他のメンバーとの独自の意思決定とバンド外通信を必要とする役割です。これには、コントラクトのアップグレードへの投票、パラメータの変更、Oracle DAOへのメンバーの招待またはキックなどが含まれます。これらはすべて標準のSmartnode CLIを介して実行できます。このセクションでは、これらの各役割とその実行方法について説明します。

プロポーザルは、自動化された`watchtower`の役割以外の責任の中核を形成します。
基本的に、次のように機能します:

- Oracle DAO全体が、各メンバーがそれを認識し、そのプロポーザルが何を伴うかを理解できるように、今後のプロポーザルについて事前に広範囲に議論する必要があります。
- Oracle DAOメンバーが、オンチェーントランザクションを介してプロポーザルを作成します。
- プロポーザルは、投票が開始される前に**待機期間**に入り、さらなる議論と意見形成を行います。これは現在Mainnetで**7日間**です。
- 待機期間が終了すると、メンバーは単純な賛成か反対の投票でプロポーザルに投票できます。
- Oracle DAOメンバーの51%のクォーラムが同じ方法で投票した場合、投票は終了します。51%がプロポーザルに同意した場合、それは**実行**できるようになります。プロポーザルが承認されると、任意のメンバーがプロポーザルを実行できます。
- 実行とは、オンチェーンで正式に変更をトリガーし、コアRocket Poolコントラクトの状態を変更することを指します。

## プロポーザルの作成

プロポーザルを作成すると、**レビュー期間**に入り、他のメンバーがそれを確認して議論できますが、投票することはできません。
この記事の執筆時点では、これは現在**7日間**です。

レビュー期間の後、メンバーがプロポーザルに賛成または反対のいずれかで投票できる**投票期間**があります。
この記事の執筆時点では、これは現在**14日間**です。

プロポーザルが期限切れになる前にクォーラムに達した場合(つまり、コンセンサスに達するのに十分なメンバーが賛成票を投じた場合)、それは**可決**されます。
クォーラムはOracle DAOによって設定可能なパラメータです。現在、総メンバープールの少なくとも**51%**に設定されています。

投票が可決されると、**実行**でき、その変更が有効になります。
この記事の執筆時点では、実行はプロポーザルが可決されてから**14日後**です。

新しいプロポーザルを作成するプロセスは、作成したいプロポーザルのタイプによって異なります。
以下のタブからタイプを選択してください。

<div className="p-3">
  <Tabs>
    <Tab label="Oracle DAO Member List">
      Oracle DAOメンバーのリストを変更するプロポーザルを行うには、`rocketpool odao propose member`コマンドを使用します。このコマンドは次のオプションを提供します:

      ```
      NAME:
      rocketpool odao propose member - Make an oracle DAO member proposal

      USAGE:
      rocketpool odao propose member command [command options] [arguments...]

      COMMANDS:
      invite, i Propose inviting a new member
      leave, l Propose leaving the oracle DAO
      kick, k Propose kicking a member

      OPTIONS:
      --help, -h show help
      ```

      #### invite

      メンバーの招待は`rocketpool odao propose member invite`を介して行われ、3つの追加引数が必要です:

      - 招待するノードアドレス(登録されたRocket Poolノードである必要があります)
      - このノードの名前/ラベル
      - ノードを実行しているユーザーまたは組織のURLまたは連絡先情報

      例:新しいメンバーを招待するには、`rocketpool odao propose member invite
      0xabcd1234abcd1234abcd1234abcd1234abcd1234 some-user user@example.com`を実行します。

      #### kick

      Oracle DAOからメンバーをキックするには、`rocketpool odao propose member kick`コマンドを使用します。
      キックしたいメンバーを選択し、オプションの罰金(0 RPLから保証されているRPL金額、現在1750 RPLまで)を発行するよう求められます。
      この罰金が提供された場合、Oracle DAOがそのメンバーをキックすることに投票すると、メンバーのRPLボンドの一部(またはすべて)がバーンされます。

      #### leave

      Oracle DAOから自主的に辞任したい場合は、`rocketpool odao propose member leave`コマンドを使用します。
      これにより、他のメンバーがあなたの辞任要求を承認するかどうかを投票できるように、新しいプロポーザルが作成されます。
    </Tab>
    <Tab label="Oracle DAO Parameters">
      Oracle DAOの投票とメンバーシップの変更がどのように機能するかを管理するパラメータを変更するプロポーザルを行うには、`rocketpool odao propose setting`コマンドを使用します。このコマンドは次のオプションを提供します:

      ```
      NAME:
      rocketpool odao propose setting - Make an oracle DAO setting proposal

      USAGE:
      rocketpool odao propose setting command [command options] [arguments...]

      COMMANDS:
      members-quorum, q Propose updating the members.quorum setting - takes a percent, from 0 to 100
      members-rplbond, b Propose updating the members.rplbond setting - takes an RPL amount (e.g. 5000)
      proposal-cooldown, c Propose updating the proposal.cooldown.time setting - format is e.g. 1h30m45s
      proposal-vote-timespan, v Propose updating the proposal.vote.time setting - format is e.g. 1h30m45s
      proposal-vote-delay-timespan, d Propose updating the proposal.vote.delay.time setting - format is e.g. 1h30m45s
      proposal-execute-timespan, x Propose updating the proposal.execute.time setting - format is e.g. 1h30m45s
      proposal-action-timespan, a Propose updating the proposal.action.time setting - format is e.g. 1h30m45s
      scrub-period, s Propose updating the minipool.scrub.period setting - format is e.g. 1h30m45s

      OPTIONS:
      --help, -h show help
      ```

      #### members-quorum

      `rocketpool odao propose setting members-quorum value`を使用すると、Oracle DAOの役割が正規化されたと見なされる前に必要なクォーラムが変更されます。
      ここでの`value`は0から100までの浮動小数点数で、Oracle DAO投票でクォーラムに達するために必要なメンバーのパーセンテージを示します。

      ::: warning 注意
      これは、RPL価格やrETHバランス提出などの自動化された役割に必要なクォーラムには影響**しません**。これらの設定はProtocol DAO(pDAO)によって制御されており、Oracle DAOでは_ありません_。
      :::

      #### members-rplbond

      `rocketpool odao propose setting members-rplbond value`を使用して、Oracle DAOに招待された新しいメンバーのボンドとして必要なRPLの量を変更します。
      例えば、`value`に`5000`を入力すると、ボンドが5000 RPLに設定されます。
      これは既に存在するメンバーには影響しません。変更後に招待された新しいメンバーにのみ影響します。

      #### proposal-cooldown

      `rocketpool odao propose setting proposal-cooldown value`を使用して、メンバーがプロポーザルを提出する間に待機する必要があるクールダウン時間を変更します。

      `value`は、1時間30分45秒の場合`1h30m45s`のような文字列形式の期間です。
      日数は受け付けません。複数日の場合は、単純に合計時間数を使用してください。

      #### proposal-vote-timespan

      `rocketpool odao propose setting proposal-vote-timespan value`を使用して、投票が期限切れになる前に存在できる期間を変更します。

      `value`は、1時間30分45秒の場合`1h30m45s`のような文字列形式の期間です。
      日数は受け付けません。複数日の場合は、単純に合計時間数を使用してください。

      #### proposal-vote-delay-timespan

      `rocketpool odao propose setting proposal-vote-delay-timespan value`を使用して、Oracle DAOが新しいプロポーザルに投票できるようになるまで待機する必要がある期間を変更します。

      `value`は、1時間30分45秒の場合`1h30m45s`のような文字列形式の期間です。
      日数は受け付けません。複数日の場合は、単純に合計時間数を使用してください。

      #### proposal-execute-timespan

      `rocketpool odao propose setting proposal-execute-timespan value`を使用して、Oracle DAOがプロポーザルが承認された後にプロポーザルを実行(制定)する必要がある期間を変更します。
      この期間中にメンバーの誰もプロポーザルを実行しない場合、それは期限切れになり、プロポーザルは無効になります。

      `value`は、1時間30分45秒の場合`1h30m45s`のような文字列形式の期間です。
      日数は受け付けません。複数日の場合は、単純に合計時間数を使用してください。

      #### proposal-action-timespan

      特定のプロポーザルは、有効になるために実行された後にセカンダリアクションを必要とします(メンバーを招待してから実際に参加するなど)。
      `rocketpool odao propose setting proposal-action-timespan value`を使用して、プロポーザルが実行された後にこのセカンダリアクションを実行できる期間を変更します。
      ユーザーはこの期間_後_にこのアクションを実行できません。アクションが時間内に実行されない場合、プロポーザルは本質的に無効です。

      `value`は、1時間30分45秒の場合`1h30m45s`のような文字列形式の期間です。
      日数は受け付けません。複数日の場合は、単純に合計時間数を使用してください。

      #### scrub-period

      `rocketpool odao propose setting scrub-period value`を使用して、「スクラブ期間」の持続時間を変更します(新しいminipoolが`prelaunch`ステータスに入ってから`staking`ステータスに入るまでの時間)。
      Oracle DAOは、[withdrawal credentials
      exploit](https://github.com/rocket-pool/rocketpool-research/blob/master/Reports/withdrawal-creds-exploit)について新しいminipoolsをチェックし、exploitが検出された場合にそれらをスクラブして、rETH資金が盗まれないようにするこの時間があります。
      この役割は`watchtower`デーモンによって自動的に実行されます。
      チェックは通常数分で完了するため、この値は、ノード障害によりOracle DAOがコンセンサスに達することができない場合の保険バッファとして機能するように設計されています。メンバーは、問題を解決し、exploitされたminipoolをスクラブするクォーラムに達するまでこの時間があります。

      `value`は、1時間30分45秒の場合`1h30m45s`のような文字列形式の期間です。
      日数は受け付けません。複数日の場合は、単純に合計時間数を使用してください。
    </Tab>
    <Tab label="Contract Upgrades">
      コントラクトのアップグレードは現在CLIの範囲外です。
      トランザクションは手動で送信する必要があります。ネットワークへのコントラクトアップグレードのプロポーザル方法を学びたい場合は、Rocket Poolチームにお問い合わせください。
    </Tab>

  </Tabs>
</div>

## プロポーザルの表示

プロトコルの履歴のすべてのプロポーザルの簡単な概要を表示するには、`rocketpool odao proposals list`を使用します。
これにより、プロポーザルがステータスでソートされ、誰が提案したか、何をするかが表示されます。

特定のプロポーザルの詳細を表示するには、`rocketpool odao proposals details value`を使用します。ここで`value`は表示したいプロポーザルのIDです。
これにより、誰がそれを作成したか、いつ作成されたか、ペイロードボディ、何人のメンバーが賛成票を投じたか、何人のメンバーが反対票を投じたか、あなたのノードがまだそれに投票したかどうかなど、プロポーザルの情報の包括的な内訳が表示されます。

## プロポーザルへの投票

プロポーザルに投票するには、次のコマンドを使用します:

```shell
rocketpool odao proposals vote
```

これにより、どのプロポーザルに投票したいか、それに賛成票を投じたいか反対票を投じたいかを尋ねるインタラクティブなダイアログが提供されます。
プロンプトに従って慎重に投票を完了してください。

## プロポーザルの実行

プロポーザルがクォーラムに達するのに十分な賛成票を受け取った場合、Oracle DAOの任意のメンバーが次のコマンドを使用してプロポーザルを*実行*(その変更を適用)できます:

```shell
rocketpool odao proposals execute
```

これにより、実行したいプロポーザルを尋ねるインタラクティブなダイアログが提供されます。
プロンプトに従って慎重に実行を完了してください。
