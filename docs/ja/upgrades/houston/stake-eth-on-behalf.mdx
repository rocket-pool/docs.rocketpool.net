import { Tab, Tabs } from "@rspress/core/theme";
import mmNetwork from "./images/mm_network.png";
import mmNetworkMain from "./images/mm_network_main.png";

# ノードの代理でETHをステーキング

RPIP-32により、アカウントはプロトコルに登録されているRocket Poolノードの[代理でETHをステーキング](https://rpips.rocketpool.net/RPIPs/RPIP-32)できるようになります。これは、ノードオペレーターがETHを直接提供していないさまざまな状況をサポートします。

- ノードオペレーターのセキュリティ強化。事前にノードに資金を転送する必要がなく、ハードウェアウォレットから直接ステーキングできます。
- 資金の管理が信頼できるカストディアンによって管理されるStaking as a Serviceプロバイダー。
- 資金の管理がスマートコントラクトによって管理されるプロトコル統合。
- 資金の管理が財務によって管理されるDAOまたは組織。

この機能の主な目的は単一の預金者シナリオを促進することですが、複数の独立した預金者も、その上に階層化されたスマートコントラクトを作成することで、この機能を活用できることは注目に値します。Rocket Poolは、以前のAtlasリリースで、ノードの[代理でRPLをステーキング](../../node-staking/create-validator#whitelisting-an-address-to-stake-on-behalf)する機能も導入しました。

### 前提条件

資金を提供する予定のノードの[プライマリ引き出しアドレス](../../node-staking/prepare-node#setting-your-primary-withdrawal-address)が適切に設定されていることを確認してください。Houstonの後に引き出しアドレスがどのように機能するかについては、上記のリンクをたどってください。

::: tip 注意
このステップをスキップしないでください！すべてのETHボンド/報酬はプライマリ引き出しアドレスに引き出されます。言い換えれば、ノードにETHを供給するアドレスは、プライマリ引き出しアドレスとして使用する必要があります！ノードのプライマリ引き出しアドレスが管理しているウォレットに設定されていることを確認してください。
:::

Hoodi TestnetとMainnetではプロセスがわずかに異なるため、以下のタブから興味のあるネットワークを選択してください。

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnetでの準備">

      <p className="rspress-directive danger">
        <p className="rspress-directive-title">警告</p>
        テストネットワークでステーキングを練習する場合、このプロセス中に**実際のETHを提供する必要はありません**。
        代わりに**偽のテストETH**が提供されます。

        **メインネットの実際のETHをテストネットに移動しようとしないでください。永久に失われます！**
      </p>

      まだインストールしていない場合は、[MetaMask](https://metamask.io/)をインストールしてください。
      サイトの指示に従って、拡張機能をインストールし、アカウントを作成してサインインします。

      次に、ブラウザのツールバーにあるアイコンを使用してMetaMaskパネルを開きます。

      Hoodi TestnetをMetaMaskに追加する必要があります。

      左上のドロップダウンをクリックし、「Add Network」ボタンをクリックします。

      ネットワークのリストが表示されますが、Hoodiはこのリストにないため、「Add a network manually」ボタンをクリックします。

      以下の詳細を入力します:

      ```
      Network Name: Hoodi
      New RPC Url: https://rpc.hoodi.ethpandaops.io
      Chain ID: 560048
      Currency Symbol: ETH
      Block Explorer Url: https://hoodi.etherscan.io
      ```

      次に、Saveをクリックします。左上のドロップダウンにHoodiネットワークが表示されるはずです。

      Metamask拡張機能の左上にある**ネットワークドロップダウン**をクリックし、**Hoodi Test Network**を選択します:

      <img src={mmNetwork} width="100%" height="auto"/>

      MetaMaskにウォレットアドレスができたので、テストETHで埋める必要があります。
      テストネットフォーセットを使用してHoodiでテストETHを取得する方法の簡単なガイドについては、[テストネットワークでの練習](../../node-staking/testnet/overview#getting-test-eth-on-hoodi)ページにアクセスしてください。

      テストするためのHoodi ETHを入手したら、[https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node](https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node)にアクセスしてください。

      web3ブラウザが必要であるという通知、または現在のネットワークIDがサポートされていないという通知が表示される場合は、続行する前に前の手順を正しく完了していることを確認してください。
    </Tab>
    <Tab label="Ethereum Mainnetでの準備">
      まだインストールしていない場合は、[MetaMask](https://metamask.io/)をインストールしてください。

      サイトの指示に従って、拡張機能をインストールし、アカウントを作成してサインインします。

      次に、ブラウザのツールバーにあるアイコンを使用してMetaMaskパネルを開きます。

      上部のツールバーにある**ネットワークドロップダウン**をクリックし、**Ethereum Mainnet**が選択されていることを確認します:

      <img src={mmNetworkMain} width="100%" height="auto"/>

      MetaMaskにウォレットアドレスができたので、ETHをそこに転送する必要があります。

      既存のウォレットから提供するか、取引所でETHを購入する必要があります。

      ステーキングするETHを入手したら、[https://node.rocketpool.net/deposit-eth-on-behalf-of-node](https://node.rocketpool.net/deposit-eth-on-behalf-of-node)にアクセスしてください。

      web3ブラウザが必要であるという通知、または現在のネットワークIDがサポートされていないという通知が表示される場合は、続行する前に前の手順を正しく完了していることを確認してください。
    </Tab>

  </Tabs>
</div>

サイトにアクセスしたら、**connect wallet**ボタンをクリックします。利用規約とプライバシーポリシーを読んで受け入れてください。これにより、接続するさまざまな方法が有効になります。次に、**connect metamask**をクリックします。

MetaMaskは、ウェブサイトに接続するアカウントを選択するようプロンプトを表示します。
1つ選択し、いくつかの権限を確認します。ウィンドウの右上にあるウォレットアイコンをクリックすると、残高の概要が表示されます。

ここから、代理でETHを入金したいノードのアドレスを入力します。ページは次のようになります:

<img src="./images/enter_node_address.png" width="100%" height="auto" />

このボックスに希望のアドレスを貼り付けて、「Find」をクリックしてください。この例では、`0xd3e317806456102d19db283b4c2201f0ef41a296`を使用します。

<img src="./images/eth_on_behalf.png" width="100%" height="auto" />

最初のボックスに、ノードの代理で入金したいETHの量を入力します。2番目のボックスは、ETHを代理で入金するアドレスを示します。正しいアドレスと入金額を入力したことを確認してください。満足したら、「Deposit」をクリックすると、MetaMaskがトランザクションの確認を求めるウィンドウをポップアップ表示します。

確認すると、トランザクションが開始されます。
ブロックに含まれてチェーンに追加されると、委任者はsmartnodeで`rocketpool node status`コマンドを使用して新しい残高を確認できます。この残高は、Rocket Poolステーキングサイトからも確認できます。

```
The node has 0.000000 ETH in its credit balance and 8.000000 ETH staked on its behalf. 8.000000 can be used to make new minipools.
```

::: warning 注意
ノードオペレーターがあなたのETHをミニプールに入金した場合、引き出しクレデンシャルにアクセスせずにミニプールを終了することはできないため、これを念頭に置いてください！Rocket Poolステーキングサイトを使用して、ミニプールで使用されていない場合、ノードの代理でステーキングされたETHを引き出すことができます。
:::

以上です！
Rocket Poolでステーキングしています。

# ノードの代理でETHをアンステーキング

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnetでの準備">
      ノードの代理でステーキングしたETHを引き出す準備ができたら、[https://testnet.node.rocketpool.net/withdraw-eth](https://testnet.node.rocketpool.net/withdraw-eth)にアクセスしてください。ノードの[プライマリ引き出しアドレス](../../node-staking/prepare-node#setting-your-primary-withdrawal-address)としてサインインすると、見慣れたメニューが表示されます。引き出したいノードアドレスを入力するよう求められます:
    </Tab>
    <Tab label="Ethereum Mainnetでの準備">
      ノードの代理でステーキングしたETHを引き出す準備ができたら、[https://node.rocketpool.net/withdraw-eth](https://node.rocketpool.net/withdraw-eth)にアクセスしてください。ノードの[プライマリ引き出しアドレス](../../node-staking/prepare-node#setting-your-primary-withdrawal-address)としてサインインすると、見慣れたメニューが表示されます。引き出したいノードアドレスを入力するよう求められます:
    </Tab>
  </Tabs>
</div>

<img src="./images/enter_node_address.png" width="100%" height="auto" />

アドレスを入力した後、「Find」をクリックすると、そのノードの代理でステーキングしたETHを引き出すことができる次のメニューに移動します。

<img src="./images/withdraw_eth_on_behalf.png" width="100%" height="auto" />

右上で引き出し可能なETHの量を確認できます。希望の数量を入力してノードアドレスを確認した後、オレンジ色の**Withdraw ETH**ボタンをクリックして、トランザクションをネットワークに送信します。

トランザクションが確認されると、アカウントに適切な残高が表示されます！

ノードの代理でETHをステーキングする方法は以上です！プロセスが迅速で簡単だったことを願っています。

お気軽に[Discordサーバー](https://discord.gg/G46XgK264a)にお立ち寄りいただき、プロジェクトが進化するにつれて意見をお聞かせください。
