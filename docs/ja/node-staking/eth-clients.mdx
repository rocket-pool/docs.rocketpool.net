import ethereum_client_diversity from "./images/ethereum-client-diversity-aug-2025.png";

# ETH Clientの選択

Rocket PoolのSmartnodeインストーラーは、お使いのマシンを完全なEthereumノードに変換できます。適切に動作するためには、ExecutionクライアントとConsensusクライアントの両方が必要です。

ETH1/ETH2という用語は廃止されました。
これ以降のガイドでは、チェーンを**Execution Layer (ETH1)**と**Beacon ChainまたはConsensus Layer (ETH2)**と呼びます。

別のマシンでExecutionクライアントとConsensusクライアントを既に稼働させている場合(例えば、既にソロステーキングを行っている場合)、このセクションをスキップして[外部クライアントを使用したハイブリッドRocket Poolノードの設定](./install-modes#the-hybrid-configuration-with-external-clients)セクションに進んでください。

それ以外の場合は、ExecutionクライアントとConsensusクライアントの選択肢について詳しく学ぶために読み進めてください。

::: warning 注意
2025年8月現在、Beacon Chain上のクライアント分布は概ね以下のようになっています:

<img src={ethereum_client_diversity} width="100%" height="auto" />

_データ取得元: [https://clientdiversity.org](https://clientdiversity.org)_

バリデーターがどのConsensusクライアントを実行しているかのデータを取得することは、クライアントが簡単に識別できないため、比較的困難な問題です。[https://clientdiversity.org](https://clientdiversity.org)の[データ手法](https://clientdiversity.org/methodology/)ページには、異なるソースからデータを取得する方法が説明されています。追加のデータソースとして[https://ethernodes.org/](https://ethernodes.org/)もご覧ください。

現在、ノードオペレーターの圧倒的多数がExecution ClientとしてGethを、Consensus ClientとしてLighthouseまたはPrysmを使用しています。
Execution Layer(旧ETH1)とBeacon Chain(旧ETH2)の健全性をサポートする観点から、現在は異なるクライアントの使用を検討することをお勧めします。
均等なクライアントダイバーシティがネットワークの健全性にとって重要である理由について、詳しく学びたい場合は、以下の関連記事をご覧ください:

[https://clientdiversity.org/#why](https://clientdiversity.org/#why)

[https://blog.ethereum.org/2020/08/21/validated-why-client-diversity-matters/](https://blog.ethereum.org/2020/08/21/validated-why-client-diversity-matters/)

[https://our.status.im/the-importance-of-client-diversity/](https://our.status.im/the-importance-of-client-diversity/)

[https://medium.com/prysmatic-labs/eth2-mainnet-incident-retrospective-f0338814340c](https://medium.com/prysmatic-labs/eth2-mainnet-incident-retrospective-f0338814340c)

[https://dankradfeist.de/ethereum/2022/03/24/run-the-majority-client-at-your-own-peril.html](https://dankradfeist.de/ethereum/2022/03/24/run-the-majority-client-at-your-own-peril.html)

[https://eth2book.info/bellatrix/part2/incentives/diversity](https://eth2book.info/bellatrix/part2/incentives/diversity/)
:::

迅速にセットアップして稼働させたいユーザーのために、Smartnodeインストーラーは`Random Client`オプションを提供しており、これが最適な選択である可能性があります。
使用したい特定のクライアントがあるユーザーのために、Rocket Poolのインストール中に簡単に選択できる機能を提供しています。
以下のオプションは、各クライアントについて説明しており、使用したいクライアントを指定したい場合に情報に基づいた判断ができるようになっています。

## Execution Clients

Rocket Poolは4つの異なるExecution clientをサポートしています:**Geth**、**Besu**、**Nethermind**、および**Reth**です。

Execution clientを実行すると、マシン上にExecution layerブロックチェーンのコピーが保存されます。
他のECノードとピアツーピア通信で相互作用し、新しいブロックとトランザクションを記録および検証します。
ExecutionレイヤーとConsensusレイヤーが統合された現在、バリデーターを実行するには完全なExecution clientが**必須**です。

### Geth

[Geth](https://geth.ethereum.org/)(正式名称は`Go Ethereum`)は、Ethereumプロトコルの3つのオリジナル実装(C++とPythonと共に)の1つです。
Goで書かれており、完全にオープンソースでGNU LGPL v3の下でライセンスされています。

Gethは最も古く、世界中で最も広く使用されているExecution Clientです。
非常に安定していて信頼性があると評判です。

マルチスレッド対応で、CPUを最大限に活用できます。
RAM使用量は設定可能で、**Mainnetで最小約4GB**まで下げられます。
これにより、低電力システムと高電力システムの両方で使用可能です。

::: warning 注意
Gethは定期的にデータベースの**オフライン剪定**が必要です。データベースは時間とともに成長し、ディスク容量が少なくなったときに剪定しない限り、空きディスク容量をすべて消費します。
剪定が必要な頻度は、SSDのサイズによって異なります。

Gethの剪定の詳細については、[Execution Clientの剪定](./pruning)ページをご覧ください。
:::

### Besu

Hyperledger [Besu](https://besu.hyperledger.org/en/stable/)は、Apache 2.0ライセンスの下で開発された、[Java](https://en.wikipedia.org/wiki/Java_%28programming_language%29)で書かれたオープンソースのEthereumクライアントです。
Besuの最も魅力的な機能は、状態ストレージに[Bonsai Tries](https://consensys.net/blog/news/bonsai-tries-a-big-update-for-small-state-storage-in-hyperledger-besu/)を使用していることです。パフォーマンス特性の向上に加えて、Bonsai Triesは他のクライアントにはない2つの興味深い利点をBesuに与えます:

1. Besuは全く剪定する必要が_ありません_。この点で実質的にメンテナンスフリーです
2. Besuはブロックチェーン内の任意の過去のブロックを参照できますが、これは各ブロックを巻き戻すことで行われるため、遠い昔のブロックに到達するには時間がかかる場合があります。

Besuは現在、少なくとも**16 GBのRAM**を推奨していますが、8 GBで正常に実行することも可能です。

### Nethermind

[Nethermind](https://nethermind.io/nethermind-client/)は[.NET Core](https://en.wikipedia.org/wiki/.NET)で書かれています。
Execution clientの中で最速の同期速度を誇り、豊富な設定オプションを備えています。
ノードオペレーターを念頭に設計されており、役立つ多くの機能があります。

Gethと同様に、Nethermindも定期的なデータベースの剪定が必要です。
ただし、Gethとは異なり、Nethermindのデータベースは[オンラインのまま剪定できます](https://medium.com/nethermind-eth/netherminds-full-pruning-is-here-cutting-the-gordian-knot-5e3450f02de9)。
つまり、剪定するためにクライアントをオフにしてフォールバックに依存する必要はありません。
ただし、Nethermindのオンライン剪定プロセスはかなりリソースを消費するため、低電力ノードを実行しているユーザーは、プロセス中にパフォーマンスの低下が見られる可能性があります。

Nethermindは**少なくとも16GBのRAM**が必要ですが、多いほど望ましいです。

::: tip 注意
Nethermindは定期的にデータベースの剪定が必要です。データベースは時間とともに成長し、ディスク容量が少なくなったときに剪定しない限り、空きディスク容量をすべて消費します。
剪定が必要な頻度は、SSDのサイズによって異なります。

ただし、Gethとは異なり、Nethermindは剪定中も**オンラインのまま**です。
これにより、剪定中のダウンタイムがないため、ノードにとって魅力的な選択肢となります。

Nethermindの剪定の詳細については、[Execution Clientの剪定](./pruning)ページをご覧ください。
:::

### Reth

[Reth](https://reth.rs/)は[Rust](https://www.rust-lang.org/)で書かれたExecution layerクライアントで、[Erigon staged-sync](https://erigon.substack.com/p/erigon-stage-sync-and-control-flows)アーキテクチャを使用しています。
Rethは効率性、パフォーマンス、モジュール性を念頭に一から設計されています。Apache/MIT許可ライセンスの下でライセンスされており、小さく、よく抽象化され、よくテストされ、ベンチマークされたパッケージで構築されています。これにより、優れたオープンソース開発体験が提供され、Rethのコンポーネントを他のプロジェクトで使用できます。

エコシステム内で最も新しいクライアントとして、Rethは急速に進化し、採用が広がっています。RAMとCPUの要件は柔軟ですが、最も重要な要件はディスクです。優れた[TLCディスク](https://gist.github.com/yorickdowne/f3a3e79a573bf35767cd002cc977b038)の使用をお勧めします。
Rethは完全ノードには**少なくとも8 GBのRAM**、アーカイブノードには**16 GBのRAM**が必要です。

### クライアント比較表

| Client     | Type | CPU使用量 | 最小RAM使用量 | 同期時間  |
| ---------- | ---- | --------- | ------------- | --------- |
| Geth       | Full | 中程度    | 4 GB          | 中程度    |
| Besu       | Full | 中程度    | 6 GB          | 遅い      |
| Nethermind | Full | 中程度    | 16 GB         | 速い      |
| Reth       | Full | 中程度    | 8 GB          | 速い      |

## Consensus Clients

Rocket Poolのインストーラーは、現在利用可能な5つのConsensus clientをサポートしています:**Lighthouse**、**Lodestar**、**Nimbus**、**Prysm**、および**Teku**です。

これらはすべて**完全クライアント**であり、どのクライアントを選択してもConsensusネットワークの分散化に貢献します。

5つのクライアントすべてがリスクが低く、メンテナンスも少なく、検証による総報酬はほぼ同じです。
リソース要件と機能の点でわずかに異なりますが、どれを選んでも間違いはありません。

デフォルトでは、Rocket Poolインストーラーはランダムなconsensus clientを選択することを提案します。
これにより、ネットワーク全体の**多様性**に貢献できます。
これはセキュリティの観点から重要です。1つのクライアントがノードの大多数で使用され、深刻なバグや攻撃を受けた場合、それらのノードすべてが失敗し、Beacon Chain全体の安定性が脅かされる可能性があります。

### Lighthouse

[Lighthouse](https://lighthouse.sigmaprime.io/)は、[Sigma Prime](https://sigmaprime.io/)によってメンテナンスされているオープンソースのEthereum 2.0です。
Ethereum Foundation Researchチームによって定義された[Ethereum 2.0仕様](https://github.com/ethereum/consensus-specs)を実装しています。

Lighthouseは、プルーフオブステークコンセンサス、並列トランザクション実行、状態分離(シャーディング)など、ブロックチェーン研究の最前線にある技術を実装する最先端の分散システムプロジェクトです。

LighthouseはEthereum Foundationとの公式な関係はなく、Ethereumプロトコルとそれを取り巻くコミュニティの最善の利益に合致する限り、そのガイダンスに従い続けます。

Lighthouseは[Rust](https://www.rust-lang.org/)で実装されており、セキュリティと効率性に重点を置いています。

### Lodestar

[Lodestar](https://lodestar.chainsafe.io/)は、[ChainSafe Systems](https://chainsafe.io/)によってメンテナンスされている5番目のオープンソースEthereum consensusクライアントです。フラッグシップ製品は、Ethereum consensusのための本番対応のbeacon chainとvalidatorクライアントです。ソフトウェアとツールは、研究者と開発者の迅速なプロトタイピングとブラウザ使用のための頼りになるものとして独自に位置づけられています。世界中の何百万もの開発者がTypescriptに精通しており、Lodestarの高品質なコードベースはEthereumの世界への優れた入門となっています。

Lodestarは、Ethereumライトクライアントのライトクライアント研究、標準化、実装のリーダーでもあります。私たちは、ブロックチェーンから直接信頼のないデータをブラウザが利用することの重要性を実証するために、他のクライアント実装者、研究者、開発者と協力するよう努めています。

Lodestarのニッチは、実装言語である[Typescript](https://www.typescriptlang.org/)にあります。

### Nimbus

[Nimbus](https://nimbus.team/)は、使用するリソースの点でできるだけ軽量であることを目指すEthereum 2.0とEthereum 1.0の両方のクライアント実装です。
これにより、組み込みシステムやリソース制限デバイスでも優れたパフォーマンスを発揮できます。

ただし、リソース制限ハードウェアだけがNimbusが得意とする分野ではありません。
リソース消費が低いため、サーバー上で他のワークロードと一緒にNimbusを実行することが容易になります(これは、サーバーインスタンスのコストを下げようとするステーカーにとって特に価値があります)。

Nimbusは[Nim](https://nim-lang.org/)で書かれ、[Status.imチーム](https://status.im/about/)によってメンテナンスされています。

### Prysm

[Prysm](https://docs.prylabs.network/docs/getting-started/#what-is-prysm)プロジェクトは、完全に[Go プログラミング言語](https://golang.org/)で書かれたEthereum 2.0ネットワークの完全な機能の実装です。

[Prysmatic Labs](https://prysmaticlabs.com/)によって作成されたPrysmは、[Ethereum Foundation](https://ethereum.org/)を含むEthereumエコシステム全体のさまざまなチームによる継続的な集団研究開発の成果である公式[Ethereum 2.0仕様](https://github.com/ethereum/consensus-specs)を実装しています。

### Teku

[Teku](https://docs.teku.consensys.net/en/stable/)(以前はArtemisとして知られていました)は、機関のニーズとセキュリティ要件を満たすように設計および構築された[Java](https://en.wikipedia.org/wiki/Java_%28programming_language%29)ベースのEthereum consensusクライアントです。
PegaSysは、コアEthereumプラットフォームと対話するためのエンタープライズ対応クライアントとツールの構築に専念する[ConsenSys](https://consensys.net/)の部門です。

TekuはApache 2.0ライセンスでJavaで書かれており、Javaはその成熟性と普及性で知られる言語です。

### クライアント比較表

| Client     | CPU使用量 | 最小RAM使用量 | 同期時間                         |
| ---------- | --------- | ------------- | -------------------------------- |
| Lighthouse | 中程度    | 2 GB          | チェックポイント同期で即座       |
| Lodestar   | 中程度    | 4 GB          | チェックポイント同期で即座       |
| Nimbus     | 低        | 0.75 GB       | チェックポイント同期で即座       |
| Prysm      | 中程度    | 2 GB          | チェックポイント同期で即座       |
| Teku       | 中程度    | 4 GB          | チェックポイント同期で即座       |
