import { Tab, Tabs } from "@rspress/core/theme";
import mmNetwork from "./images/mm_network.png";
import mmNetworkMain from "./images/mm_network_main.png";

# ノードの代理でETHをステーク

RPIP-32により、プロトコルに登録されたRocket Poolノードの[代理でETHをステーク](https://rpips.rocketpool.net/RPIPs/RPIP-32)できるアカウントが可能になりました。これは、ノードオペレーターが直接ETHを提供しない様々な状況をサポートします。

- ノードオペレーターのセキュリティ強化により、ハードウェアウォレットから直接ステークでき、事前にノードへ資金を転送する必要がなくなります。
- カストディアンが資金の管理を行うStaking as a Serviceプロバイダー。
- スマートコントラクトが資金の管理を行うプロトコル統合。
- 財務が資金の管理を行うDAOまたは組織。

この機能の主な目的は単一預金者のシナリオを促進することですが、複数の独立した預金者もスマートコントラクトをその上に重ねることでこの機能を活用できることは注目に値します。Rocket Poolはまた、以前のAtlasリリースでノードの[代理でRPLをステーク](../../node-staking/create-validator#whitelisting-an-address-to-stake-on-behalf)する機能も導入しました。

### 前提条件

資金を提供する予定のノードの[プライマリ引出しアドレス](../../node-staking/prepare-node#setting-your-primary-withdrawal-address)を適切に設定していることを確認してください。Houston後の引出しアドレスの動作については、上記のリンクのガイドに従ってください。

::: tip 注意
このステップをスキップしないでください！すべてのETHボンド/報酬はプライマリ引出しアドレスに引き出されます。つまり、ノードにETHを供給するアドレスをプライマリ引出しアドレスとして使用すべきです！ノードのプライマリ引出しアドレスが管理権限を持つウォレットに設定されていることを確認してください。
:::

プロセスはHoodi TestnetとMainnetで若干異なりますので、以下のタブから興味のあるネットワークを選択してください。

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnetでの準備">

      <p className="rspress-directive danger">
        <p className="rspress-directive-title">警告</p>
        テストネットワークでステーキングを練習する場合、このプロセス中に**実際のETHを提供する必要はありません**。
        代わりに**偽のテストETH**が提供されます。

        **メインネット上の実際のETHをテストネットに移動しようとすると、永久に失われます！**
      </p>

      まだインストールしていない場合は、[MetaMask](https://metamask.io/)をインストールすることから始めます。
      サイトの指示に従って、拡張機能をインストールし、アカウントを作成してサインインしてください。

      次に、ブラウザツールバーのアイコンを使用してMetaMaskパネルを開きます。

      MetaMaskにHoodi Testnetを追加する必要があります。

      左上のドロップダウンをクリックして「ネットワークを追加」ボタンをクリックします。

      ネットワークのリストが表示されますが、Hoodiはこのリストにないため、「ネットワークを手動で追加」ボタンをクリックします。

      以下の詳細を入力します。

      ```
      Network Name: Hoodi
      New RPC Url: https://rpc.hoodi.ethpandaops.io
      Chain ID: 560048
      Currency Symbol: ETH
      Block Explorer Url: https://hoodi.etherscan.io
      ```

      次に「保存」をクリックします。左上のドロップダウンにHoodiネットワークが表示されるはずです。

      Metamask拡張機能の左上にある**ネットワークドロップダウン**をクリックし、**Hoodi Test Network**を選択します。

      <img src={mmNetwork} width="100%" height="auto"/>

      MetaMaskにウォレットアドレスができたので、テストETHで満たす必要があります。
      [テストネットワークでの練習](../../node-staking/testnet/overview#getting-test-eth-on-hoodi)ページに移動して、テストネットフォーセットを使用してHoodiでテストETHを取得する方法の簡単なガイドをご覧ください。

      テスト用のHoodi ETHを取得したら、[https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node](https://testnet.node.rocketpool.net/deposit-eth-on-behalf-of-node)にアクセスします。

      web3ブラウザが必要という通知、または現在のネットワークIDがサポートされていないという通知が表示される場合は、続行する前に前の手順を正しく完了していることを確認してください。
    </Tab>
    <Tab label="Ethereum Mainnetでの準備">
      まだインストールしていない場合は、[MetaMask](https://metamask.io/)をインストールすることから始めます。

      サイトの指示に従って、拡張機能をインストールし、アカウントを作成してサインインしてください。

      次に、ブラウザツールバーのアイコンを使用してMetaMaskパネルを開きます。

      上部のツールバーにある**ネットワークドロップダウン**をクリックし、**Ethereum Mainnet**が選択されていることを確認します。

      <img src={mmNetworkMain} width="100%" height="auto"/>

      MetaMaskにウォレットアドレスができたので、ETHを転送する必要があります。

      既存のウォレットから提供するか、取引所でETHを購入する必要があります。

      ステークするETHを取得したら、[https://node.rocketpool.net/deposit-eth-on-behalf-of-node](https://node.rocketpool.net/deposit-eth-on-behalf-of-node)にアクセスします。

      web3ブラウザが必要という通知、または現在のネットワークIDがサポートされていないという通知が表示される場合は、続行する前に前の手順を正しく完了していることを確認してください。
    </Tab>

  </Tabs>
</div>

サイトにアクセスしたら、**ウォレットを接続**ボタンをクリックします。利用規約とプライバシーポリシーを読んで受け入れてください。これにより様々な接続方法が有効になり、その後**MetaMaskを接続**をクリックします。

MetaMaskはウェブサイトに接続するアカウントを選択するよう促します。
1つを選択し、いくつかの権限を確認します。ウィンドウの右上にあるウォレットアイコンをクリックすると、残高の概要が表示されます。

ここから、代理でETHを預金したいノードのアドレスを入力します。ページは次のように表示されるはずです。

<img src="./images/enter_node_address.png" width="100%" height="auto" />

このボックスに希望のアドレスを貼り付けて、検索をクリックします。この例では、`0xd3e317806456102d19db283b4c2201f0ef41a296`を使用します。

<img src="./images/eth_on_behalf.png" width="100%" height="auto" />

最初のボックスに、ノードの代理で預金したいETHの量を入力します。2番目のボックスは、代理でETHを預金するアドレスを示しています。正しいアドレスと預金を入力したことを確認してください。満足したら、Depositをクリックすると、MetaMaskがトランザクションの確認を求めるウィンドウをポップアップ表示します。

確認すると、トランザクションが開始されます。
ブロックに含まれてチェーンに追加されると、委任者はsmartnodeでコマンド`rocketpool node status`を使用して新しい残高を確認できます。この残高は、Rocket Poolステーキングサイトでも表示できます。

```
The node has 0.000000 ETH in its credit balance and 8.000000 ETH staked on its behalf. 8.000000 can be used to make new minipools.
```

::: warning 注意
ノードオペレーターがあなたのETHをミニプールに預金した場合、引出し認証情報にアクセスせずに彼らのミニプールを終了することはできませんので、これを覚えておいてください！ノードの代理でステークされたETHがミニプールで使用されていない場合は、Rocket Poolステーキングサイトを使用して引き出すことができます。
:::

以上です！
これでRocket Poolでステーキングしています。

# ノードの代理でETHをアンステーク

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnetでの準備">
      ノードの代理でステークしたETHを引き出す準備ができたら、[https://testnet.node.rocketpool.net/withdraw-eth](https://testnet.node.rocketpool.net/withdraw-eth)にアクセスします。ノードの[プライマリ引出しアドレス](../../node-staking/prepare-node#setting-your-primary-withdrawal-address)としてサインインすると、おなじみのメニューが表示されます。引き出し元のノードアドレスを入力するよう求められます。
    </Tab>
    <Tab label="Ethereum Mainnetでの準備">
      ノードの代理でステークしたETHを引き出す準備ができたら、[https://node.rocketpool.net/withdraw-eth](https://node.rocketpool.net/withdraw-eth)にアクセスします。ノードの[プライマリ引出しアドレス](../../node-staking/prepare-node#setting-your-primary-withdrawal-address)としてサインインすると、おなじみのメニューが表示されます。引き出し元のノードアドレスを入力するよう求められます。
    </Tab>
  </Tabs>
</div>

<img src="./images/enter_node_address.png" width="100%" height="auto" />

アドレスを入力した後、「検索」をクリックすると、そのノードの代理でステークしたETHを引き出せる次のメニューに移動します。

<img src="./images/withdraw_eth_on_behalf.png" width="100%" height="auto" />

右上で引き出し可能なETHの量を確認できます。希望の数量を入力してノードアドレスを確認したら、オレンジ色の**Withdraw ETH**ボタンをクリックして、トランザクションをネットワークに送信します。

トランザクションが確認されると、アカウントに適切な残高が表示されます！

ノードの代理でETHをステーキングするのはこれだけです！プロセスが迅速で簡単だったことを願っています。

[私たちのDiscordサーバー](https://discord.gg/G46XgK264a)に立ち寄って、ご意見をお聞かせいただき、プロジェクトの進化を追跡してください。
