import { Tab, Tabs } from "@rspress/core/theme";

# Mevcut Bir Cüzdanı İçe Aktarma / Kurtarma

Düğümünüz için kullanmak istediğiniz bir cüzdanınız varsa veya daha önce Smartnode ile oluşturduğunuz bir cüzdanı kurtarıyorsanız, bu kılavuz size içe aktarma / kurtarma sürecinde yardımcı olacaktır.

Lütfen aşağıdaki bölümlerden uygun seçeneği seçin.

## Smartnode Cüzdanını Kurtarma

Smartnode kullanarak düğüm cüzdanınızı oluşturduysanız ve sadece yeni bir makinede kurtarıyorsanız, süreç oldukça basittir.
Smartnode yazılımını halihazırda kurduğunuzdan emin olun ve ardından kurulduktan sonra basitçe şu komutu çalıştırın:

```shell
rocketpool wallet recover
```

::: warning NOT
Herhangi bir nedenle cüzdanı kurtarmak istiyorsanız ancak düğümünüzün minipool'larına bağlı doğrulayıcı anahtarlarından _herhangi birini kurtarmak istemiyorsanız_, yeniden oluşturma sürecini atlamak için `-k` bayrağını belirtebilirsiniz:

```shell
rocketpool wallet recover -k
```

Bu bayrağı belirtmezseniz, Smartnode minipool'larınız için doğrulayıcı anahtarlarını kurtarmaya çalışacaktır; ancak bunun Execution istemciniz senkronizasyonu bitirene kadar çalışmayacağını unutmayın.
Ne zaman bittiğini görmek için log dosyasını izleyin; bittiğinde bu adımı çalıştırabilirsiniz.
:::

Bu önce cüzdanınızı şifrelemek için kullanmak istediğiniz bir şifre isteyecektir.
Bundan sonra, **24 kelimelik anımsatıcı kurtarma ifadenizi** isteyecektir.
Dikkatli girin - güvenlik için ekranda gösterilmeyecektir ve yazarken hata yapmak çok kolaydır, bu yüzden acele etmeyin.

Bitirdiğinizde, buna benzer bir çıktı görmelisiniz:

```shell
$ rocketpool wallet recover

Please enter a password to secure your wallet with:

Please confirm your password:

Please enter your recovery mnemonic phrase:

Recovering node wallet...
The node wallet was successfully recovered.
Node account: <your wallet address>
No validator keys were found.
```

Herhangi bir hata görmüyorsanız, cüzdanınız ve doğrulayıcılarınız kurtarılacaktır.

Bitirdiğinizde, Docker ve Hybrid mode kullanıcıları için Validator istemcisini aşağıdaki komutla yeniden başlattığınızdan emin olun:

```shell
docker restart rocketpool_validator
```

**Native mode** kullanıcıları sadece Validator container süreçlerini yeniden başlatmak zorunda kalacaklardır.

Bu, VC'nin yeni geri yüklenen doğrulayıcı anahtarlarının tümünü almasını sağlayacaktır.

## Mevcut Bir Adresi Düğüm Cüzdanı Olarak İçe Aktarma

Bir düğüm için kullanmak istediğiniz bir adresiniz varsa, ancak bunu Smartnode ile oluştur_madıysanız_ (örneğin, MetaMask veya bir donanım cüzdanı ile oluşturduysanız), takip edilecek bölüm budur.

::: danger UYARI
Bunu yaparak, adresiniz bir **hot wallet** haline gelecektir.
Özel anahtar düğüm makinenizde saklanacaktır.

Donanım cüzdanı gibi soğuk bir cüzdan olan bir adresi içe aktarıyorsanız, **donanım cüzdanının sağladığı korumanın artık mevcut olmayacağını** unutmayın!

Bu cüzdanı _herhangi bir başka kripto para birimi faaliyeti için kullanıyorsanız_, **düğümünüze aktarmadan önce tüm fonlarını ayrı bir adrese (örneğin farklı bir donanım cüzdanı) aktarmalısınız! Bu adreste yalnızca düğümünüzün gaz maliyetleri için yeterli ETH bırakın (genellikle 0.5 ETH yeterlidir).**

Lütfen adresinizi düğüm cüzdanı olarak içe aktarmadan önce [Securing your Node](./securing-your-node) kılavuzundaki adımları izleyerek makinenizi mümkün olduğunca güvence altına aldığınızdan emin olun.
:::

Bu yetenek yalnızca Smartnode **v1.4.3 veya üzeri** ile kullanılabilir.
Daha düşük bir sürümünüz varsa, önce yükseltmeniz gerekecektir.

Bu çok adımlı bir süreçtir, bu nedenle aşağıdaki bölümleri dikkatle izleyin.

### Adım 1: Harici Olarak Oluşturulmuş Doğrulayıcı Anahtarlarını Ekleme

**İçe aktardığınız adrese bağlı mevcut minipool'larınız yoksa, bu adımı atlayabilirsiniz.**

Adresiniz halihazırda bir Rocket Pool düğüm cüzdanı olarak kaydedildiyse (örneğin **Allnodes** gibi bir hizmet aracılığıyla) ve halihazırda aktif minipool'ları varsa ve bunları adresinizle birlikte Smartnode yığınına aktarmak istiyorsanız, bunların her biri için karşılık gelen doğrulayıcıların özel keystore dosyalarını sağlamanız gerekecektir.
Bu dosyalar kendi seçtiğiniz bir şifre ile şifrelenecektir, bu nedenle her dosya için o şifreye de ihtiyacınız olacaktır.

İçe aktarmak için şu anda düğümünüzü çalıştıran hizmetten bu dosyaları almanız gerekir.
Bazı hizmet sağlayıcılar talep üzerine bu dosyaları alabilir.
Allnodes kullanıyorsanız, bu dosyaları ilk kurulum süreciniz sırasında alabilirsiniz ancak **minipool oluşturma sırasında kaydetmediyseniz gelecekte bunları geri alamayacaksınız.**

Kurulum modunuzu seçin ve aşağıdaki adımları izleyin.

<div className="p-3">
  <Tabs>
    <Tab label="Docker and Hybrid Mode">
      Önce, Smartnode'u `rocketpool service start` ile başlattığınızdan emin olun.
      Bu, doğrulayıcılarınız için şifrelenmiş keystore dosyalarını tutmak için kullanılabilecek özel bir klasör oluşturacaktır.

      Varsayılan olarak, klasör `~/.rocketpool/data/custom-keys` konumundadır.
      Kurulumunuzu veya veri dizinlerinizi özelleştirdiyseniz, `custom-keys` klasörünü bulmak için uygun şekilde değiştirin.

      Bu klasörün mevcut olduğundan emin olmak için bir dosya gezgini veya `ls` komutu ile kontrol edin.
      Değilse, sorun değil - sadece aşağıdaki komutla klasörü oluşturun:

      ```shell
      mkdir ~/.rocketpool/data/custom-keys
      ```
    </Tab>
    <Tab label="Native Mode">
      Smartnode'unuzun `data` klasörünün içinde `custom-keys` adlı bir klasör oluşturun (örneğin, `/srv/rocketpool/data/custom-keys`).
    </Tab>

  </Tabs>
</div>

Ardından, doğrulayıcı keystore dosyalarının her birini bu klasöre yerleştirin.
Dosyaların adları önemli değildir, ancak [EIP-2335](https://eips.ethereum.org/EIPS/eip-2335#scrypt-test-vector) formatına uygun JSON dosyaları olmalıdır.

Smartnode, sonraki adımlarda buraya yerleştirdiğiniz herhangi bir keystore dosyası için bu dizinde arama yapacaktır.

::: warning NOT
İçe aktarma işlemi _yalnızca_ içe aktardığınız adrese kayıtlı minipool'lara bağlı doğrulayıcı anahtarlarını arayacaktır.
Solo staking doğrulayıcıları gibi diğer doğrulayıcı anahtarlarını Smartnode yığını tarafından yönetilen Validator istemcisine aktarmak için bu işlemi **kullanamazsınız**.

Bunu yapmakla ilgileniyorsanız lütfen [Reverse Hybrid Mode](./advanced-config#allowing-external-validator-clients-to-connect-to-the-smartnode)'da çalıştırma belgelerine bakın.
:::

### Adım 2 (İsteğe Bağlı): Adresin İçe Aktarma Testini Yapma

**Düğüm cüzdanınızın özel anahtarını gerçekten yeniden oluşturmadan veya doğrulayıcı anahtarlarınızı içe aktarmadan** doğru anımsatıcı ve şifrelere sahip olduğunuzdan emin olmak için kurtarma sürecini test etmek isterseniz, bunu aşağıdaki komutla yapabilirsiniz:

```shell
rocketpool wallet test-recovery -a 0x1234abcd...
```

Burada `0x1234abcd...`, `0x` önekiyle başlayan içe aktarmak istediğiniz adrestir.
**Adresiniz için özel anahtarı içe aktarmak için anımsatıcı ifadenize ihtiyacınız olacak.**

::: tip İPUCU
Herhangi bir nedenle cüzdanı kurtarmak istiyorsanız ancak minipool'larınız için doğrulayıcı anahtarlarından _herhangi birini kurtarmak istemiyorsanız_, doğrulayıcı anahtarı kurtarma sürecini atlamak için `-k` bayrağını belirtebilirsiniz.
Örneğin:

```shell
rocketpool wallet test-recovery -a 0x1234abcd... -k
```

:::

Smartnode, sağladığınız adrese karşılık gelen ayarları bulmak için en popüler türetme yollarını (örneğin Ledger Live, MyEtherWallet, Trezor ve Smartnode yığını tarafından kullanılanlar) ve adres indekslerini otomatik olarak arayacaktır.

::: tip İPUCU
Özel bir türetme yolunuz varsa, belirtmek için `-d` bayrağını kullanın.
Örneğin:

```shell
rocketpool wallet test-recovery -d "m/44'/60'/0'/%d"
```

Farklı indeksleri kullanmak için yinelenebilecek yolun bölümü için `%d` kullanın.

Özel bir adres indeksiniz varsa, belirtmek için `-i` bayrağını kullanın.
Örneğin, adresiniz standart türetme yolundaki 6. adres idiyse, şunu kullanabilirsiniz:

```shell
rocketpool wallet test-recovery -i 5
```

Gerekirse hem `-d` hem de `-i` bayraklarını aynı anda kullanabilirsiniz.
:::

First, you'll be prompted for your address's mnemonic phrase:

```
Please enter the number of words in your mnemonic phrase (24 by default):
24

Enter Word Number 1 of your mnemonic:
```

Enter it carefully, and the Smartnode will begin searching through all of the standard options to find it (unless you explicitly specified them using the `-d` and/or `-i` flags).

Next, if you have private keystore files to import from Step 1, you will be prompted for the passwords to each of those keystore files:

```
It looks like you have some custom keystores for your minipool's validators.
You will be prompted for the passwords each one was encrypted with, so they can be loaded into the Validator Client that Rocket Pool manages for you.

Please enter the password that the keystore for <validator pubkey> was encrypted with:
```

They will be organized by the **pubkey** list, **not the filenames**.
Ensure you know which file corresponds to which validator pubkey so you enter the correct passwords.

Once you've done this, the test recovery process will proceed and report back on whether it succeeded or failed:

```
Searching for the derivation path and index for wallet 0x1234abcd...
NOTE: this may take several minutes depending on how large your wallet's index is.
The node wallet was successfully recovered.
Derivation path: m/44'/60'/0'/0/%d
Wallet index:    0
Node account:    0x1234abcd...
Validator keys:
<validator pubkey>
```

The above indicates a successful test recovery.

### Adım 3: Adresi İçe Aktarma

::: danger UYARI
Adresiniz kendi barındırdığınız Smartnode tarafından yönetil_meyen_ bir Rocket Pool düğümü ise (örneğin **Allnodes** gibi bir harici hizmet tarafından barındırılıyorsa), **bu içe aktarma sürecine başlamadan önce** düğümünüzü çalıştıran hizmetle koordine etmeniz ve kendi barındırdığınız sisteme geçmek istediğinizi bildirmeniz **KRİTİK ÖNEM TAŞIR**.

Düğümünüz için doğrulamayı kapattıklarını ve **ASLA tekrar başlatmayacaklarını** **ONAYLAMANIZ GEREKİR** ve [https://beaconcha.in](https://beaconcha.in) gibi bir Blockchain gezgini kullanarak doğrulayıcılarınızın artık tasdik etmediğini manuel olarak onaylamanız gerekir.
Güvenli bir şekilde geçiş yapabileceğinizden emin olmak için her doğrulayıcının **EN AZ 2 TASDİKİ** kaçırdığını onaylamanız gerekir.
Aksi takdirde, her ikiniz de aynı anda tasdik edeceksiniz ve **MİNİPOOL'LARİNİZ CEZALANDIRILACAK!**

Smartnode, içe aktarma işlemine devam etmenize izin vermeden önce bunu yaptığınızı onaylamanızı gerektirecektir.
:::

If the test recovery succeeded, or if you skipped it, you will next import the wallet and regenerate all of its associated key files.
The process is exactly the same as the above, but use the `recover` command instead of the `test-recovery` command:

```shell
rocketpool wallet recover -a 0x1234abcd...
```

When you run this command, you will first be prompted for a password to encrypt your imported node wallet with.

```
Please enter a password to secure your wallet with:

Please confirm your password:
```

After that, the mnemonic and custom validator keystore password prompts will proceed as they did before.

Once you've entered all of this information, the Smartnode will recover your address and (if not disabled) the custom validator keys for your minipools:

```
Searching for the derivation path and index for wallet 0x1234abcd...
NOTE: this may take several minutes depending on how large your wallet's index is.
The node wallet was successfully recovered.
Derivation path: m/44'/60'/0'/0/%d
Wallet index:    0
Node account:    0x1234abcd...
Validator keys:
<validator pubkey>
```

Your address's private key will now be stored in the `data/wallet` file (e.g. `~/.rocketpool/data/wallet`), and the password for it will be stored in the `data/password` file (e.g. `~/.rocketpool/data/password`).

The private keys for each of your validators will be stored in the `data/validators` folders for each of the Consensus clients that the Smartnode supports.

::: danger NOT
Bu şekilde bir adres içe aktararak, doğrulayıcı anahtarları düğüm cüzdanınızdan türetil_memiştir_ ve bu nedenle normal bir düğüm cüzdanında olduğu gibi sadece `rocketpool wallet recover` komutunu çalıştırarak daha sonra kurtarıla**mazlar**.

Bu cüzdanı tekrar kurtarmanız veya içe aktarmanız gerekirse, aynı süreci izlemeniz gerekecektir, bu da **bu doğrulayıcı özel keystore'larını ve şifrelerini güvenli bir yerde yedeklemeniz gerektiği** anlamına gelir.

Onları kaybederseniz, **artık bu doğrulayıcı anahtarlarını kurtaramayacaksınız!**
:::

### Adım 4: Temizlik

Bu noktada, artık `data/custom-keys` dizinindeki tüm özel keystore dosyalarını silebilirsiniz.
Smartnode bunları halihazırda içe aktarmış ve onlara rastgele şifreler atamış olacaktır, bu nedenle bu keystore dosyaları artık gerekli değildir.

Son olarak, `data` dizininizde (örneğin `~/.rocketpool/data/custom-key-passwords`) `custom-key-passwords` adlı bir dosya **olmadığından** emin olun.
Smartnode bu geçici dosyayı yalnızca kurtarma işlemi sırasında oluşturacak ve kurtarma işleminin başarılı olup olmadığına bakılmaksızın otomatik olarak kaldıracaktır; herhangi bir nedenle kaldıramadıysa, konsol çıktısında sizi uyaracaktır.
Ancak, çok dikkatli olmak asla zarar vermez.

## Sonraki Adımlar

Düğüm cüzdanınızı içe aktardıktan veya kurtardıktan sonra, [Intro to the Command Line Interface](./cli-intro) kılavuzundaki sonraki adımları izleyin.
