import { Tab, Tabs } from "@rspress/core/theme";

# Docker ile Standart Rocket Pool Node Oluşturma

Bu bölümde, standart [Docker](https://www.docker.com/resources/what-container) tabanlı kurulum kullanarak Rocket Pool Smartnode yığınını kurma sürecini adım adım anlatacağız.
Bu kurulum, eksiksiz bir node çalıştırmak için ihtiyacınız olan her şeyi kuracak ve yapılandıracaktır:

- Rocket Pool **Smartnode** yazılımı
- Tercih ettiğiniz bir **Execution** (eski adıyla ETH1) istemcisi veya halihazırda yönettiğiniz mevcut bir istemciye bağlantı
- Tercih ettiğiniz bir **Consensus** (eski adıyla ETH2) istemcisi veya halihazırda yönettiğiniz mevcut bir istemciye bağlantı
- Beacon Chain doğrulama görevlerinizi yerine getirecek bir **Validator** istemcisi
- (İsteğe bağlı) performans ve sağlık metriklerini yakalamak için bir **izleme yığını**

Tek yapmanız gereken neyi çalıştırmak istediğinizi söylemek!

::: tip NOT
Aşağıdaki talimatlar, komutları girmek ve çalıştırmak için sisteminizin **terminal**ini kullanmanızı gerektirir.
Node makinesine SSH üzerinden bağlıysanız, bunu zaten yapıyorsunuz demektir.
Node makinesi üzerindeyseniz ve bir masaüstü arayüzü kullanıyorsanız, aşağıdaki komutları çalıştırmak için bir terminal penceresi açmanız gerekecektir.
Bunu nasıl yapacağınızı bilmiyorsanız, işletim sisteminizin talimatlarına bakın.
:::

## Sürece Genel Bakış

Üst düzey olarak, Rocket Pool'u kurmak için gerekenler şunlardır:

1. Rocket Pool komut satırı arayüzünü (CLI) indirin
1. CLI'yı kullanarak Smartnode yığınını kurun
3. Smartnode yığınını terminalde kullanımı kolay bir arayüz ile yapılandırın
4. Tamamdır!

## Başlamadan Önce

::: warning
Ubuntu kullanıyorsanız, Rocket Pool'u kurmadan önce docker'ın işletim sistemiyle birlikte kurulmadığını iki kez kontrol etmeniz önerilir.

Ubuntu yükleyicisi docker'ı snap paket yöneticisinden alır ve bu, Smartnode tarafından kurulan docker sürümüyle çakışacaktır.

`snap list` komutunu çalıştırın ve `docker`'ın kurulmadığından emin olun.

Örneğin, docker'ın kurulmadığı bir makinede çıktı şu şekildedir:

```
Name    Version        Rev    Tracking       Publisher   Notes
core20  20230308       1852   latest/stable  canonical✓  base
lxd     5.0.2-838e1b2  24322  5.0/stable/…   canonical✓  -
snapd   2.59.1         18933  latest/stable  canonical✓  snapd
```

Ve kuruluysa çıktı şu şekildedir:

```
Name    Version        Rev    Tracking       Publisher   Notes
core20  20230308       1852   latest/stable  canonical✓  base
docker  20.10.17       2746   latest/stable  canonical✓  -
lxd     5.0.2-838e1b2  24322  5.0/stable/…   canonical✓  -
snapd   2.59.1         18933  latest/stable  canonical✓  snapd
```

Eğer `snap list` çıktısında görüyorsanız, şu komutlarla kaldırdığınızdan emin olun:

```shell
sudo systemctl stop snap.docker.dockerd.service

sudo snap remove --purge docker
```

Bundan sonra, makineyi yeniden başlatmanız önerilir (`sudo systemctl reboot`)
:::

## Rocket Pool CLI'sını İndirme

CLI'yı indirme talimatları, işletim sisteminize göre değişir.

::: warning NOT
Aşağıdaki talimatları **Rocket Pool node'unuz için kullanacağınız makinede** gerçekleştirmelisiniz.
Node makinenize doğrudan bağlı bir klavye ve monitör kullanmıyorsanız, uzaktan erişmeniz (örneğin SSH ile) ve bu komutları bu uzak bağlantı üzerinden çalıştırmanız gerekecektir.
:::

<div className="p-3">
  <Tabs>
    <Tab label="Linux">
      Linux'ta, CLI uygulamasını tutacak yeni bir klasör oluşturarak başlayın:

      ```shell
      mkdir -p ~/bin
      ```

      Ardından, CLI'yı indirin.
      Bu, sisteminizin kullandığı mimariye bağlıdır.

      <p className="rspress-directive tip">
        <p className="rspress-directive-title">İPUCU</p>
        CPU mimarinizi bilmiyorsanız, bulmak için aşağıdaki komutu çalıştırabilirsiniz:

        ```shell
        uname -m
        ```

        Bu komutun çıktısı mimarinizi yazdıracaktır.
        **`x86_64`'ün `x64` ve `amd64` ile aynı olduğunu unutmayın.**
        **`aarch64`'ün `arm64` ile aynı olduğunu unutmayın.**
      </p>

      `x64` sistemler için (çoğu normal bilgisayar):

      ```shell
      wget https://github.com/rocket-pool/smartnode/releases/latest/download/rocketpool-cli-linux-amd64 -O ~/bin/rocketpool
      ```

      `arm64` sistemler için:

      ```shell
      wget https://github.com/rocket-pool/smartnode/releases/latest/download/rocketpool-cli-linux-arm64 -O ~/bin/rocketpool
      ```

      Çalışma izni olması için yürütülebilir olarak işaretleyin:

      ```shell
      chmod +x ~/bin/rocketpool
      ```

      Ardından, **oturumu kapatıp tekrar açın** (veya SSH'ı kapatıp yeniden bağlanın) ya da basitçe yeniden başlatın.
      Bunun nedeni, CLI'yı kaydettiğiniz yolun (`~/bin`) henüz sisteminizin `PATH` değişkeninde (sisteminizin çalıştırılabilir dosyaları aradığı yerler listesi) olmayabilmesidir.
      Oturumu kapatıp açmak onu oraya ekleyecektir.

      Şimdi, `--version` bayrağı ile çalıştırarak test edin.
      Şöyle bir çıktı görmelisiniz:

      ```shell
      rocketpool --version
      ```

      ```shell
      rocketpool version 1.18.10
      ```

      <p className="rspress-directive tip">
        <p className="rspress-directive-title">İPUCU</p>
        Eğer şöyle bir hata mesajı görürseniz,

        ```shell
        -bash: /home/user/rocketpool: cannot execute binary file: Exec format error
        ```

        bu, yukarıda yanlış sürümü indirdiğiniz anlamına gelir.
        Lütfen yukarıdaki ipucundaki komutu kullanarak sisteminizin **x64** mi yoksa **arm64** mü olduğunu kontrol edin ve uygun sürümü indirin.
        Sisteminiz bunların hiçbiri değilse, Rocket Pool'u çalıştıramayacaksınız.
      </p>
    </Tab>
    <Tab label="MacOS">
      macOS'ta, makineniz için CLI'yı aşağıdaki komutla indirin.

      <p className="rspress-directive tip">
        <p className="rspress-directive-title">İPUCU</p>
        CPU mimarinizi bilmiyorsanız, bulmak için aşağıdaki komutu çalıştırabilirsiniz:

        ```shell
        uname -m
        ```

        Bu komutun çıktısı mimarinizi yazdıracaktır.
        **`x86_64`'ün `x64` ve `amd64` ile aynı olduğunu unutmayın.**
        **`aarch64`'ün `arm64` ile aynı olduğunu unutmayın.**
      </p>

      `x64` sistemler için (çoğu Mac):

      ```shell
      curl -L https://github.com/rocket-pool/smartnode/releases/latest/download/rocketpool-cli-darwin-amd64 > /usr/local/bin/rocketpool
      ```

      `arm64` sistemler için, M1'li Mac mini gibi:

      ```shell
      curl -L https://github.com/rocket-pool/smartnode/releases/latest/download/rocketpool-cli-darwin-arm64 > /opt/homebrew/bin/rocketpool
      ```

      `x64` sistemler için (çoğu Mac):
      Çalışma izni olması için yürütülebilir olarak işaretleyin:

      ```shell
      chmod +x /usr/local/bin/rocketpool
      ```

      `arm64` sistemler için, M1'li Mac mini gibi:
      Çalışma izni olması için yürütülebilir olarak işaretleyin:

      ```shell
      chmod +x /opt/homebrew/bin/rocketpool
      ```

      Şimdi, `--version` bayrağı ile çalıştırarak test edin.
      Şöyle bir çıktı görmelisiniz:

      ```shell
      rocketpool --version
      ```

      ```
      rocketpool version 1.18.10
      ```

      <p className="rspress-directive tip">
        <p className="rspress-directive-title">İPUCU</p>
        Eğer şöyle bir hata mesajı görürseniz,

        ```shell
        /usr/local/bin/rocketpool: Exec format error
        ```

        bu, yukarıda yanlış sürümü indirdiğiniz anlamına gelir.
        Lütfen yukarıdaki ipucundaki komutu kullanarak sisteminizin x64 mi yoksa arm64 mü olduğunu kontrol edin ve uygun sürümü indirin.
        Sisteminiz bunların hiçbiri değilse, Rocket Pool'u çalıştıramayacaksınız.
      </p>
    </Tab>

  </Tabs>
</div>

## Smartnode Yığınını Kurma

Artık CLI kurulu olduğuna göre, Smartnode yığınını dağıtabilirsiniz.
Bu, sisteminizi Docker, [docker-compose](https://docs.docker.com/compose/) ile hazırlayacak ve Smartnode dosyalarını yükleyerek kullanıma hazır hale getirecektir.
Henüz hiçbir şey çalıştırmayacaktır; bu daha sonra gelir.

Smartnode yığınını dağıtmak için, node makinenizde aşağıdaki komutu çalıştırmanız gerekir (yerel olarak oturum açarak veya SSH gibi uzaktan bağlanarak):

```shell
rocketpool service install
```

Bu, Smartnode yığınının en son sürümünü alacak ve kuracaktır.
Şöyle bir çıktı görmelisiniz (_sonunda yazdırılacak en son sürüm için bazı sürüm notlarının üstünde_):

<img src="./images/rp-install-screen.png" width="100%" height="auto" />

Herhangi bir hata mesajı yoksa, kurulum başarılı olmuştur.
Varsayılan olarak, kullanıcı hesabınızın ana klasörü içindeki `~/.rocketpool` dizinine yerleştirilecektir.

::: warning NOT
Smartnode yükleyicisinin tüm platformlarda `docker` ve `docker-compose`'u otomatik olarak kuramayacağını unutmayın.
Kurulum sırasında şöyle bir hata mesajı alırsanız:

```
Automatic dependency installation for the Mint operating system is not supported.
Please install docker and docker-compose manually, then try again with the '-d' flag to skip OS dependency installation.
Be sure to add yourself to the docker group with 'sudo usermod -aG docker $USER' after installing docker.
Log out and back in, or restart your system after you run this command.
```

O zaman bu iki şeyi manuel olarak kurmanız yeterlidir.

Docker, genel [kurulum talimatlarını burada](https://docs.docker.com/engine/install/) sağlar.

Docker-compose, genel [kurulum talimatlarını burada](https://docs.docker.com/compose/install/) sağlar.

Her ikisi de kurulduğunda, kullanıcı hesabınıza Docker'ı kullanma izni verdiğinizden emin olun:

```shell
sudo usermod -aG docker $USER
```

Son olarak, Docker kurulumunu atlamak için yükleyiciyi `-d` bayrağı ile yeniden çalıştırın:

```shell
rocketpool service install -d
```

:::

Bundan sonra, ayarların etkili olması için **oturumu kapatıp tekrar açın veya SSH oturumunuzu yeniden başlatın**.

Bu tamamlandığında, Smartnode yığını çalışmaya hazır olacaktır.

## Docker'ın Depolama Konumunu Yapılandırma

Varsayılan olarak, Docker tüm konteyner verilerini işletim sisteminizin sürücüsünde saklayacaktır.
Bazı durumlarda, bu istediğiniz şey değildir.

::: tip NOT
Bu varsayılan davranıştan memnunsanız, bir sonraki bölüme atlayın.
:::

Bunu yapmak için, root kullanıcısı olarak `/etc/docker/daemon.json` adında yeni bir dosya oluşturun:

```shell
sudo nano /etc/docker/daemon.json
```

Bu başta boş olacaktır, bu normaldir. İçerik olarak şunu ekleyin:

```json
{
  "data-root": "<harici bağlama noktanız>/docker"
}
```

burada `<harici bağlama noktanız>` diğer sürücünüzün bağlandığı dizindir.

Dosyayı kaydetmek için `Ctrl+O, Enter`, editörden çıkmak için `Ctrl+X, Enter` tuşlarına basın.

Ardından, klasörü oluşturun:

```shell
sudo mkdir -p <harici bağlama noktanız>/docker
```

Şimdi, değişiklikleri algılaması için docker daemon'unu yeniden başlatın:

```shell
sudo systemctl restart docker
```

Bundan sonra, Docker verilerini istediğiniz diskte saklayacaktır.

## Smartnode Yığınını Yapılandırma

Kurulum sürecindeki bir sonraki adım, node'unuzun ilk yapılandırmasını yapmaktır.
Bu sürecin adım adım anlatımı için [Rocketpool'u Yapılandırma](./config/overview) bölümüne geçin.
