import proposal_diagram from "./images/proposal_diagram.png";
import proposal_checker from "./images/proposal_checker.png";

# Protokol DAO (pDAO)

Rocket Pool Protokol DAO (pDAO), protokolün yönünü şekillendirmekten sorumludur ve RPL yönetişimi tarafından yürütülür. Üyeleri ve oy güçleri, büyük ve küçük düğüm operatörlerinden oluşur ve bunların hepsi doğrudan protokole katılmaktadır. rETH sahipleri, Düğüm Operatörleri ve RPL sahipleri dahil olmak üzere geniş Rocket Pool topluluğuna hizmet eder. pDAO, Rocket Pool protokolünün güvenliğine ve Ethereum Ağının sağlığına öncelik verir. pDAO'nun kim ve ne olduğuna dair açık bir tanım için [pDAO tüzüğüne](https://rpips.rocketpool.net/RPIPs/RPIP-23) göz atmaktan çekinmeyin.

## Houston'daki yeni pDAO özellikleri

### pDAO sorumluluklarının on-chain yürütülmesi

Houston Güncellemesi, pDAO yönetişim sisteminin yürütme süreci için bir on-chain yerine koyma sunar. Herhangi bir düğüm operatörünün "pDAO protokol parametrelerini" ayarlamak ve hazine fonlarını harcamak için teklifler oluşturmasına ve teklifler üzerinde oy kullanmasına izin veren iyimser bir hile-kanıtı sistemi kullanır. pDAO tarafından kontrol edilebilir parametrelerin kapsamlı bir listesini görmek için [buraya](https://rpips.rocketpool.net/RPIPs/RPIP-33#parameter-table) tıklayın.
Houston öncesinde, çekirdek ekip topluluk yönetişim sürecinin emriyle pDAO görevlerini yürütmekten sorumluydu. Örneğin, ekip yönetişim oylamasıyla belirlenen ödeme programlarına göre aylık IMC ve GMC ödemelerini gerçekleştirir. Plan, bu gücün bu sorumlulukları üstlenecek yeni bir güç yapısı kurulana kadar geçici olarak ekipte kalmasıydı. Houston, ekibe olan bu bağımlılığı ortadan kaldırarak protokolü daha merkezi olmayan ve güvensiz hale getirir.

### Güvenlik Konseyi

Houston güncellemesi, protokolde herhangi bir potansiyel sorun durumunda hızlı tepki vermeye yardımcı olmak için yeni bir güvenlik konseyi de içerir. Bu üyeler pDAO tarafından seçilebilir ve gecikme olmadan değişiklikler önerebilir ve yürütebilir. pDAO, güvenlik konseyinden üyeleri seçme ve çıkarma gücüne sahiptir. Bu ciddi bir roldür ve pDAO güçlü giriş gereksinimleri ve bayat üyeleri temizlemek için süreçler geliştirmelidir. pDAO koruyucusu, Houston'ın başlangıcında güvenlik konseyinin tek üyesi olacaktır.

### Yinelenen Hazine Harcamaları

RPL'nin %5 enflasyon oranı vardır. Bu enflasyonun %22'si [RPIP-25](https://rpips.rocketpool.net/RPIPs/RPIP-25)'te tanımlandığı gibi pDAO'ya yönlendirilir. pDAO bu fonları çeşitli amaçlar için kullanabilir. Örneğin, likidite sağlayıcı (LP) bonusları gibi teşvikler, 3. taraf iyileştirmeler ve projeler için hibeler ve ödüller ve Rocket Pool protokolünün geliştirilmesinin finanse edilmesi. Houston güncellemesi ayrıca her ödül döneminde belirli bir yararlanıcıya yapılan yinelenen hazine ödemelerini etkinleştiren yeni bir özellik sunar.

## Protokol DAO (pDAO) teklifleri

Sıfır olmayan oy gücüne sahip herhangi bir düğüm, herhangi bir zamanda bir pDAO teklifi oluşturabilir veya katılabilir. Teklifler aşağıdaki türlerden biri olabilir:

- pDAO ayarlarını değiştirme
- Tek seferlik hazine harcamaları
- Tekrarlayan hazine harcamaları (yönetim komiteleri)
- Güvenlik konseyi üyeliği

Daha fazla ayrıntı ve gerekçe için [teklif türlerine](https://rpips.rocketpool.net/RPIPs/RPIP-33#proposal-types) bakın. Bir pDAO teklifinin protokol düzeyinde değişiklikleri yürütmek için var olan bir on-chain varlık olduğunu anlamak önemlidir.

## Bir pDAO teklifinin yaşam döngüsü

Bir teklif, on-chain üzerinde ortaya çıkmadan önce [yönetişim süreci](./participate#governance-process) tarafından öngörülmelidir. 4 Dönemden oluşur ve bunların hepsi pDAO [kontrol edilebilir parametreleridir](https://rpips.rocketpool.net/RPIPs/RPIP-33#parameter-table):

- Vote Delay Period: `proposal.vote.delay.time`
- Vote Phase 1: `proposal.vote.phase1.time`
- Vote Phase 2: `proposal.vote.phase2.time`
- Execution: `proposal.execute.time	`

<img src={proposal_diagram} width="100%" height="auto" />

### Oy Gecikmesi Dönemi

Bir teklifin sonucuna karar vermek için protokolün gerekli çoğunluğu bilmesi gerekir. Bir teklif sahibi bu değeri off-chain olarak hesaplar ve teklifiyle birlikte sunar. Değer iyimser olarak kabul edilir, ancak hile durumunda doğrulayıcılar değerin yanlış olduğunu kanıtlamak için bir itiraz/yanıt süreci gerçekleştirebilir. Geçersiz teklifler daha sonra atılır.

Teklif sahiplerinin ve itiraz edenlerin RPL kilitlemelerinin gerektiği birkaç neden.

- `proposal.bond` geçerli teklifleri teşvik eder ve spam'i caydırır.
- `proposal.challenge.bond` geçersiz/kötü niyetli tekliflerin kaldırılmasını teşvik eder.

İtiraz edenler, yanlış olduğunu iddia ettikleri Merkle-sum ağacına bir indeks sağlar. Herhangi bir düğüm operatörü hileli tekliflere itiraz etmeye (ve bunu yaparken ödül kazanmaya) katılabilir. Katılmakla ilgileniyorsanız [pDAO İtiraz Süreci](./pdao#challenge-process) hakkında okumaktan çekinmeyin. Oy gecikmesi süresinin sonunda bir itirazda yenilmeyen bir teklif oylama aşamalarına girecektir.

::: tip NOT
`proposal.vote.delay.time` sona erdiğinde, teklife artık itiraz edilemez veya yenilmez.
:::

### Oy Dönemi 1

Bir oylama döneminde, Düğüm Operatörleri ve Delegeler dört seçenekten biriyle oy kullanabilir:

```
1. Abstain: Seçmenin oy gücü çoğunluğa katkıda bulunur ancak teklif lehinde veya aleyhinde değildir.
2. For: Seçmen teklifin yürütülmesi lehinde oy kullanır.
3. Against: Seçmen teklifin yürütülmesine karşı oy kullanır.
4. Veto: Seçmen teklife karşı oy kullanır ve ayrıca teklifi spam veya kötü niyetli olarak değerlendirdiklerini belirtir.
```

Oy güçleri seçtikleri seçeneğe dahil edilecektir.

Bu, şu komut kullanılarak yapılabilir:

```shell
rocketpool pdao proposals vote
```

Veto çoğunluğu (`proposal.veto.quorum` parametresi tarafından tanımlandığı gibi) karşılanırsa, teklif derhal yenilir ve teklif sahibi tahvilini kaybeder. Bu, spam, düşük kaliteli teklifleri veya önce off-chain süreçlerden geçmemiş teklifleri caydırmak içindir. Smartnode komutu `rocketpool pdao proposals finalize`, teklif sahibinin kilitli RPL tahvilini yakarak veto edilmiş bir teklifi sonuçlandırmak için kullanılır.

Dönem 1'in süresi `proposal.vote.phase1.time` parametresi tarafından belirlenir. Teklif, `proposal.quorum`'a ulaşılıp ulaşılmadığına bakılmaksızın aşama 2'ye geçecektir.

### Oy Dönemi 2

Delegeler oy dönemi 2'de oy kullanabilir, ancak yalnızca oyları yalnızca **yerel oy güçleri** değerindedir. Dönem 1'de oy kullanmayan seçmenler dönem 2'de hala oy kullanabileceklerdir. Delegelerinin seçimiyle aynı fikirde olmayan düğüm operatörleri delegelerinin oyunu geçersiz kılma fırsatına sahip olacaklar.

Bir oyu geçersiz kılma süreci oldukça basittir, oy dönemi 2'de `rocketpool pdao proposals vote` çağrısını yapın ve istemleri izleyin. Delegenin oy gücü, temsilcisinin oy gücü tarafından geçersiz kılınacaktır.

Bir teklifin sonucu, oy dönemi 2 bittiğinde sonuçlanır. Bir sonucun belirlenmesi (ve yürütülmesi) için, `proposal.vote.phase2.time` sonunda `proposal.quorum` toplam oy gücüne ulaşılmalıdır. Çoğunluk karşılanır ve konsensüs sağlanırsa, teklif oylama dönemlerini geçecek ve başarılı olarak işaretlenecektir.

::: tip NOT
`proposal.quorum` karşılanmazsa başka hiçbir eylem gerçekleştirilemez. Çoğunluk karşılanmazsa bir teklif sonuçlanmış ve kesinleşmiş sayılır.
:::

### Yürütme

Her iki oylama dönemi de geçtikten ve teklif başarılı olduktan sonra, teklif yürütülebilir ve değişiklik (payload tarafından tanımlanan) Rocket Pool protokolüne uygulanır. Bir teklifi yürütmek için şu komutu kullanın:

```shell
rocketpool pdao proposals execute
```

Yürütmek için bir teklif seçmeniz istenecektir, bu adımdan sonra teklif protokole uygulanacaktır!

Teklif oylama dönemlerini geçtikten sonra, teklif sahibi kilitli RPL tahvilini [talep edebilir](./participate#claiming-bonds-and-rewards), teklif bir itirazla yenilmedikçe veya veto edilmedikçe.

::: tip NOT
Bir teklifin yürütülebileceği bir `proposal.execute.time` penceresi vardır. Bu zamanlayıcı sonuna ulaşırsa bir teklif sona erecektir.
:::

İşte bu kadar! Yukarıda bahsedilen tüm değişkenlerin pDAO kontrol edilebilir parametreleri olduğunu unutmayın. pDAO'nun on-chain teklifler kullanarak değiştirme yetkisine sahip olduğu her parametrenin kapsamlı bir listesi için [buraya](https://rpips.rocketpool.net/RPIPs/RPIP-33#parameter-table) tıklayın.

## İtiraz Süreci

Tam ağ oy gücü ağacı gaz limitleri nedeniyle off-chain saklanır. Bir kullanıcı yeni bir teklif sunduğunda, hedef blok numarasında ağ oylama ağacını oluşturmaktan sorumludur. Bu ağaç off-chain oluşturulur ancak on-chain sunulan Merkle kökleri aracılığıyla doğrulanabilir. Protokol, teklif sahibi tarafından sunulan ayrıntıları kontrol etmek için **doğrulayıcılara** güvenir.

Herhangi bir düğüm, tekliflerin doğruluğunu izlemeye ve doğrulamaya katılabilir. Bu sorumluluğu kabul etmek için `rocketpool service config` komutunu kullanın, **Smartnode and TX Fee Settings** menüsüne gidin ve `Enable PDAO Proposal Checker` kutusunu işaretleyin.

<img src={proposal_checker} width="100%" height="auto" />

Bu ayar etkinleştirildiğinde, düğüm yeni teklifleri kontrol edecek, doğruluklarını doğrulayacak ve geçersiz tekliflere itirazlar sunacaktır. Tek ön koşul, [RPL Kilitlemenin](./participate#allowing-rpl-locking) etkinleştirilmiş olmasıdır.

Bu kontrol, birkaç diğer düğümle ilgili görevle birlikte her 5 dakikada bir çalışır. Hileli bir teklife itiraz etmenin nasıl göründüğüne dair bir örnek üzerinden geçeceğiz. İlerlemeyi izlemek için smartnode komutu `rocketpool service logs node` kullanabiliriz:

```
rocketpool_node  | 2024/04/05 02:19:16 Checking for Protocol DAO proposal challenges to defend...
rocketpool_node  | 2024/04/05 02:19:26 Checking for Protocol DAO proposals to challenge...
rocketpool_node  | 2024/04/05 02:19:26 [Network Tree] Couldn't load network tree for block 1283202 from disk, so it must be regenerated.
rocketpool_node  | 2024/04/05 02:19:26 [PDAO Proposals] Network tree for block 1283202 didn't exist, creating one.
rocketpool_node  | 2024/04/05 02:19:26 [Voting Info Snapshot] Couldn't load network tree for block 1283202 from disk, so it must be regenerated.
rocketpool_node  | 2024/04/05 02:19:26 [PDAO Proposals] Voting info snapshot for block 1283202 didn't exist, creating one.
rocketpool_node  | 2024/04/05 02:19:26 Proposal 177 does not match the local tree artifacts and must be challenged.
rocketpool_node  | 2024/04/05 02:19:26 [Voting Info Snapshot] Loaded file [vi-1283202.json.zst].
rocketpool_node  | 2024/04/05 02:19:26 [Network Tree] Loaded file [network-tree-1283202.json.zst].
rocketpool_node  | 2024/04/05 02:19:26 Submitting challenge against proposal 177, index 5...
rocketpool_node  | 2024/04/05 02:19:26 This transaction will use a max fee of 16.067134 Gwei, for a total of up to 0.003252 - 0.004878 ETH.
rocketpool_node  | 2024/04/05 02:19:26 Transaction has been submitted with hash 0x327e59e398bf2141a0d9273947d1da5c255606c45afaca428ab092186300eac2.
rocketpool_node  | 2024/04/05 02:19:26 You may follow its progress by visiting:
rocketpool_node  | 2024/04/05 02:19:26 https://holesky.etherscan.io/tx/0x327e59e398bf2141a0d9273947d1da5c255606c45afaca428ab092186300eac2

```

Düğümümüzün hileli bir teklifi yakaladığını ve ona itiraz etme sürecini başlattığını görebiliriz. Blok `1283202`, teklif 177'nin oluşturulduğu bloktur, bu da bu teklif için oy gücünün blok `1283202`'de hesaplanacağı anlamına gelir. Bu **Voting Info Snapshots**'ların nasıl göründüğünü görmekle ilgileniyorsanız, bunları bu dizinde bulabilirsiniz: `~/.rocketpool/data/voting`

Teklif sahibi yanlış oylama bilgisi gönderdiği için yakalandığından, düğümümüz teklif 177 üzerinde indeks 5'te `Function: createChallenge` sözleşme çağrısı yapar ve teklif sahibinin itiraza yanıt vermesini bekler.

```
rocketpool3_node  | 2024/04/05 02:56:51 Checking for Protocol DAO proposal challenges to defend...
rocketpool3_node  | 2024/04/05 02:57:01 Checking for Protocol DAO proposals to challenge...
rocketpool3_node  | 2024/04/05 02:57:01 [Network Tree] Loaded file [network-tree-1283202.json.zst].
rocketpool3_node  | 2024/04/05 02:57:01 Proposal 177 does not match the local tree artifacts and must be challenged.
rocketpool3_node  | 2024/04/05 02:57:01 [Voting Info Snapshot] Loaded file [vi-1283202.json.zst].
rocketpool3_node  | 2024/04/05 02:57:01 [Network Tree] Loaded file [network-tree-1283202.json.zst].
rocketpool3_node  | 2024/04/05 02:57:01 Proposal 177 has been defeated with node index 20, submitting defeat...
rocketpool3_node  | 2024/04/05 02:57:01 This transaction will use a max fee of 19.078965 Gwei, for a total of up to 0.002061 - 0.003091 ETH.
rocketpool3_node  | 2024/04/05 02:57:01 Transaction has been submitted with hash 0x8cc01dff37205dc98e53f4e9fae7f3c802ecc1c69a01f53e734115a73401287e.
rocketpool3_node  | 2024/04/05 02:57:01 You may follow its progress by visiting:
rocketpool3_node  | 2024/04/05 02:57:01 https://holesky.etherscan.io/tx/0x8cc01dff37205dc98e53f4e9fae7f3c802ecc1c69a01f53e734115a73401287e
rocketpool3_node  |
rocketpool3_node  | 2024/04/05 02:57:01 Waiting for the transaction to be validated...
rocketpool3_node  | 2024/04/05 02:57:13 Successfully defeated proposal.
```

Teklif sahibinin oylama bilgisi yanlış olduğu için (`proposal.challenge.period` tarafından belirlenen) zamanında itiraza yanıt veremeyecektir. Teklif bu noktada yenilmiş sayılır. Teklif yenildiğinde, düğümümüz teklifi sonlandırmak için otomatik olarak teklif 177 üzerinde indeks 5'te `defeatProposal` sözleşme çağrısını yapar.

::: tip NOT
Teklifin yenilgisine katılan itiraz edenler, yanlış olduğu kanıtlanan bir indeks gönderirlerse teklif sahibinin tahvilinin orantılı bir miktarını alırlar. Diğer tüm itiraz edenler yalnızca tahvillerini geri alırlar.
:::

Artık teklif yenildiğine göre, düğümümüz (itiraz eden) hileli bir teklifi yendiği için ödül olarak orijinal RPL tahvilini ve teklif sahibinin RPL tahvilini [talep edebilir](./participate#claiming-bonds-and-rewards).

pDAO teklif ve itiraz sisteminin ayrıntılarını incelemekle ilgileniyorsanız, [teknik özelliklere](https://github.com/rocket-pool/rocketpool-research/blob/houston/Protocol%20DAO/pdao-prop-challenge-spec.md#draft-protocol-dao-proposal-challenge-system-specification) bir göz atın. Düşük seviye ayrıntılara giden bir örneği incelemekle ilgileniyorsanız [itiraz süreci](https://github.com/rocket-pool/rocketpool-research/blob/houston/Protocol%20DAO/pdao-prop-challenge-spec.md#challenge-process) hakkındaki bu bölüme atlamaktan çekinmeyin.
