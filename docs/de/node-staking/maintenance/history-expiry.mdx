import { Tab, Tabs } from "@rspress/core/theme";

# Ablauf der Pre-Merge History

Alle Execution Clients unterstützen jetzt den partiellen Ablauf der History gemäß [EIP-4444](https://eips.ethereum.org/EIPS/eip-4444). Benutzer können die Speicheranforderungen für ihren Node erheblich reduzieren, indem sie die Pre-Merge Block History ab Smartnode Version `v1.17.0` entfernen. Lesen Sie gerne diesen Blogpost, um mehr über den partiellen History Ablauf zu erfahren: https://blog.ethereum.org/2025/07/08/partial-history-exp

::: tip HINWEIS

    Bitte beachten Sie, dass die Schritte zum Entfernen der Pre-Merge History vom ausgewählten Execution Client Ihres Nodes abhängen:
    - Nethermind-Benutzer benötigen eine vollständige Resynchronisierung, um die Pre-Merge History zu entfernen.
    - Geth-Benutzer können den Befehl `rocketpool service prune-eth1` verwenden oder eine vollständige Resynchronisierung durchführen.
    - Besu- und Reth-Benutzer können ein Online-Pruning durchführen, während ihr Node weiterhin attestiert.

:::

Die folgenden Schritte zum Entfernen der Pre-Merge History gelten nur für Nodes im Docker-Modus. Wenn Sie einen externen Client im Hybrid-Modus oder Native-Modus verwenden, lesen Sie bitte die Dokumentation Ihres Execution Clients.

Öffnen Sie zunächst den Settings Manager:

```shell
rocketpool service config
```

Um den Pruning-Modus des Execution Clients zu ändern, gehen Sie zum Menü `Execution Client (ETH1)` und wählen Sie die Einstellung `History Expiry` im Dropdown-Menü für `Pruning Mode`

![](../images/tui-history-expiry.png)

Nachdem Sie die Auswahl getroffen haben, drücken Sie `escape`, um zum Hauptmenü zurückzukehren, und drücken Sie dann `tab`, um die Schaltfläche `Review Changes and Save` hervorzuheben. Drücken Sie die `enter`-Taste, um fortzufahren. Es wird Ihnen ein Menü angezeigt, in dem Sie die Änderungen an Ihren Execution Client Einstellungen in der Vorschau anzeigen können.

![](../images/tui-review-history-expiry.png)

Drücken Sie die `enter`-Taste auf `Save Settings`, um zu speichern und den Settings Manager zu verlassen, und geben Sie dann `y` ein, um Ihren `rocketpool_eth1` Container neu zu starten.

```shell
Your changes have been saved!
The following containers must be restarted for the changes to take effect:
	rocketpool_eth1
Would you like to restart them automatically now? [y/n]
```

Von diesem Punkt an unterscheiden sich die Schritte je nachdem, welchen Execution Client Sie verwenden:

<div className="p-3">
  <Tabs>

        <Tab label="Nethermind">
        Nethermind Nodes erfordern eine vollständige Resynchronisierung, um die Pre-Merge History zu entfernen. Sie müssen Ihren Execution Client resynchronisieren, nachdem Sie die Einstellung `History Expiry` gespeichert und Ihren `eth1` Container neu gestartet haben.

        ::: warning WARNUNG
        Wenn Sie keinen Fallback-Node konfiguriert haben, wird Ihr Node während einer Resynchronisierung die Validierung einstellen. Ein Fallback-Node ermöglicht es Ihrem primären Node, während eines Prunings oder einer Resynchronisierung weiterhin zu attestieren und Blöcke vorzuschlagen. Klicken Sie [hier](/de/node-staking/fallback),
        um zu erfahren, wie Sie einen Fallback-Node konfigurieren.
        :::

        Verwenden Sie den folgenden Befehl, um Ihren Execution Client zu resynchronisieren:
        ```shell
        rocketpool service resync-eth1
        ```

        Sie sind fertig! Der Node wird keine Pre-Merge Daten mehr speichern, was die Machbarkeit erheblich verbessert, einen Node auf einem 2 TB Laufwerk unterzubringen.
        Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Geth">

        Geth Nodes erfordern ein Offline-Pruning, um die Pre-Merge History zu entfernen. Sie müssen Ihren Execution Client prunen, nachdem Sie die Einstellung `History Expiry` gespeichert und Ihren `eth1` Container neu gestartet haben. Alternativ können Sie sich auch für eine vollständige Resynchronisierung entscheiden, um die Pre-Merge History zu entfernen.

        ::: tip HINWEIS
        Wir empfehlen das Pruning gegenüber einer vollständigen Resynchronisierung. Wenn Sie mit einer frischen Geth-Datenbank von vorne beginnen möchten oder ein Problem mit dem Pruning haben, können Sie den Execution Client mit `rocketpool service resync-eth1` resynchronisieren. Beide Optionen sollten zu einer abgelaufenen Pre-Merge History führen.
        :::

        ::: warning WARNUNG
        Wenn Sie keinen Fallback-Node konfiguriert haben, wird Ihr Node während eines Prunings oder einer Resynchronisierung die Validierung einstellen. Ein Fallback-Node ermöglicht es Ihrem primären Node, während eines Prunings oder einer Resynchronisierung weiterhin zu attestieren und Blöcke vorzuschlagen. Klicken Sie [hier](/de/node-staking/fallback),
        um zu erfahren, wie Sie einen Fallback-Node konfigurieren.
        :::

        Bitte führen Sie den folgenden Befehl aus, um Ihren Execution Client zu prunen:
        ```shell
        rocketpool service prune-eth1
        ```
        Sie können [hier](/de/node-staking/pruning#starting-a-prune) klicken, um mehr über das Pruning zu erfahren.

        Sie sind fertig! Der Node wird keine Pre-Merge Daten mehr speichern, was die Machbarkeit erheblich verbessert, einen Node auf einem 2 TB Laufwerk unterzubringen.
        Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Besu">

        Sie sind fertig! Besu Nodes führen ein Online-Pruning durch, während sie weiterhin attestieren und Blöcke vorschlagen.
        Der Node wird keine Pre-Merge Daten mehr speichern, was die Machbarkeit erheblich verbessert, einen Node auf einem 2 TB Laufwerk unterzubringen.
        Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Reth">

        Sie sind fertig! Reth Nodes führen ein Online-Pruning durch, während sie weiterhin attestieren und Blöcke vorschlagen.
        Der Node wird keine Pre-Merge Daten mehr speichern, was die Machbarkeit erheblich verbessert, einen Node auf einem 2 TB Laufwerk unterzubringen.
        Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
         ```

    </Tab>

  </Tabs>
</div>
