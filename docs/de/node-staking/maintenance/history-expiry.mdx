import { Tab, Tabs } from "@rspress/core/theme";

# Ablauf der Pre-Merge-Historie

Alle Execution-Clients unterstützen jetzt die teilweise Ablauf der Historie gemäß [EIP-4444](https://eips.ethereum.org/EIPS/eip-4444). Benutzer können die Speicheranforderungen für ihren Node erheblich reduzieren, indem sie die Pre-Merge-Blockhistorie ab Smartnode-Version `v1.17.0` entfernen. Schauen Sie sich gerne diesen Blogbeitrag an, um mehr über den teilweisen Ablauf der Historie zu erfahren: https://blog.ethereum.org/2025/07/08/partial-history-exp

::: tip HINWEIS

    Bitte beachten Sie, dass die Schritte zum Entfernen der Pre-Merge-Historie vom ausgewählten Execution-Client Ihres Nodes abhängen:
    - Nethermind-Benutzer benötigen eine vollständige Neusynchronisierung, um die Pre-Merge-Historie zu entfernen.
    - Geth-Benutzer können den Befehl `rocketpool service prune-eth1` verwenden oder eine vollständige Neusynchronisierung durchführen.
    - Besu- und Reth-Benutzer können ein Online-Pruning durchführen, während ihr Node weiterhin attestiert.

:::

Die folgenden Schritte zum Entfernen der Pre-Merge-Historie gelten nur für Nodes im Docker-Modus. Wenn Sie einen externen Client im Hybrid-Modus oder Native-Modus verwenden, beachten Sie bitte die von Ihrem Execution-Client bereitgestellte Dokumentation.

Öffnen Sie zunächst den Settings Manager:

```shell
rocketpool service config
```

Um den Pruning-Modus des Execution-Clients zu ändern, gehen Sie zum Menü `Execution Client (ETH1)` und wählen Sie im Dropdown-Menü für `Pruning Mode` die Einstellung `History Expiry` aus.

![](../images/tui-history-expiry.png)

Nachdem Sie die Auswahl getroffen haben, drücken Sie `escape`, um zum Hauptmenü zurückzukehren, und drücken Sie dann `tab`, um die Schaltfläche `Review Changes and Save` hervorzuheben. Drücken Sie die `enter`-Taste, um fortzufahren. Ihnen wird ein Menü zur Vorschau der Änderungen an Ihren Execution-Client-Einstellungen angezeigt.

![](../images/tui-review-history-expiry.png)

Drücken Sie die `enter`-Taste auf `Save Settings`, um die Einstellungen zu speichern und den Settings Manager zu beenden, und geben Sie dann `y` ein, um Ihren `rocketpool_eth1`-Container neu zu starten.

```shell
Your changes have been saved!
The following containers must be restarted for the changes to take effect:
	rocketpool_eth1
Would you like to restart them automatically now? [y/n]
```

Von diesem Punkt an unterscheiden sich die Schritte je nachdem, welchen Execution-Client Sie verwenden:

<div className="p-3">
  <Tabs>

        <Tab label="Nethermind">
        Nethermind-Nodes erfordern eine vollständige Neusynchronisierung, um die Pre-Merge-Historie zu entfernen. Sie müssen Ihren Execution-Client nach dem Speichern der `History Expiry`-Einstellung und dem Neustart Ihres `eth1`-Containers neu synchronisieren.

        ::: warning WARNUNG
        Wenn Sie keinen Fallback-Node konfiguriert haben, wird Ihr Node während einer Neusynchronisierung die Validierung stoppen. Ein Fallback-Node ermöglicht es Ihrem primären Node, während eines Prunings oder einer Neusynchronisierung weiterhin zu attestieren und Blöcke vorzuschlagen. Klicken Sie [hier](/de/node-staking/fallback), um zu erfahren, wie Sie einen Fallback-Node konfigurieren.
        :::

        Verwenden Sie den folgenden Befehl, um Ihren Execution-Client neu zu synchronisieren:
        ```shell
        rocketpool service resync-eth1
        ```

        Sie sind fertig! Der Node wird keine Pre-Merge-Daten mehr speichern, was die Machbarkeit, einen Node auf einem 2-TB-Laufwerk unterzubringen, erheblich verbessert. Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Geth">

        Geth-Nodes erfordern ein Offline-Pruning, um die Pre-Merge-Historie zu entfernen. Sie müssen Ihren Execution-Client nach dem Speichern der `History Expiry`-Einstellung und dem Neustart Ihres `eth1`-Containers prunen. Alternativ können Sie eine vollständige Neusynchronisierung durchführen, um die Pre-Merge-Historie zu entfernen.

        ::: tip HINWEIS
        Wir empfehlen Pruning gegenüber einer vollständigen Neusynchronisierung. Wenn Sie mit einer frischen Geth-Datenbank von vorne beginnen möchten oder ein Problem mit dem Pruning haben, können Sie den Execution-Client mit `rocketpool service resync-eth1` neu synchronisieren. Beide Optionen sollten zu einer abgelaufenen Pre-Merge-Historie führen.
        :::

        ::: warning WARNUNG
        Wenn Sie keinen Fallback-Node konfiguriert haben, wird Ihr Node während eines Prunings oder einer Neusynchronisierung die Validierung stoppen. Ein Fallback-Node ermöglicht es Ihrem primären Node, während eines Prunings oder einer Neusynchronisierung weiterhin zu attestieren und Blöcke vorzuschlagen. Klicken Sie [hier](/de/node-staking/fallback), um zu erfahren, wie Sie einen Fallback-Node konfigurieren.
        :::

        Bitte führen Sie den folgenden Befehl aus, um Ihren Execution-Client zu prunen:
        ```shell
        rocketpool service prune-eth1
        ```
        Sie können [hier](/de/node-staking/pruning#starting-a-prune) klicken, um mehr über Pruning zu erfahren.

        Sie sind fertig! Der Node wird keine Pre-Merge-Daten mehr speichern, was die Machbarkeit, einen Node auf einem 2-TB-Laufwerk unterzubringen, erheblich verbessert. Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Besu">

        Sie sind fertig! Besu-Nodes führen ein Online-Pruning durch, während sie weiterhin attestieren und Blöcke vorschlagen. Der Node wird keine Pre-Merge-Daten mehr speichern, was die Machbarkeit, einen Node auf einem 2-TB-Laufwerk unterzubringen, erheblich verbessert. Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Reth">

        Sie sind fertig! Reth-Nodes führen ein Online-Pruning durch, während sie weiterhin attestieren und Blöcke vorschlagen. Der Node wird keine Pre-Merge-Daten mehr speichern, was die Machbarkeit, einen Node auf einem 2-TB-Laufwerk unterzubringen, erheblich verbessert. Wir empfehlen, den Fortschritt mit dem folgenden Befehl zu überwachen.
        ```shell
        rocketpool service logs eth1
         ```

    </Tab>

  </Tabs>
</div>
