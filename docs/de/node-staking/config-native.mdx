import nimbus_dashboard from "./images/nimbus-dashboard.png";
import tui_checkbox_checked from "./images/tui-checkbox-checked.png";
import tui_checkbox_unchecked from "./images/tui-checkbox-unchecked.png";
import tui_dropdown_closed from "./images/tui-dropdown-closed.png";
import tui_dropdown_open from "./images/tui-dropdown-open.png";
import tui_native_cc_url from "./images/tui-native-cc-url.png";
import tui_native_cc from "./images/tui-native-cc.png";
import tui_native_ec from "./images/tui-native-ec.png";
import tui_native_finished from "./images/tui-native-finished.png";
import tui_native_metrics from "./images/tui-native-metrics.png";
import tui_native_mev from "./images/tui-native-mev.png";
import tui_native_network from "./images/tui-native-network.png";
import tui_native_welcome from "./images/tui-native-welcome.png";
import tui_native_other from "./images/tui-native-other.png";
import tui_native_review from "./images/tui-native-review.png";
import tui_native_settings_home from "./images/tui-native-settings-home.png";
import tui_native_smartnode from "./images/tui-native-smartnode.png";
import tui_textbox from "./images/tui-textbox.png";

# Konfiguration des Smartnode-Stacks (Native Mode)

In diesem Abschnitt werden wir die verschiedenen Methoden zur Konfiguration des Smartnode behandeln, wenn Sie das **Native Setup** verwenden, das Docker überhaupt nicht nutzt.

::: warning HINWEIS
Wenn Sie ein Docker-basiertes Setup verwenden, besuchen Sie bitte stattdessen den [Docker-Konfigurationsleitfaden](./config-docker).
:::

Es gibt drei Möglichkeiten zur Konfiguration:

- Über die [Wizard UI](#konfiguration-über-den-wizard) - dies ist der einfachste Weg. Sie stellt nur ein paar grundlegende Fragen und verwendet für den Rest gut getestete Standardwerte. Dies wird Ihnen präsentiert, wenn Sie `rocketpool service config` zum ersten Mal ausführen.
- Über die [Settings Manager UI](#konfiguration-über-den-settings-manager) - dies gibt Ihnen Zugriff auf alle Einstellungen des Smartnode, sodass Sie alles nach Belieben anpassen können.
- Headless über die [Befehlszeile](#konfiguration-über-die-befehlszeile) - dies ist eine Option für Personen, die den Smartnode in einer headless (nicht-interaktiven) Umgebung betreiben und ihn automatisch konfigurieren müssen.

Wählen Sie aus der obigen Liste aus, über welchen Modus Sie mehr erfahren möchten, oder scrollen Sie einfach durch jede Option unten.

## Konfiguration über den Wizard

Um den Smartnode zu konfigurieren, führen Sie den Konfigurationsbefehl aus:

```shell
rp service config
```

Dadurch wird eine terminalbasierte UI gestartet, mit der Sie Ihren Node schnell und einfach konfigurieren können und die Ihnen optionale feinkörnige Kontrolle über die Einstellungen bietet, die für den Native Mode relevant sind.

::: tip HINWEIS
Wenn Sie den Smartnode bereits konfiguriert haben, werden Sie stattdessen mit dem [Settings Manager](#konfiguration-über-den-settings-manager) begrüßt.
Sie können von dort aus wählen, den Wizard erneut zu öffnen, wenn Sie dies bevorzugen, und alle Ihre vorhandenen Einstellungen werden für Sie vorausgewählt.
:::

Wenn Sie die Config UI zum ersten Mal ausführen (oder wenn Sie sich später entscheiden, den Wizard erneut auszuführen), wird Ihnen ein Bildschirm angezeigt, der so aussieht:

<img src={tui_native_welcome} width="100%" height="auto" />

::: tip TIPP
Um den Wizard zu verwenden, **drücken Sie die `Pfeiltasten` (oben/unten/links/rechts), um zwischen Elementen wie Schaltflächen (Auswahlmöglichkeiten) oder Textfeldern zu navigieren**.
Sie können auch `Tab` und `Shift+Tab` verwenden, wenn Sie dies bevorzugen - es bewirkt dasselbe.

Bei Schaltflächen **wird die derzeit ausgewählte grün hervorgehoben**.
Die schwarzen sind nicht ausgewählt.
Im obigen Screenshot ist `Next` derzeit ausgewählt und `Quit` nicht.

**Drücken Sie `Enter` oder `Leertaste`, um eine Schaltfläche auszuwählen**, analog zum Klicken mit der Maus.

**Drücken Sie `Escape`, um zum vorherigen Dialog zurückzukehren**, wenn Sie Ihre Meinung zu etwas geändert haben.
Dies wird praktisch sein, während Sie durch die verschiedenen Wizard-Seiten fortschreiten.

**Halten Sie `Strg` und drücken Sie `C` jederzeit, um den Wizard zu beenden, ohne etwas zu speichern**.

Zum Beispiel könnten Sie auf dem obigen Bildschirm die `links`- und `rechts`-Pfeiltasten drücken, um zwischen den Schaltflächen `Next` und `Quit` zu wechseln.

Wenn Sie `Enter` drücken, während `Next` ausgewählt ist, gelangen Sie zum nächsten Bildschirm.
Wenn Sie `Enter` drücken, während `Quit` ausgewählt ist, wird der Wizard beendet, ohne zu speichern.
:::

Wenn Sie bereit sind zu beginnen, drücken Sie `Next`.

### Auswahl eines Netzwerks

Auf dem nächsten Bildschirm werden Sie gefragt, welches Netzwerk Sie verwenden möchten:

<img src={tui_native_network} width="100%" height="auto" />

Sie können die verschiedenen Auswahlmöglichkeiten mit den `Auf`- und `Ab`-Pfeiltasten (oder `Tab` und `Shift+Tab`) hervorheben.
Wenn Sie die Auswahl ändern, zeigt Ihnen das **Beschreibungsfeld** auf der rechten Seite eine kurze Beschreibung jeder Option.
Dies gilt für alle auswahlbasierten Seiten im Wizard, nicht nur für die Netzwerkauswahl, sodass Sie diesen Seitenstil häufig sehen werden.

Wenn Sie das Betreiben eines Rocket Pool Node im Hoodi-Testnetzwerk mit kostenlosem ETH und RPL üben möchten, wählen Sie **Hoodi Testnet**.

Wenn Sie bereit sind, einen echten Rocket Pool Node im Mainnet zu erstellen, um echte Belohnungen zu verdienen, wählen Sie **Mainnet**.

### Execution Client Setup

Der nächste Bildschirm fordert Sie zur Eingabe der URL der HTTP-basierten RPC-API Ihres Execution Clients auf:

<img src={tui_native_ec} width="100%" height="auto" />

Geben Sie hier `http://127.0.0.1:8545` ein, wenn Sie planen, einen Execution Client auf demselben Rechner wie den Smartnode auszuführen (im Rest dieses Leitfadens gehen wir davon aus, dass Sie dies vorhaben).
Wenn Sie jedoch bereits einen Execution Client an anderer Stelle eingerichtet haben, verwenden Sie stattdessen dessen URL.

Beachten Sie, dass Sie dies jederzeit ändern können, indem Sie später erneut `rp service config` ausführen.

### Consensus Client Setup

Als Nächstes werden Sie gefragt, welchen Consensus Client Sie verwenden (oder verwenden möchten).
Da jeder Consensus Client ein etwas anderes Verhalten aufweist, muss der Smartnode wissen, welchen Sie verwenden, damit er sein eigenes Verhalten entsprechend anpassen kann.
Wählen Sie Ihren Client aus der Liste auf dem folgenden Bildschirm:

<img src={tui_native_cc} width="100%" height="auto" />

Als Nächstes sehen Sie einen Bildschirm, der Sie zur Eingabe der API-URL Ihres Clients auffordert:

<img src={tui_native_cc_url} width="100%" height="auto" />

Geben Sie hier `http://127.0.0.1:5052` ein, wenn Sie planen, den Beacon Node Ihres Consensus Clients auf demselben Rechner wie den Smartnode auszuführen (im Rest dieses Leitfadens gehen wir davon aus, dass Sie dies vorhaben).
Wenn Sie jedoch bereits einen Beacon Node an anderer Stelle eingerichtet haben, verwenden Sie stattdessen dessen URL.

### Weitere Einstellungen

Der nächste Bildschirm enthält einige weitere verschiedene Einstellungen:

<img src={tui_native_other} width="100%" height="auto" />

Belassen Sie diese bei den Standardoptionen, es sei denn, Sie haben sich entschieden, ein anderes Verzeichnis als `/srv/rocketpool` für Ihre Smartnode-Installation zu verwenden.

### Fallback Clients

Ab Version 1.5.0 des Smartnode-Stacks können Sie ein "Fallback"-Execution-Client- und Consensus-Client-Paar bereitstellen, das für Ihre primären Clients übernehmen kann, falls diese jemals offline gehen (z. B. weil Sie Geth verwenden und es bereinigen müssen).
In dieser Situation ist Ihr primärer Node-Rechner weiterhin für das Attestieren und Vorschlagen von Blöcken mit den validator Keys Ihrer Minipools verantwortlich, aber er wird sich mit einem externen Rechner verbinden, um mit der Execution Layer und den Beacon Chains zu interagieren.

[Um mehr über Fallback Nodes zu erfahren, siehe diesen Abschnitt](./fallback) und kehren Sie hierher zurück, wenn Sie fertig sind.

### Metrics

Rocket Pool bietet die Möglichkeit, sich in Prometheus und Grafana zu integrieren, um praktische webbasierte Dashboards zu erstellen, mit denen Sie die Gesundheit Ihres Nodes auf einen Blick überwachen können:

<img src={nimbus_dashboard} width="100%" height="auto" />

Die letzte Frage im Wizard fragt Sie, ob Sie dies aktivieren möchten:

<img src={tui_native_metrics} width="100%" height="auto" />

Wenn Sie sich dafür entscheiden, es zu aktivieren, erfahren Sie später im Prozess im Abschnitt [Einrichtung des Grafana-Dashboards](./grafana.mdx) mehr über die Einrichtung und Verwendung.

::: warning HINWEIS
Alle von diesem System gesammelten Daten **bleiben auf Ihrem Rechner**.
Rocket Pool sammelt keine Telemetrie und sendet sie nicht an einen separaten Dienst.
Es ist rein für Sie da, damit Sie Ihren eigenen Node überwachen können!
:::

### MEV-Konfiguration

Seit dem Merge der Execution und Consensus Layers im September 2022 haben Ethereum Validators nun die Möglichkeit, Prioritätsgebühren zu verdienen und an Maximal Extractable Value (oder kurz MEV) teilzunehmen.

Ab Smartnode v1.7.0 ist MEV nun _opt-out_, sodass eine Benachrichtigung über die Konfiguration als Teil der anfänglichen Einrichtung präsentiert wird, wie Sie auf dem nächsten Bildschirm sehen:

<img src={tui_native_mev} width="100%" height="auto" />

[Bitte lesen Sie unseren MEV-Leitfaden, um mehr über MEV, seine Konfiguration und was in diesem Abschnitt des Wizards zu tun ist, zu erfahren.](./mev.mdx)
Kehren Sie hierher zurück, wenn Sie fertig sind.

### Abschluss

Nach dieser Frage haben Sie die Einrichtung der Smartnode-Konfiguration abgeschlossen.
Sie werden den folgenden Dialog sehen:

<img src={tui_native_finished} width="100%" height="auto" />

Wenn Sie mit Ihrem Setup zufrieden sind und bereit sind, den Smartnode zu starten, klicken Sie hier auf `Save and Exit`.

Wenn Sie die Installation von Rocket Pool noch nicht abgeschlossen haben, kehren Sie jetzt zum Native-Setup-Leitfaden zurück.
Andernfalls besteht der nächste Schritt darin, Ihre Daemon-Dienste neu zu starten mit:

```shell
sudo systemctl restart rp-node rp-watchtower
```

Wenn Sie alle Einstellungen überprüfen und viele zusätzliche Einstellungen anpassen möchten, die nicht im Wizard enthalten waren, klicken Sie auf `Review All Settings` und gehen Sie zum [nächsten Abschnitt](#konfiguration-über-den-settings-manager).

## Konfiguration über den Settings Manager

Wenn Sie bereits `rp service config` ausgeführt haben, werden Sie anstelle des Wizards mit dem **Settings Manager**-Bildschirm begrüßt:

<img src={tui_native_settings_home} width="100%" height="auto" />

Dieser Bildschirm hat drei Hauptfunktionen:

1. Die **Kategorienliste**, mit der Sie die Einstellungen für jede Kategorie des Smartnode-Stacks aufrufen können, die für den Native Mode relevant ist
2. Die Schaltfläche **Review Changes and Save**, die Sie verwenden können, wenn Sie bereit sind, die geänderten Einstellungen anzuzeigen und die aktualisierte Konfiguration zu speichern
3. Die Schaltfläche **Open the Config Wizard**, die Sie zum [Setup Wizard](#konfiguration-über-den-wizard) bringt, wenn Sie diese Benutzeroberfläche bevorzugen

::: tip TIPP
Um den Settings Manager zu verwenden, **drücken Sie die `Pfeiltasten` (oben/unten/links/rechts), um zwischen den Optionen auf der Startseite zu navigieren**.

Drücken Sie `Tab`, um **zwischen der Kategorienliste (1) und den Schaltflächen (2 und 3)** am unteren Bildschirmrand zu wechseln.
Die derzeit ausgewählte Schaltfläche wird **grün hervorgehoben**.

**Drücken Sie `Enter` oder `Leertaste`, um eine Schaltfläche auszuwählen**, analog zum Klicken mit der Maus.

**Halten Sie `Strg` und drücken Sie `C` jederzeit, um den Settings Manager zu beenden, ohne etwas zu speichern**.
:::

Während Sie durch die Kategorienliste scrollen, erscheint für jede Option eine hilfreiche Beschreibung im **Beschreibungsfeld** rechts auf dem Bildschirm.
Erkunden Sie sie gerne; nichts wird gespeichert, bis Sie den Review-Dialog über die Schaltfläche **Review Changes and Save** durchlaufen, und Sie können jederzeit **Strg+C** drücken, um ohne Speichern zu beenden, sodass Sie nicht versehentlich etwas durcheinanderbringen, wenn Sie mit den Einstellungen hier spielen.

### Konfiguration der Einstellungen

Wählen Sie vom Startbildschirm aus eine der Kategorien mit der `Enter`-Taste, um die Einstellungen für diese Kategorie anzuzeigen.
Hier ist zum Beispiel der Bildschirm für die Kategorie **Smartnode and TX Fees**:

<img src={tui_native_smartnode} width="100%" height="auto" />

Verwenden Sie die `Pfeiltasten`, um zwischen den Einstellungen nach oben und unten zu wechseln.
Die derzeit ausgewählte hat am Ende ein weißes Quadrat (wenn es ein Textfeld oder ein Kontrollkästchen ist) oder wird weiß hervorgehoben (wenn es ein Dropdown ist).

Drücken Sie `Escape`, um zum Startbildschirm des Settings Managers zurückzukehren, wenn Sie fertig sind.

Während Sie durch die Einstellungen scrollen, zeigt jede eine kurze Beschreibung dessen, was sie tut, im **Beschreibungsfeld** auf der rechten Seite.
Es zeigt auch dort den **Standardwert** an, falls Sie ihn auf seine ursprüngliche Einstellung zurücksetzen möchten.

In diesem Beispiel ist die Einstellung **RPL Claim Gas Threshold** derzeit ausgewählt (hervorgehoben mit einem grünen Kasten auf der linken Bildschirmseite).
Sie wurde auf `40` geändert, aber Sie können sehen, dass sie einen Standardwert von `150` in der oberen rechten Ecke hat (oben im **Beschreibungsfeld**).

::: tip TIPP
Zur Erinnerung: Nichts wird auf der Festplatte gespeichert, bis Sie den Review-Dialog über die Schaltfläche **Review Changes and Save** durchlaufen.
Sie werden ermutigt, alle Einstellungen zu erkunden, um mehr über sie zu erfahren.
:::

### Die Einstellungstypen und ihre Verwendung

Der Settings Manager verwendet die folgenden Einstellungstypen und UI-Elemente:

#### Textfelder

Textfelder werden verwendet, um beliebige Textzeichenfolgen oder Zahlen einzugeben.
Sie sehen so aus:

<img src={tui_textbox} width="100%" height="auto" />

Geben Sie Ihre gewünschten Werte ein und **drücken Sie dann `Enter` oder verwenden Sie die `Pfeiltasten`, um zu einer anderen Einstellung zu navigieren, um Ihre Änderungen zu speichern.**
Wenn Sie dies nicht tun, geht der Settings Manager davon aus, dass Sie diese Einstellung noch aktualisieren, und markiert sie noch nicht als geändert.

#### Dropdowns

Dropdowns werden verwendet, um eine Option aus einer Liste von Auswahlmöglichkeiten auszuwählen.
Sie sehen so aus (wenn sie geöffnet sind):

<img src={tui_dropdown_open} width="100%" height="auto" />

Das **grüne** Element ist das derzeit ausgewählte.
Verwenden Sie die `Pfeiltasten`, um Optionen zu ändern - währenddessen wird das **Beschreibungsfeld** auf der rechten Seite aktualisiert, um Ihnen mehr über die derzeit ausgewählte Option zu erzählen.
Wenn Sie mit Ihrer Wahl zufrieden sind, drücken Sie `Enter`, um die ausgewählte Option zu wählen, und das Dropdown wird geschlossen und zeigt die derzeit ausgewählte Option:

<img src={tui_dropdown_closed} width="100%" height="auto" />

#### Kontrollkästchen

Kontrollkästchen werden für einfache Ja/Nein-Fragen verwendet.
Sie sehen so aus:

<img src={tui_checkbox_checked} width="100%" height="auto" />

Wenn sie aktiviert sind, haben sie ein `X` in der Mitte, wie Sie oben sehen.
Wenn sie _deaktiviert_ sind, sind sie einfach leer wie folgt:

<img src={tui_checkbox_unchecked} width="100%" height="auto" />

Um die Einstellung zu ändern, wählen Sie sie einfach aus und drücken Sie `Enter`.

### Änderungen speichern

Wenn Sie mit Ihren Änderungen zufrieden sind und sie vor dem Speichern überprüfen möchten, drücken Sie die Schaltfläche **Review Changes and Save** auf dem Startbildschirm.
Zur Erinnerung: Um dorthin zu gelangen, drücken Sie die `Tab`-Taste.

Ihnen wird eine Ansicht angezeigt, die so aussieht:

<img src={tui_native_review} width="100%" height="auto" />

Das **Review-Feld** zeigt hier alle Einstellungen an, die Sie geändert haben, und zeigt die alten Werte und die neuen an.
Zum Beispiel zeigt die erste Zeile hier, dass der **RPL Claim Gas Threshold** früher `150` war und auf `40` geändert wurde.

::: tip HINWEIS
An diesem Punkt sind Ihre Änderungen **noch nicht gespeichert**.
Wenn Sie zurückgehen und etwas ändern möchten, drücken Sie `Escape`, um zum Startbildschirm zurückzukehren.
:::

Wenn Sie mit den Änderungen zufrieden sind, drücken Sie `Enter`, um die neue Konfiguration auf der Festplatte zu speichern.
Sie verlassen dann die Terminal UI und erhalten diese Meldung:

```
Your changes have been saved!
Please restart your daemon service for them to take effect.
```

Wenn Sie die Installation von Rocket Pool noch nicht abgeschlossen haben, kehren Sie jetzt zum Native-Setup-Leitfaden zurück.
Andernfalls können Sie jetzt Ihre Daemon-Dienste neu starten mit:

```shell
sudo systemctl restart rp-node rp-watchtower
```

## Konfiguration über die Befehlszeile

Wenn Sie den Smartnode in einer headless-Umgebung verwenden, in der Sie nicht mit der Terminal UI interagieren können, können Sie Ihren Node stattdessen über die Befehlszeile konfigurieren.

Der Befehl `rocketpool service config` akzeptiert als Argumente jede Einstellung, die normalerweise über die Terminal UI konfiguriert werden kann.
Führen Sie den folgenden Befehl aus, um eine Liste davon zu sehen (beachten Sie, dass sie recht lang ist):

```
rocketpool service config --help
```

Die Ausgabe sieht so aus:

```
NAME:
   rocketpool service config - Configure the Rocket Pool service

USAGE:
   rocketpool service config

OPTIONS:
   --executionClientMode value  Choose which mode to use for your Execution client - locally managed (Docker Mode), or externally managed (Hybrid Mode).
                                Type: choice
                                Options: local, external
 (default: "local")
   --executionClient value  Select which Execution client you would like to run.
                            Type: choice
                            Options: geth, infura, pocket
 (default: "geth")
   --useFallbackExecutionClient         Enable this if you would like to specify a fallback Execution client, which will temporarily be used by the Smartnode and your Consensus client if your primary Execution client ever goes offline.
                                        Type: bool

...
```

Jede Option hat ihren Namen, ihren Typ, ihren Standardwert und (wenn es sich um einen Auswahlparameter handelt) ihre Optionen.
Mit diesem Text können Sie die Option(en) finden, die Sie festlegen möchten, und sie über die entsprechenden Argumente angeben.

::: tip HINWEIS
Dieser Befehl baut auf Ihrer vorhandenen Konfiguration auf. Wenn Sie also bereits einige Einstellungen gespeichert haben und nur andere ändern möchten, müssen Sie diese nicht wiederholen.
Es werden nur Einstellungen aktualisiert, die Sie als Argumente für diesen Befehl angeben.
:::

Wenn Sie die Installation von Rocket Pool noch nicht abgeschlossen haben, kehren Sie jetzt zum Native-Setup-Leitfaden zurück.
Andernfalls besteht der nächste Schritt darin, Ihre Daemon-Dienste neu zu starten mit:

```shell
sudo systemctl restart rp-node rp-watchtower
```
