import { Tab, Tabs } from "@rspress/core/theme";
import nodeAddress from "./images/node_address.png";
import rplWithdrawalConfirmation from "./images/rpl_withdrawal_confirmation.png";

# Impostazione del tuo Indirizzo di Prelievo RPL

È importante comprendere la differenza tra il tuo [indirizzo di prelievo primario](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) e il tuo indirizzo di prelievo RPL. Per impostazione predefinita, il tuo indirizzo di prelievo RPL non è impostato e il tuo indirizzo di prelievo primario è dove verranno inviati tutti i tuoi checkpoint rewards RPL, il tuo RPL in staking e gli ETH della Beacon Chain.

Puoi impostare un [indirizzo di prelievo separato per il tuo RPL](https://rpips.rocketpool.net/RPIPs/RPIP-31) se lo desideri. Il tuo indirizzo di prelievo RPL se impostato sarà in grado di attivare e rivendicare RPL dalle ricompense di inflazione e non avrà effetto sulle ricompense di consenso ETH o su qualsiasi cosa relativa agli ETH. In questo caso, il tuo indirizzo di prelievo primario non avrà più alcuna autorità sulle azioni relative all'RPL.

Questo crea alcune opportunità interessanti dove l'RPL può essere fornito da un'entità a un node operator che non desidera avere esposizione all'RPL. Quell'entità può quindi rivendicare le ricompense RPL per aver messo il collaterale assicurativo richiesto per il nodo. In altre parole, questo consente a diversi attori di fornire ciascun tipo di collaterale.

::: warning NOTA
Al momento della configurazione del tuo nodo per la prima volta, il tuo indirizzo di prelievo RPL è predefinito come non impostato.
Se scegli di impostare un indirizzo di prelievo RPL, **è di vitale importanza impostarlo su un indirizzo diverso controllato da un cold wallet.**
Un cold wallet potrebbe essere un hardware wallet (come un [Ledger](https://www.ledger.com/), [Trezor](https://trezor.io/), o [Grid+](https://gridplus.io/)), o un Smart Contract wallet (come [Safe](https://app.safe.global/welcome)).

Ti **consigliamo vivamente** di NON utilizzare un hot wallet come MetaMask come tuo indirizzo di prelievo RPL.

In questo modo, se il tuo wallet del nodo è compromesso, l'attaccante non ottiene accesso al tuo RPL in staking forzandoti a uscire perché tutti quei fondi verranno inviati al tuo cold wallet separato (che si spera non abbiano).

Gli indirizzi di prelievo RPL sono impostati a livello di node operator.
Se crei più minipool, faranno tutti riferimento allo stesso indirizzo di prelievo RPL quindi devi eseguire questa configurazione solo una volta.

[Vedi qui](https://ethereum.org/en/security/#wallet-security) per alcune basi sulla sicurezza del wallet dalla Ethereum Foundation.
:::

Ci sono due modi diversi per farlo.
Leggi entrambe le opzioni qui sotto per determinare quale si applica a te.

<div className="p-3">
  <Tabs>
    <Tab label="Metodo 1">
      *Usa questo metodo se il tuo nuovo indirizzo di prelievo RPL può essere utilizzato per firmare transazioni tramite MetaMask o WalletConnect.**

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTA</p>
        Questo metodo richiederà di **inviare una transazione** dal tuo nuovo indirizzo di prelievo RPL, quindi **devi avere una piccola quantità di ETH in quell'indirizzo già.**
      </p>

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTA</p>
        Per gli utenti di hardware wallet **Ledger**, nota che Ledger Live non supporta ancora MetaMask o WalletConnect nativamente.
        Dovrai utilizzare MetaMask e connetterlo al tuo Ledger invece.
        Segui [le istruzioni ufficiali Ledger](https://www.ledger.com/academy/security/the-safest-way-to-use-metamask) per farlo.

        Per lavorare con il sito web Rocket Pool, dovrai avere il tuo Ledger connesso, sbloccato e l'app ETH aperta.
        Dovrai anche **abilitare "blind signing"** per la sessione corrente; puoi trovarlo nella parte Impostazioni dell'app ETH sul dispositivo.
        Il blind signing verrà automaticamente disabilitato dopo aver chiuso la sessione.

        Se stai usando Hoodi Testnet e vuoi usare il tuo Ledger come tuo indirizzo di prelievo RPL, **devi creare un nuovo wallet Ethereum sul tuo Ledger** prima di assicurarti di non connettere il tuo indirizzo live alla rete di test, il che tende a causare confusione.
        Assicurati di selezionare la **Hoodi Testnet** nel menu a tendina di selezione della rete quando connetti il tuo Ledger a MetaMask.
        Nota che Ledger Live non mostrerà il tuo saldo sulla rete di test, ma altre applicazioni che supportano la rete di test (come MetaMask ed Etherscan) saranno in grado di visualizzarlo.
      </p>

      1. Esegui `rocketpool node set-rpl-withdrawal-address 'your cold wallet address or ENS name'`. Il tuo nuovo indirizzo di prelievo RPL sarà contrassegnato come "pending". Fino a quando non lo confermi, **il tuo vecchio indirizzo di prelievo RPL sarà ancora utilizzato**.
      2. Per confermarlo, devi inviare una transazione speciale **dal tuo nuovo indirizzo di prelievo RPL** al contratto del minipool per verificare che possiedi l'indirizzo di prelievo RPL.
      1. Il modo più semplice per farlo è navigare sul sito dell'indirizzo di prelievo RPL di Rocket Pool (per la [Hoodi Testnet](https://testnet.node.rocketpool.net/rpl-withdrawal-address) o per [Mainnet](https://node.rocketpool.net/rpl-withdrawal-address)).
      3. Se non hai già connesso Metamask o WalletConnect al sito web Rocket Pool, fallo ora. Clicca sul pulsante **select wallet** al centro dello schermo e scegli MetaMask o WalletConnect in base al wallet che vorresti utilizzare. Ti verrà quindi richiesto di confermare la connessione. Ad esempio, usando MetaMask:

      Clicca **Next**, poi clicca **Confirm** per abilitare il sito web Rocket Pool a utilizzare il tuo wallet. 3. Seleziona **RPL Withdrawal Address** dal menu in alto (o il menu hamburger sul lato sinistro se sei su un dispositivo mobile). 4. Vedrai questo prompt:

      4. Digita il tuo **indirizzo wallet del nodo** qui e clicca sul pulsante arancione **Find** per continuare.

      <img src={nodeAddress} width="100%" height="auto"/>

      1.  Ti verrà richiesto di confermare un indirizzo di prelievo RPL in sospeso. Questo dovrebbe essere lo stesso indirizzo che hai usato mentre eseguivi questo comando precedentemente: `rocketpool node set-rpl-withdrawal-address` Seleziona **Confirm Pending** quando sei pronto.
      2.  Ora, dovrebbe esserci una nuova finestra di conferma nel tuo wallet. Di nuovo, usando MetaMask come esempio, clicca sull'icona MetaMask per aprirlo e dovresti vedere qualcosa del genere:

      Clicca **Confirm** per inviare la transazione alla rete. Questo richiederà del tempo fino a quando non viene incluso in un blocco, ma una volta fatto, vedrai una finestra di conferma:

      <img src={rplWithdrawalConfirmation} width="100%" height="auto"/>

      5. Il tuo nuovo indirizzo di prelievo RPL sarà ora confermato e attivato. Puoi visualizzare questo con `rocketpool node status`.
    </Tab>
    <Tab label="Metodo 2">
      **Usa questo metodo solo se il tuo indirizzo di prelievo RPL _non può_ essere utilizzato per firmare transazioni tramite MetaMask o WalletConnect.**

      In questo metodo, eseguirai:

      ```shell
      rocketpool node set-rpl-withdrawal-address --force `your cold wallet address`
      ```

      Ti verrà offerta la possibilità di inviare una transazione di test prima di confermare questo, per assicurarti di avere l'indirizzo giusto.
      Se confermi questo comando quando ti viene richiesto, il tuo nuovo indirizzo di prelievo RPL sarà impostato immediatamente.


      <p className="rspress-directive danger">
        Facendo questo, bypassi la misura di sicurezza associata al Metodo 1, che richiede di dimostrare che possiedi il nuovo indirizzo.
        Se fai un errore di battitura qui, non c'è modo di annullarlo e **le ricompense del tuo minipool andranno perse per sempre**.

        Ti **incoraggiamo fortemente** a utilizzare il meccanismo della transazione di test prima di confermare questo, e se possibile, usa invece il Metodo 1.
      </p>
    </Tab>

  </Tabs>
</div>

Una volta fatto questo, **non sarai più in grado di modificare il tuo indirizzo di prelievo RPL usando il comando `set-rpl-withdrawal-address`**.
Per modificarlo, dovrai inviare una transazione firmata dal tuo indirizzo di prelievo RPL **attivo** (quello a cui hai appena cambiato).
Il sito web Rocket Pool ha una funzione per aiutarti a fare questo.

Se desideri disimpostare il tuo indirizzo di prelievo RPL, il processo è abbastanza semplice. Prima di tutto, vorrai navigare di nuovo alla pagina dell'Indirizzo di Prelievo RPL sul sito web Rocket Pool.

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnet">https://testnet.node.rocketpool.net/rpl-withdrawal-address</Tab>
    <Tab label="Mainnet">https://node.rocketpool.net/rpl-withdrawal-address</Tab>
  </Tabs>
</div>

Se sei connesso con l'indirizzo di prelievo RPL del nodo, dovresti essere in grado di cliccare il pulsante **unset** sulla destra qui:

<img src="./images/unset_rpl_withdrawal.png" width="100%" height="auto" />

Cliccando **unset** verrai portato a una pagina dove puoi confermare i dettagli. Se sei soddisfatto di ciò che vedi, clicca il pulsante arancione **unset** per inviare la transazione alla rete.

Questo è tutto ciò che c'è da fare per impostare il tuo indirizzo di prelievo RPL! Speriamo che tu abbia trovato il processo veloce e facile.

Sentiti libero di passare dal [nostro server Discord](https://discord.gg/G46XgK264a) per farci sapere cosa ne pensi e rimanere aggiornato sul progetto mentre si evolve.
