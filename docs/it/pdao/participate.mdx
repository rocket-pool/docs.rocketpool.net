import { Tab, Tabs } from "@rspress/core/theme";

# Partecipare alle proposte on-chain della pDAO

Qualsiasi nodo con un potere di voto non nullo può sollevare o partecipare a una proposta pDAO in qualsiasi momento. Le proposte possono essere di uno dei seguenti tipi:

- Modifica delle impostazioni pDAO
- Spese del tesoro una tantum
- Spese ricorrenti del tesoro (comitati di gestione)
- Appartenenza al Security Council

Per maggiori dettagli e motivazioni, fare riferimento ai [tipi di proposta](https://rpips.rocketpool.net/RPIPs/RPIP-33#proposal-types).
È importante comprendere che una proposta pDAO è un'entità on-chain che esiste per eseguire modifiche a livello di protocollo.

## Processo di governance

Una proposta dovrebbe essere preannunciata dal processo di governance prima che finisca on-chain.

Le modifiche al protocollo Rocket Pool vengono proposte, votate ed eseguite utilizzando un processo di governance rigoroso ma trasparente. Il processo inizia con una discussione informale di un'idea all'interno della comunità Discord. Questa idea progredisce poi in discussioni formali nel canale [#governance](https://discordapp.com/channels/405159462932971535/774497904559783947) su Discord e nel [DAO Forum](https://dao.rocketpool.net/), dove subisce ricerche approfondite, modellazione e analisi in preparazione per una [Rocket Pool Improvement Proposal (RPIP)](https://rpips.rocketpool.net/). Successivamente, viene preparata una bozza di RPIP e rivista da revisori RPIP designati per garantirne la qualità e la prontezza per la presentazione alla DAO.
La bozza di proposta viene quindi presentata alla DAO sul forum per ulteriori revisioni, feedback e incorporazione di eventuali modifiche necessarie. Una volta che la proposta è stata perfezionata in base al feedback della comunità, viene aperto un sondaggio sul forum DAO per valutare la prontezza per finalizzare il testo RPIP. Se il sondaggio viene approvato, indicando l'approvazione della comunità, l'RPIP viene contrassegnato come finale e pronto per un voto della Protocol DAO, che viene condotto tramite Snapshot per determinare se la proposta debba essere implementata.

Da qui, l'Oracle DAO solleverà una proposta on-chain. C'è una finestra in cui la Protocol DAO, l'Oracle DAO e la comunità possono rivedere la proposta. Se si raggiunge il consenso, la proposta viene eseguita e le modifiche vengono applicate al protocollo.

Una comoda rappresentazione visiva di questo processo può essere trovata sul [sito web di Rocket Pool](https://rocketpool.net/governance/process).

## Prerequisito

Si prega di leggere il [ciclo di vita di una proposta](./pdao#lifecycle-of-a-pdao-proposal) prima di procedere. Spiegherà le differenze tra tutti i periodi di voto e le azioni che possono essere intraprese durante ciascun periodo.

Il resto di questa pagina ti guiderà attraverso i passaggi necessari per partecipare alle proposte on-chain della pDAO.

## Inizializzare il voto

Se sei un operatore di nodo che si è registrato prima dell'aggiornamento Houston, devi inizializzare il voto per sbloccare il potere di voto. Tieni presente che avere almeno un minipool è un requisito per avere potere di voto.

```shell
rocketpool pdao initialize-voting
```

Questo comando solleverà il prompt qui sotto. Si prega di leggerlo attentamente:

```
Grazie per aver inizializzato il tuo potere di voto!

Hai due opzioni:

1. Votare direttamente (delegare il potere di voto a te stesso)
   Questo ti permetterà di votare direttamente sulle proposte,
   consentendoti di plasmare personalmente la direzione del protocollo.

2. Delegare il tuo voto
   Questo delegherà il tuo potere di voto a qualcuno di cui ti fidi,
   dando loro il potere di votare per tuo conto. Avrai la possibilità di sovrascrivere.

Puoi vedere un elenco di delegati pubblici esistenti su https://delegates.rocketpool.net,
tuttavia, puoi delegare a qualsiasi indirizzo nodo.

Scopri di più su come funziona tutto questo tramite: /it/pdao/participate#participating-in-on-chain-pdao-proposals

Si prega di digitare `direct` o `delegate` per continuare:
```

- Se rispondi con `direct`, il potere di voto verrà inizializzato sul tuo nodo e sarai in grado di votare direttamente sulle proposte della Protocol DAO.
- Se rispondi con `delegate`, avrai l'opportunità di risparmiare un po' di gas inizializzando il voto e [impostando un delegato](./participate#delegating-voting-power) all'interno della stessa transazione.

Devi farlo solo una volta. Configura le informazioni di snapshot iniziali per un nodo. Dopo aver inizializzato il voto, ogni azione intrapresa aggiornerà le informazioni di snapshot del tuo nodo. Una volta che il tuo potere di voto è inizializzato, puoi controllare quanto ne hai usando il seguente comando smartnode:

```shell
rocketpool pdao status
```

:::tip NOTA
Ogni volta che viene creata una nuova proposta, viene creato un albero di voto che rappresenta uno snapshot del potere di voto della rete e delle informazioni sui delegati in concomitanza con la nuova proposta. Ciò significa che il potere di voto del tuo nodo non sarà incluso in una proposta se è stata sollevata prima che inizializzassi il voto. `rocketpool pdao status` mostrerà il potere di voto del tuo nodo all'ultimo blocco, che potrebbe essere o meno rappresentativo del tuo potere di voto su una particolare proposta.
:::

## Inizializzazione automatica del potere di voto

La versione Smartnode `1.13.8` introduce una nuova funzionalità **Auto Initialize Vote Power**, progettata per inizializzare automaticamente il potere di voto sui nodi che non l'hanno ancora fatto. Il potere di voto inizializzato automaticamente è auto-delegato.
Questa funzionalità può essere configurata nelle impostazioni dello Smartnode eseguendo `rocketpool service config` e navigando nella sezione **Smartnode and TX Fees**.

<img src="./images/auto_init_vp.png" width="100%" height="auto" />

Il **Auto-Init Vote Power Gas Threshold** è un limite (in gwei) su questa transazione automatica. Puoi rinunciare a questa attività impostando la soglia su 0. Sentiti libero di rinunciare se il tuo nodo è stato registrato dopo l'aggiornamento Houston o se il potere di voto è già abilitato.

## Impostare l'indirizzo di segnalazione Snapshot

L'impostazione del tuo indirizzo di segnalazione Snapshot ti consentirà di partecipare ai voti Snapshot su un browser o dispositivo mobile senza dover esporre le chiavi del nodo a un wallet caldo.

Ci sono alcune cose da preparare:

- L'indirizzo del tuo nodo
- Un indirizzo che vuoi usare per il voto su Snapshot (indirizzo di segnalazione)

Firmerai un messaggio dicendo che l'indirizzo del tuo nodo può delegare al nuovo indirizzo. Questo messaggio indica la tua intenzione di usare il tuo indirizzo wallet come indirizzo di segnalazione Snapshot.

Seleziona quale rete stai utilizzando da una delle schede qui sotto.

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnet">Se stai provando questo su Hoodi testnet, puoi firmare su questa pagina: https://testnet.node.rocketpool.net/signalling-address</Tab>
    <Tab label="Mainnet">Se sei pronto a configurare questo sulla mainnet, vai qui invece: https://node.rocketpool.net/signalling-address</Tab>
  </Tabs>
</div>

:::danger ATTENZIONE
Non caricare la chiave privata del tuo nodo su un wallet caldo. Si prega di scegliere un altro account come indirizzo di segnalazione.
Dopo aver impostato l'indirizzo di segnalazione, puoi usarlo per votare su Snapshot con il potere di voto del tuo nodo.
:::

Inizia **collegando l'indirizzo che vuoi usare come indirizzo di segnalazione** al sito web usando MetaMask, WalletConnect o uno qualsiasi degli altri metodi supportati dal sito web. Ti verrà quindi presentata questa finestra di dialogo per cercare il tuo indirizzo nodo.

Successivamente, inserirai l'indirizzo del tuo nodo e poi cliccherai il pulsante arancione "Find". Questo verificherà se l'indirizzo è un nodo registrato e poi ti porterà al passaggio successivo.

:::tip SUGGERIMENTO
**Assicurati di avere l'indirizzo del nodo corretto prima di farlo!** se hai bisogno di confermare l'indirizzo del tuo nodo, puoi recuperarlo rapidamente tramite la CLI usando il comando `rocketpool node status`.
:::

Una volta che ti sei registrato e hai confermato l'indirizzo del tuo nodo, vedrai il tuo **indirizzo di segnalazione Snapshot**. Dovrebbe essere lo stesso dell'account con cui ti sei registrato sul sito. Controlla due volte che questo sia corretto prima di procedere. Una volta che sei sicuro di essere registrato nell'account desiderato, fai clic sul pulsante arancione "Sign Message". Vedrai un prompt nella tua app wallet per firmare il seguente messaggio:

```
`indirizzo di segnalazione snapshot` può delegare a me per la governance di Rocket Pool
```

Firmare non ti costerà alcun gas ma impostare sì. Dopo aver firmato, il frontend ti darà un comando da incollare nello smartnode. Vai avanti e incollalo nella CLI del tuo smartnode e segui i passaggi richiesti. Il comando dovrebbe apparire così:

```shell
rocketpool pdao set-signalling-address
`indirizzo di segnalazione snapshot`
`firma EIP712`
```

Se vedi questo messaggio nella tua CLI, sei a posto!

```
L'indirizzo di segnalazione del nodo è stato impostato con successo su `indirizzo di segnalazione snapshot`
```

:::tip SUGGERIMENTO
Non preoccuparti se chiudi accidentalmente il sito o perdi traccia del comando. Puoi semplicemente ripetere i passaggi e **firmare di nuovo usando lo stesso indirizzo nodo e indirizzo di segnalazione**. Il frontend usa `signer.Signmessage()` dalla libreria ethers, il che significa che la tua firma è deterministica dato lo stesso input.
Clicca [qui](https://docs.ethers.org/v6/api/providers/#cid_865) per saperne di più.
:::

Cancellare il tuo indirizzo di segnalazione è piuttosto facile, usa semplicemente questo comando nella CLI:

```shell
rocketpool pdao clear-signalling-address
```

## Consentire il blocco RPL

Puoi ignorare questo passaggio se sei interessato solo a votare su una proposta. Consentire il blocco RPL è richiesto solo per coloro che desiderano proporre o sfidare una proposta.

Il blocco RPL è richiesto per proporre e sfidare. Per impostazione predefinita, il blocco di RPL per qualsiasi scopo sarà disabilitato. Gli operatori del nodo dovranno scegliere di eseguire attività di governance abilitando il blocco di RPL dal loro nodo o dall'indirizzo di prelievo primario. Puoi farlo usando questo comando nello Smartnode:

```shell
rocketpool node allow-rpl-locking
```

Questo ti chiederà di consentire il blocco di RPL quando crei o sfidi proposte di governance. Al contrario, puoi usare il seguente comando per rinunciare al blocco RPL:

```shell
rocketpool node deny-rpl-locking
```

::: tip NOTA
Il RPL bloccato funziona allo stesso modo del RPL in staking regolare ai fini di ricompense, voto e requisiti di collaterale.
Il RPL bloccato non viene conteggiato per le soglie di prelievo RPL.
:::

## Delegare il potere di voto

Un operatore di nodo può scegliere di delegare il proprio potere di voto a un altro operatore di nodo. L'unico requisito è che il tuo delegato sia un nodo registrato.

Per delegare il potere di voto on-chain a un altro nodo, usa il seguente comando:

```shell
rocketpool pdao set-voting-delegate `indirizzo`
```

::: tip NOTA
Se hai delegato il tuo potere di voto a un altro operatore di nodo, puoi reimpostarlo impostando l'indirizzo del delegato sul tuo indirizzo del nodo.
:::

- Durante la fase 1 di una proposta: **Votanti** e **Delegati** possono esprimere il loro voto su una proposta.
- Durante la fase 2 di una proposta: **Gli operatori di nodo** che hanno delegato il loro voto hanno l'opportunità di ribaltare il voto del loro delegato, se non sono d'accordo.

Se sei un operatore di nodo con potere di voto delegato, devi votare durante la fase di voto 1 affinché il potere di voto delegato conti per la proposta. Il tuo voto nella fase 1 varrà il tuo **potere di voto locale + potere di voto delegato**. Il tuo voto nella fase 2 vale solo il tuo **potere di voto locale**.

## Creare una proposta

Per essere idoneo a proporre, un nodo deve soddisfare alcuni requisiti:

- Incluso nello snapshotting (sia [inizializzando il voto](./participate#initializing-voting) o registrandosi dopo Houston)
- Deve avere almeno un minipool
- Ha un potere di voto non nullo
- Ha consentito il [blocco RPL](./participate#allowing-rpl-locking)
- Ha uno stake RPL (meno qualsiasi RPL già bloccato) maggiore della garanzia della proposta

Le proposte esistono per modificare i parametri ed eseguire codice a livello di protocollo! Dovrebbe esserci discussione e consenso attraverso il [processo di governance](./participate#governance-process) prima che una proposta venga creata on-chain.

Usa il comando `rocketpool pdao propose` per visualizzare un menu di opzioni

```
COMMANDS:
   rewards-percentages, rp      Proponi l'aggiornamento delle percentuali di allocazione delle ricompense RPL per gli operatori di nodo, l'Oracle DAO e la Protocol DAO
   one-time-spend, ots          Proponi una spesa una tantum del tesoro della Protocol DAO
   recurring-spend, rs          Proponi una spesa ricorrente del tesoro della Protocol DAO
   recurring-spend-update, rsu  Proponi un aggiornamento a un piano di spesa ricorrente esistente
   security-council, sc         Modifica il Security Council
   setting, s                   Crea una proposta di impostazione della Protocol DAO
```

Ciascuno di questi comandi ti chiederà un elenco di input per creare la proposta desiderata. In questa guida, inviteremo un nodo al Security Council come esempio. Per sollevare una proposta per invitare un nodo al Security Council, useresti il comando:

```shell
rocketpool pdao propose security-council invite
```

Tieni presente che questo passaggio avrà qualche leggera variazione a seconda del tipo di proposta. Questo comando particolare:
`rocketpool pdao propose security-council invite` ti chiederà di inserire un ID seguito da un indirizzo del membro.

```
Inserisci un ID per il membro che vorresti invitare: (nessuno spazio)
test-member

Inserisci l'indirizzo del membro:
0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145

... stime gas ...

Sei sicuro di voler proporre di invitare test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) al Security Council? [y/n]
```

Dopo che questo è incluso in un blocco, verrà creata una proposta pDAO! La proposta entrerà nel [periodo di ritardo del voto](./pdao#vote-delay-period) al momento della creazione.

## Visualizzare lo stato di una proposta

Ad ogni proposta viene assegnato un `proposalID`. In questo caso, la nostra proposta per invitare `0xBdbc...` al Security Council è rappresentata con `ID 71`. Ci sono alcuni modi per visualizzare lo stato della proposta. Un metodo visualizzerà un elenco di ogni proposta pDAO insieme al loro stato (in sospeso, riuscito, eseguito, ecc.). Il secondo metodo visualizza dettagli approfonditi su una proposta specifica.

<div className="p-3">
  <Tabs>
    <Tab label="Visualizzare un elenco di proposte">
      Per elencare tutte le proposte, usa il seguente comando:

      ```shell
      rocketpool pdao proposals list
      ```

      Questo visualizzerà un elenco di tutte le proposte e del loro stato

      ```
      1 proposta/e in sospeso:

      71: invita test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) al Security Council - Proposto da:
      0x681B8BBf08708e64694005c7Dc307b381b4D1A7D

      Proposta/e riuscita/e:

      Proposta/e eseguita/e:

      Proposta/e distrutta/e:

      Proposta/e che non hanno raggiunto il quorum:

      Proposta/e sconfitta/e:

      Proposta/e scaduta/e:

      ```

      Qui possiamo vedere che la nostra proposta `invita test-member` ha un ID di 71 ed è nello stato in sospeso. In questo stato,
      gli [sfidanti](/it/pdao/pdao#challenge-process) possono contestare la validità del
      pollard di Merkle (usato per calcolare il potere di voto) fornito dal proponente. Quando `proposal.vote.delay.time` termina,
      la proposta passerà alle fasi di voto attive. Sentiti libero di rivedere il [ciclo di vita di una
      proposta](./pdao#lifecycle-of-a-pdao-proposal) per un ripasso.
    </Tab>
    <Tab label="Visualizzare i dettagli della proposta">
      Ora che hai l'ID della proposta, puoi visualizzare lo stato della tua proposta usando questo comando:

      ```shell
      rocketpool pdao proposals details `proposal-id`
      ```

      Qui puoi visualizzare tutte le informazioni relative a una proposta specifica. Ad esempio, il
      payload di esecuzione, in quale fase si trova la proposta e la direzione del voto.

      ```
      ID proposta: 71
      Messaggio: invita test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) al Security Council
      Payload: proposalSecurityInvite(test-member,0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145)
      Payload (bytes):
      f944c19f0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000bdbcb42dd8e39323a395b2b72d2c8e7039f1f145000000000000000000000000000000000000000000000000000000000000000b746573742d6d656d626572000000000000000000000000000000000000000000
      Proposto da: 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D
      Creato il: 12 Mar 24 06:15 UTC
      Stato: In sospeso
      Inizio voto: 12 Mar 24 06:20 UTC
      Finestra di sfida: 30m0s
      Potere di voto richiesto: 90943818825
      Potere di voto a favore: 0
      Potere di voto contro: 0
      Potere di voto astenuto: 0
      Potere di voto contro: 0
      Il nodo ha votato: no
      ```

      <p className="rspress-directive tip">
        <p className="rspress-directive-title">NOTA</p>
        Lo stato di questa proposta di esempio è `In sospeso`. Questo indica che la proposta può essere sfidata, prima
        di passare a `Attivo (Fase 1)`. Nessun voto può aver luogo durante lo stato `In sospeso`.
      </p>
    </Tab>

  </Tabs>
</div>

## Votare su una proposta

Durante un periodo di voto, **Gli operatori di nodo** e **Delegati** possono esprimere un voto con una delle quattro opzioni:

```
1. Astieniti: il potere di voto del votante contribuisce al quorum ma non è né a favore né contro la proposta.
2. A favore: il votante vota a favore dell'esecuzione della proposta.
3. Contro: il votante vota contro l'esecuzione della proposta.
4. Veto: il votante vota contro la proposta e indica che ritiene la proposta spam o dannosa.
```

Il loro potere di voto verrà applicato all'opzione di loro scelta. Il potere di voto è una funzione dello "stake RPL effettivo."
Una lettura più dettagliata può essere trovata nel [repository rocketpool-research](https://github.com/rocket-pool/rocketpool-research/blob/master/Protocol%20DAO/kane/pDAO%20Replacement/pDAO.md#overview-of-on-chain-voting).

::: tip NOTA
Se sei un operatore di nodo con potere di voto delegato, devi votare durante la fase di voto 1 affinché il potere di voto delegato conti per la proposta. Il tuo voto nella fase 1 varrà il tuo potere di voto locale + potere di voto delegato. Il tuo voto nella fase 2 vale solo il tuo potere di voto locale. Si prega di tenere presente che un nodo può votare una sola volta su una proposta, quindi scegli con attenzione.
:::

Usa questo comando per esprimere un voto:

```shell
rocketpool pdao proposals vote
```

Ti verrà richiesto di selezionare una proposta su cui votare se c'è almeno una proposta in una fase di voto attiva.
Il menu dovrebbe visualizzare tutte le proposte su cui il tuo nodo è idoneo a votare:

```
1: proposta 71 (messaggio: 'invita test-member', payload: proposalSecurityInvite(test-member,0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145), fine fase 1: 14 Mar 24 05:40 UTC, vp richiesto: 0.00, a favore: 0.00, contro: 0.00, astenuto: 0.00, veto: 0.00, proposto da: 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D)
2: proposta 72 (messaggio: 'sostituisci langers-not-his-eoa (0xaC1396c21Eaf6630113516C69d63b7CB59B98b3E) nel Security Council con tpan (0x6E9E4Cc0A8172349E049128574E1fb85B8D3CE9E)', payload: proposalSecurityReplace(0xaC1396c21Eaf6630113516C69d63b7CB59B98b3E,tpan,0x6E9E4Cc0A8172349E049128574E1fb85B8D3CE9E), fine fase 1: 14 Mar 24 05:40 UTC, vp richiesto: 0.00, a favore: 0.00, contro: 0.00, astenuto: 0.00, veto: 0.00, proposto da: 0xe2fC31d61E28BB16c0857D4682AB3616FA7A793d)
3: proposta 73 (messaggio: 'imposta proposal.vote.delay.time', payload: proposalSettingUint(rocketDAOProtocolSettingsProposals,proposal.vote.delay.time,60), fine fase 1: 14 Mar 24 05:41 UTC, vp richiesto: 0.00, a favore: 0.00, contro: 0.00, astenuto: 0.00, veto: 0.00, proposto da: 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D)
```

Dopo aver selezionato un'opzione, ti verrà chiesto come vuoi esprimere il tuo voto.

```
Come vorresti votare sulla proposta?
1: Astieniti
2: A favore
3: Contro
4: Veto
```

Selezionando un'opzione verrà quindi visualizzato il tuo potere di voto e poi ti verrà richiesto di inviare la transazione:

```
Il tuo attuale potere di voto: 20123617964

+============== Prezzi Gas suggeriti ==============+
| Tempo di attesa medio |  Tariffa massima  |    Costo gas totale    |
| 15 secondi    | 76 gwei   | 0.0176 a 0.0265 ETH |
| 1 minuto      | 56 gwei   | 0.0127 a 0.0190 ETH |
| 3 minuti     | 56 gwei   | 0.0127 a 0.0190 ETH |
| >10 minuti   | 56 gwei   | 0.0127 a 0.0190 ETH |
+==================================================+
Questi prezzi includono una tariffa di priorità massima di 2.00 gwei.
Inserisci la tua tariffa massima (inclusa la tariffa di priorità) o lascia vuoto per l'impostazione predefinita di 56 gwei:
```

Hai votato con successo sulla proposta una volta che la transazione è inclusa nel blocco! A questo punto, puoi usare `rocketpool pdao proposal details <proposal-id>` per visualizzare lo stato della proposta. Una proposta deve raggiungere il **potere di voto richiesto** di `proposal.quorum` e la maggioranza del **potere di voto a favore** affinché abbia successo.

```
Potere di voto richiesto:  140970562215
Potere di voto a favore:       197980809837
Potere di voto contro:   0
Potere di voto astenuto: 0
Potere di voto contro:   0
Il nodo ha votato:         A favore
```

Affinché l'esempio sopra passi, il potere di voto deve superare un quorum di `140970562215` potere di voto. C'è `197980809837` potere di voto a favore e nessun voto contro o astenuto. La proposta è pronta per il successo e pronta per l'esecuzione entro la fine di `proposal.vote.phase2.time`.

## Eseguire una proposta riuscita

Congratulazioni! La tua proposta è passata! Ora tutto ciò che resta da fare è eseguire la proposta. Tieni presente che chiunque può essere l'esecutore di una proposta. Per eseguire una proposta riuscita, digita il comando:

```shell
rocketpool pdao execute
```

Selezionando un'opzione ti verrà richiesto di inviare una transazione. Una volta che questa transazione è inclusa in un blocco, la modifica verrà applicata al protocollo Rocket Pool!

```
Seleziona una proposta da eseguire:
1: Tutte le proposte disponibili
2: proposta 71 (invita test-member (0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145) al Security Council)',
proposalSecurityInvite(test-member,0xBdbcb42DD8E39323a395B2B72d2c8E7039f1F145)
```

## Richiedere garanzie e ricompense

I proponenti o gli sfidanti possono richiedere le loro garanzie al termine di una proposta. A seconda dell'esito di una proposta, un proponente o sfidante può o meno essere in grado di richiedere la loro `proposal.bond` e `proposal.challenge.bond`.

Ecco alcune regole che dettano le condizioni in cui le garanzie possono essere richieste:

- Se una proposta viene sconfitta, il proponente perde la sua garanzia che viene divisa proporzionalmente tra gli sfidanti che hanno contribuito alla sconfitta della proposta. Tutti gli altri sfidanti ricevono solo la loro garanzia indietro.
- Contribuire alla sconfitta di una proposta significa che uno sfidante ha presentato un indice che è stato successivamente dimostrato essere errato dall'incapacità del proponente di rispondere a una sfida. È possibile che ci siano più indici errati, ma solo quelli che hanno portato alla sconfitta della proposta condividono la ricompensa. Tutti gli altri sfidanti ricevono solo la loro garanzia indietro.
- Se uno sfidante sfida un nodo, il proponente risponde e la proposta non viene sconfitta. Il proponente può richiedere le garanzie di sfida dalle sfide non valide.
- Se una proposta viene sconfitta, il proponente perde la sua garanzia che viene divisa proporzionalmente tra gli sfidanti che hanno contribuito alla sconfitta della proposta.

Usa questo comando per richiedere garanzie:

```shell
rocketpool pdao claim-bonds
```

Questo visualizzerà ogni proposta da cui sei idoneo a richiedere garanzie. Puoi richiedere garanzie da una proposta specifica, oppure puoi richiedere garanzie e ricompense da tutte le proposte idonee.

```
Seleziona una proposta da cui sbloccare garanzie / richiedere ricompense:
1: Tutte le proposte disponibili
2: Proposta 42 (proponente: vero, sbloccabile: 21.00 RPL, ricompense: 0.00 RPL)
3: Proposta 43 (proponente: vero, sbloccabile: 21.00 RPL, ricompense: 0.00 RPL)
4: Proposta 44 (proponente: vero, sbloccabile: 21.00 RPL, ricompense: 0.00 RPL)
5: Proposta 46 (proponente: vero, sbloccabile: 21.00 RPL, ricompense: 0.00 RPL)
6: Proposta 47 (proponente: vero, sbloccabile: 21.00 RPL, ricompense: 0.00 RPL)
7: Proposta 48 (proponente: vero, sbloccabile: 21.00 RPL, ricompense: 0.00 RPL)
8: Proposta 49 (proponente: vero, sbloccabile: 21.00 RPL, ricompense: 0.00 RPL)
```

Una volta selezionata un'opzione, ti verranno forniti i consigli sui costi del gas attuali della rete; conferma la tua selezione del prezzo del gas e segui il resto dei prompt.

```
+============== Prezzi Gas suggeriti ==============+
| Tempo di attesa medio |  Tariffa massima  |    Costo gas totale    |
| 15 secondi    | 26 gwei   | 0.1591 a 0.2387 ETH |
| 1 minuto      | 21 gwei   | 0.1261 a 0.1891 ETH |
| 3 minuti     | 21 gwei   | 0.1261 a 0.1891 ETH |
| >10 minuti   | 21 gwei   | 0.1261 a 0.1891 ETH |
+==================================================+

Questi prezzi includono una tariffa di priorità massima di 2.00 gwei.
Inserisci la tua tariffa massima (inclusa la tariffa di priorità) o lascia vuoto per l'impostazione predefinita di 21 gwei:


Utilizzando una tariffa massima di 21.00 gwei e una tariffa di priorità di 2.00 gwei.
Sei sicuro di voler richiedere garanzie e ricompense da 7 proposte? [y/n]
```

Nota che se selezioni la prima opzione per richiedere tutte le proposte disponibili, verranno eseguite singolarmente e non come un'unica transazione.

## Creare una spesa ricorrente del tesoro

Dovrai preparare alcuni input per creare una spesa ricorrente del tesoro:

- Un nome del contratto
- L'indirizzo del destinatario
- Quantità di RPL da inviare per periodo
- L'ora di inizio per il pagamento ricorrente (come timestamp UNIX)
- La durata di ogni periodo di pagamento in ore / minuti / secondi (es. 168h0m0s)
- Numero di periodi di pagamento

::: tip INFO
Il destinatario dovrà prendere nota del nome del contratto per richiedere i pagamenti. Non preoccuparti però, poiché queste informazioni sono memorizzate e possono essere recuperate usando il comando `rocketpool pdao proposals details <proposal-id>`
:::

Per sollevare una proposta per impostare una spesa ricorrente del tesoro, usa il seguente comando smartnode e segui i prompt:

```shell
rocketpool pdao propose recurring-spend
```

Ecco come appare tutto insieme:

```
Inserisci un nome del contratto per questo pagamento ricorrente:
test-recurring-spend

Inserisci un indirizzo del destinatario per questo pagamento ricorrente:
0x681B8BBf08708e64694005c7Dc307b381b4D1A7D

Inserisci una quantità di RPL da inviare a 0x681B8BBf08708e64694005c7Dc307b381b4D1A7D per periodo:
1

Il tuo valore verrà moltiplicato per 10^18 per essere utilizzato nei contratti, il che risulta in:

[1000000000000000000]

Assicurati che questo sia ciò che vuoi e non abbia errori di virgola mobile.

Questo risultato è corretto? [y/n]
y

Inserisci l'ora in cui inizierà il pagamento ricorrente (come timestamp UNIX):
1717935233

Il timestamp fornito corrisponde a 2024-06-09 12:13:53 +0000 UTC - è corretto? [y/n]
y

Inserisci la durata di ogni periodo di pagamento in ore / minuti / secondi (es. 168h0m0s):
720h

Inserisci il numero totale di periodi di pagamento:
24
```

Una volta inseriti tutti gli input richiesti, verrà sollevata una proposta per creare un pagamento ricorrente. Quando la pDAO approva ed esegue questa proposta, al destinatario vengono allocati `1 RPL` a partire da `2024-06-09 12:13:53 +0000 UTC` ogni `720 ore` per un totale di `24 pagamenti`.

## Richiedere una spesa ricorrente del tesoro

Richiedere pagamenti ricorrenti dovrebbe essere abbastanza semplice! Naviga nel nostro strumento frontend [qui](https://node.rocketpool.net/claim-recurring-payments) per farlo. Se stai provando questo su Hoodi testnet, usa [questo](https://testnet.node.rocketpool.net/stake-rpl-on-behalf-of-node) link invece.

Una volta sul sito, fai clic sul pulsante **connect wallet**. Si prega di leggere e accettare i Termini di servizio e Informativa sulla privacy, questo abiliterà diversi modi per connettersi, quindi fai clic su connect **metamask**.

MetaMask ti chiederà di selezionare un account da connettere al sito web. Dopo aver effettuato l'accesso, dovrai inserire il **nome del contratto**. Facendo ciò verranno visualizzati tutti i dettagli rilevanti. Assicurati di controllare due volte l'indirizzo del destinatario. Chiunque può chiamare la funzione di richiesta, ma ogni contratto di pagamento avrà un destinatario designato per disperdere RPL.

<img src="./images/claim_recurring1.png" width="100%" height="auto" />

Puoi richiedere i tuoi pagamenti in qualsiasi momento, otterrai solo il totale RPL non richiesto fino al periodo più recente.
In alternativa, puoi aspettare fino a quando tutti i periodi sono passati per raccogliere tutto in una volta e risparmiare sul gas.

Premi semplicemente il grande pulsante arancione richiedi quando sei pronto e rivedi la transazione in metamask (o il tuo wallet preferito). Una volta fatto, sei a posto!
