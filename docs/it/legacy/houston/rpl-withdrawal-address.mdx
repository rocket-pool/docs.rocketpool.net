import { Tab, Tabs } from "@rspress/core/theme";
import nodeAddress from "./images/node_address.png";
import rplWithdrawalConfirmation from "./images/rpl_withdrawal_confirmation.png";

# Impostazione del tuo indirizzo di prelievo RPL

È importante comprendere la differenza tra il tuo [indirizzo di prelievo primario](../../node-staking/prepare-node#setting-your-primary-withdrawal-address) e il tuo indirizzo di prelievo RPL. Per impostazione predefinita, il tuo indirizzo di prelievo RPL non è impostato e il tuo indirizzo di prelievo primario è dove tutte le tue ricompense checkpoint RPL, il tuo RPL in staking e l'ETH della Beacon Chain verranno inviati.

Puoi impostare un [indirizzo di prelievo separato per il tuo RPL](https://rpips.rocketpool.net/RPIPs/RPIP-31) se lo desideri. Il tuo indirizzo di prelievo RPL, se impostato, sarà in grado di attivare e richiedere RPL dalle ricompense di inflazione e non avrà alcun effetto sulle ricompense di consenso ETH o su qualsiasi cosa relativa all'ETH. In questo caso, il tuo indirizzo di prelievo primario non avrà più alcuna autorità sulle azioni relative all'RPL.

Questo crea alcune interessanti opportunità in cui l'RPL può essere fornito da un'entità a un operatore di nodo che non desidera avere esposizione all'RPL. Quell'entità può quindi richiedere le ricompense RPL per aver fornito la garanzia assicurativa richiesta per il nodo. In altre parole, questo consente a diversi attori di fornire ciascun tipo di garanzia.

::: warning NOTA
Al momento della configurazione del tuo nodo per la prima volta, il tuo indirizzo di prelievo RPL è predefinito come non impostato.
Se scegli di impostare un indirizzo di prelievo RPL, **è di vitale importanza impostarlo su un indirizzo diverso controllato da un cold wallet.**
Un cold wallet potrebbe essere un hardware wallet (come [Ledger](https://www.ledger.com/), [Trezor](https://trezor.io/), o [Grid+](https://gridplus.io/)), o un wallet Smart Contract (come [Safe](https://app.safe.global/welcome)).

**Consigliamo vivamente** di NON utilizzare un hot wallet come MetaMask come indirizzo di prelievo RPL.

In questo modo, se il tuo wallet nodo viene compromesso, l'attaccante non ottiene accesso al tuo RPL in staking forzandoti a uscire perché tutti quei fondi verranno inviati al tuo cold wallet separato (che si spera non abbiano).

Gli indirizzi di prelievo RPL sono impostati a livello di operatore di nodo.
Se crei più minipool, faranno tutti riferimento allo stesso indirizzo di prelievo RPL quindi devi eseguire questa configurazione solo una volta.

[Vedi qui](https://ethereum.org/en/security/#wallet-security) per alcune nozioni di base sulla sicurezza dei wallet dalla Ethereum Foundation.
:::

Ci sono due modi diversi per farlo.
Si prega di leggere entrambe le opzioni qui sotto per determinare quale si applica a te.

<div className="p-3">
  <Tabs>
    <Tab label="Metodo 1">
      *Usa questo metodo se il tuo nuovo indirizzo di prelievo RPL può essere usato per firmare transazioni tramite MetaMask o WalletConnect.**

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTA</p>
        Questo metodo richiederà di **inviare una transazione** dal tuo nuovo indirizzo di prelievo RPL, quindi **devi già avere una piccola quantità di ETH in quell'indirizzo.**
      </p>

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTA</p>
        Per gli utenti di hardware wallet **Ledger**, nota che Ledger Live non supporta ancora nativamente MetaMask o WalletConnect.
        Dovrai invece usare MetaMask e connetterlo al tuo Ledger.
        Segui [le istruzioni ufficiali Ledger](https://www.ledger.com/academy/security/the-safest-way-to-use-metamask) per farlo.

        Per lavorare con il sito web Rocket Pool, dovrai avere il tuo Ledger connesso, sbloccato e l'app ETH aperta.
        Dovrai anche **abilitare "blind signing"** per la sessione corrente; puoi trovare questo nella sezione Impostazioni dell'app ETH sul dispositivo.
        La firma cieca verrà automaticamente disabilitata dopo aver chiuso la sessione.

        Se stai usando Hoodi Testnet e vuoi usare il tuo Ledger come indirizzo di prelievo RPL, **devi creare un nuovo wallet Ethereum sul tuo Ledger** prima per assicurarti di non connettere il tuo indirizzo live alla rete di test, il che tende a causare confusione.
        Assicurati di selezionare **Hoodi Testnet** nel menu a discesa di selezione della rete quando connetti il tuo Ledger a MetaMask.
        Nota che Ledger Live non mostrerà il tuo saldo sulla rete di test, ma altre applicazioni che supportano la rete di test (come MetaMask ed Etherscan) saranno in grado di visualizzarlo.
      </p>

      1. Esegui `rocketpool node set-rpl-withdrawal-address 'your cold wallet address or ENS name'`. Il tuo nuovo indirizzo di prelievo RPL sarà contrassegnato come "in sospeso". Fino a quando non lo confermi, **il tuo vecchio indirizzo di prelievo RPL sarà ancora utilizzato**.
      2. Per confermarlo, devi inviare una transazione speciale **dal tuo nuovo indirizzo di prelievo RPL** al contratto minipool per verificare che possiedi l'indirizzo di prelievo RPL.
      1. Il modo più semplice per farlo è navigare sul sito dell'indirizzo di prelievo RPL di Rocket Pool (per [Hoodi Testnet](https://testnet.node.rocketpool.net/rpl-withdrawal-address) o per [Mainnet](https://node.rocketpool.net/rpl-withdrawal-address)).
      3. Se non hai già connesso Metamask o WalletConnect al sito web Rocket Pool, fallo ora. Clicca sul pulsante **select wallet** al centro dello schermo e scegli MetaMask o WalletConnect in base a quale wallet vorresti usare. Ti verrà quindi chiesto di confermare la connessione. Ad esempio, usando MetaMask:

      Clicca **Next**, poi clicca **Confirm** per abilitare il sito web Rocket Pool a usare il tuo wallet. 3. Seleziona **RPL Withdrawal Address** dal menu in alto (o dal menu hamburger a sinistra se sei su un dispositivo mobile). 4. Vedrai questo prompt:

      4. Digita qui il tuo **indirizzo wallet nodo** e clicca sul pulsante arancione **Find** per continuare.

      <img src={nodeAddress} width="100%" height="auto"/>

      1.  Ti verrà chiesto di confermare un indirizzo di prelievo RPL in sospeso. Questo dovrebbe essere lo stesso indirizzo che hai usato eseguendo questo comando in precedenza: `rocketpool node set-rpl-withdrawal-address` Seleziona **Confirm Pending** quando sei pronto.
      2.  Ora, dovrebbe esserci una nuova finestra di dialogo di conferma nel tuo wallet. Ancora, usando MetaMask come esempio, clicca sull'icona MetaMask per aprirlo e dovresti vedere qualcosa del genere:

      Clicca **Confirm** per inviare la transazione alla rete. Ci vorrà un po' di tempo fino a quando non verrà inclusa in un blocco, ma una volta fatto, vedrai una finestra di dialogo di conferma:

      <img src={rplWithdrawalConfirmation} width="100%" height="auto"/>

      5. Il tuo nuovo indirizzo di prelievo RPL sarà ora confermato e attivato. Puoi visualizzarlo con `rocketpool node status`.
    </Tab>
    <Tab label="Metodo 2">
      **Usa questo metodo solo se il tuo indirizzo di prelievo RPL _non può_ essere usato per firmare transazioni tramite MetaMask o WalletConnect.**

      In questo metodo, eseguirai:

      ```shell
      rocketpool node set-rpl-withdrawal-address --force `your cold wallet address`
      ```

      Ti verrà offerta la possibilità di inviare una transazione di test prima di confermarlo, per assicurarti di avere l'indirizzo giusto.
      Se confermi questo comando quando ti viene richiesto, il tuo nuovo indirizzo di prelievo RPL verrà impostato immediatamente.


      <p className="rspress-directive danger">
        Facendo questo, bypassi la misura di sicurezza associata al Metodo 1, che richiede di dimostrare che possiedi il nuovo indirizzo.
        Se fai un errore di battitura qui, non c'è modo di annullarlo e **le ricompense del tuo minipool andranno perse per sempre**.

        **Consigliamo vivamente** di usare il meccanismo della transazione di test prima di confermarlo, e se possibile, di usare invece il Metodo 1.
      </p>
    </Tab>

  </Tabs>
</div>

Una volta fatto questo, **non sarai più in grado di cambiare il tuo indirizzo di prelievo RPL usando il comando `set-rpl-withdrawal-address`**.
Per cambiarlo, dovrai inviare una transazione firmata dal tuo indirizzo di prelievo RPL **attivo** (quello a cui hai appena cambiato).
Il sito web Rocket Pool ha una funzione per aiutarti a farlo.

Se desideri rimuovere il tuo indirizzo di prelievo RPL, il processo è piuttosto semplice. Per prima cosa, vorrai navigare di nuovo alla pagina RPL Withdrawal Address sul sito web Rocket Pool.

<div className="p-3">
  <Tabs>
    <Tab label="Hoodi Testnet">https://testnet.node.rocketpool.net/rpl-withdrawal-address</Tab>
    <Tab label="Mainnet">https://node.rocketpool.net/rpl-withdrawal-address</Tab>
  </Tabs>
</div>

Se hai effettuato l'accesso con l'indirizzo di prelievo RPL del nodo, dovresti essere in grado di cliccare sul pulsante **unset** sulla destra qui:

<img src="./images/unset_rpl_withdrawal.png" width="100%" height="auto" />

Cliccando **unset** ti porterà a una pagina dove puoi confermare i dettagli. Se sei soddisfatto di ciò che vedi, clicca sul pulsante arancione **unset** per inviare la transazione alla rete.

Questo è tutto ciò che c'è da fare per impostare il tuo indirizzo di prelievo RPL! Speriamo che tu abbia trovato il processo rapido e semplice.

Sentiti libero di passare al [nostro server Discord](https://discord.gg/G46XgK264a) per farci sapere cosa ne pensi e rimanere aggiornato sul progetto mentre evolve.
