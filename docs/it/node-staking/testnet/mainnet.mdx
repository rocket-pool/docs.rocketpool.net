import { Tab, Tabs } from "@rspress/core/theme";

# Migrazione dalla Rete di Test alla Mainnet

Se hai già utilizzato Rocket Pool sulla nostra rete di test Hoodi, ti senti a tuo agio con il suo funzionamento e sei pronto a mettere in stake ETH o eseguire un nodo per davvero sulla catena Ethereum principale, allora questa guida fa per te!
Qui troverai le istruzioni su come migrare uno stack Smartnode esistente dalla rete di test Hoodi a uno connesso alla mainnet di Ethereum, pronto per mettere in stake i tuoi veri ETH e RPL.

## Pool Staking sulla Mainnet

Il pool staking è in gran parte lo stesso processo sulla mainnet così come lo era sulla testnet.
L'URL sarà diverso e l'indirizzo del token rETH potrebbe essere diverso, ma non ci sono cambiamenti significativi al flusso di lavoro.
Segui la [Guida allo Staking](../../liquid-staking/overview), che è stata aggiornata con le istruzioni per la mainnet.

### Differenze tra la Testnet e la Mainnet

- Lo Smartnode della testnet ha un faucet per l'ETH di test. Lo Smartnode della mainnet **non ha un faucet**. Dovrai fornire il tuo ETH per mettere in stake.
- La mainnet supporta molti wallet Ethereum tramite WalletConnect, quindi puoi utilizzare altri wallet che non potevi utilizzare sulla testnet. **Non sei più limitato all'uso di Metamask per mettere in stake**.

## Operazione dello Smartnode sulla Mainnet

::: danger NOTA
**Niente** dalla rete di test può essere migrato alla mainnet.
I dati della catena sono diversi sia per l'Execution che per il Consensus, quindi devi rimuovere i vecchi dati della catena e risincronizzare le catene della mainnet da zero.
I tuoi validatori sulla testnet non vengono trasferiti alla mainnet.
Inoltre, per motivi di sicurezza, compatibilità e protezione, **devi creare un nuovo wallet sulla mainnet!**
**Non utilizzare il wallet del tuo nodo della testnet sulla mainnet!**

**I seguenti passaggi elimineranno tutti i tuoi dati della testnet.**
Se desideri preservare la tua configurazione della rete di test, dovresti eseguire il backup del tuo disco rigido o spostarlo su una seconda macchina.
:::

### Differenze tra la Testnet e la Mainnet

- Lo Smartnode della testnet ha un faucet per ETH e RPL. Lo Smartnode della mainnet **non ha un faucet**. Dovrai fornire il tuo ETH e il tuo RPL.
- Se stai utilizzando Geth, il carico di lavoro del tuo nodo sarà **considerevolmente più alto**. Geth richiede circa 40 volte lo spazio di archiviazione di Hoodi e richiede più potenza CPU e RAM per elaborare. Se stai utilizzando la dashboard Grafana di Rocket Pool, preparati a vedere un utilizzo molto più elevato.
  Un nodo Geth completo utilizza 1,4 TB al 2025-09-19. [Far scadere i dati dei blocchi precedenti al merge](../maintenance/history-expiry) può ridurre l'utilizzo dello storage di circa 300-500 GB.
- I tuoi peer della Beacon Chain (e quindi, la tua efficacia di attestazione) saranno **più alti** rispetto alla testnet. I peer sulla mainnet sono molto più diversificati e tendono ad essere di qualità superiore rispetto alla testnet.
- Il checkpoint delle ricompense RPL si verifica ogni **28 giorni** invece che ogni 2 giorni, per aiutare a compensare gli alti costi del gas.
- Il prezzo RPL utilizzato dalla rete Rocket Pool (e quindi, il tuo livello di collaterale) insieme all'RPL totale effettivamente in stake sulla rete vengono riportati **una volta ogni 24 ore** invece che una volta ogni ora.

### Migrazione Automatica (Solo Modalità Docker)

Per gli utenti della Modalità Docker, lo Smartnode può migrare alla Mainnet per te automaticamente.

**Mentre hai ancora la testnet configurata**, esci dai tuoi validatori su Hoodi:

```
rocketpool minipool exit
```

Seleziona `1: All available minipools` dall'elenco delle scelte e attendi il completamento.
Questo aiuterà a pulire la rete rimuovendo i tuoi validatori invece di lasciarli a fallire costantemente le attestazioni e indebolire la salute di Hoodi (dato che non sono più online).

Una volta fatto, apri il Settings Manager:

```
rocketpool service config
```

Successivamente, apri la categoria **Smartnode and TX Fees** e cambia il menu a tendina **Network** da `Hoodi Testnet` a `Ethereum Mainnet`:

<img src="../images/tui-change-network.png" width="100%" height="auto" />

Quando salvi ed esci, riceverai una notifica che tutto sta per essere cancellato e una finestra di dialogo di conferma:

```
WARNING: You have requested to change networks.

All of your existing chain data, your node wallet, and your validator keys will be removed.

Please confirm you have backed up everything you want to keep, because it will be deleted if you answer `y` to the prompt below.

Would you like the Smartnode to automatically switch networks for you? This will destroy and rebuild your `data` folder and all of Rocket Pool's Docker containers. [y/n]
```

Esegui il backup di tutto ciò che vuoi conservare (come la tua cartella `data` che contiene il wallet del tuo nodo e le chiavi del validatore), quindi premi `y` e `Invio` quando sei pronto.
Lo Smartnode gestirà il passaggio automaticamente.

Quando è terminato, ti ritroverai con un'installazione pulita sulla Mainnet.
Tutte le tue impostazioni (come la scelta del client) saranno preservate, ma dovrai creare un nuovo wallet. Inoltre, probabilmente non avrai un _Checkpoint Sync URL_ sulla mainnet e dovresti configurarne uno come spiegato [qui](../config-docker.html#beacon-chain-checkpoint-syncing); altrimenti ci vorrà molto tempo per sincronizzare la beacon chain della mainnet.

### Migrazione Manuale

Se per qualsiasi motivo non puoi sfruttare il processo di migrazione automatica dello Smartnode, puoi farlo manualmente in pochi semplici passaggi:

<div className="p-3">
  <Tabs>
    <Tab label="Docker">
      1. **Mentre hai ancora la testnet configurata**, esci dai tuoi validatori su Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Seleziona `1: All available minipools` dall'elenco delle scelte e attendi il completamento.
      Questo aiuterà a pulire la rete rimuovendo i tuoi validatori invece di lasciarli a fallire costantemente le attestazioni e indebolire la salute di Hoodi (dato che non sono più online).

      2. Arresta la testnet:

      ```shell
      rocketpool service stop
      ```

      3. Elimina i dati della catena della testnet e i container Docker:

      ```shell
      rocketpool service terminate
      ```

      4. Elimina la cartella di configurazione di Rocket Pool:

      ```shell
      sudo rm -rf ~/.rocketpool
      ```

      5. (Opzionale) Elimina la CLI di Rocket Pool:

      ```shell
      rm ~/bin/rocketpool
      ```
      Sovrascriverai comunque questo con l'ultima versione della CLI, ma se vuoi essere accurato, puoi prima rimuovere quella vecchia.

      A questo punto la tua installazione della testnet è stata eliminata e puoi migrare in sicurezza a una nuova installazione della mainnet.
      Segui attentamente la guida [Creazione del Nodo con Docker](../docker) per configurarla.
    </Tab>
    <Tab label="Native Mode">
      1. **Mentre hai ancora la testnet configurata**, esci dai tuoi validatori su Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Seleziona `1: All available minipools` dall'elenco delle scelte e attendi il completamento.
      Questo aiuterà a pulire la rete rimuovendo i tuoi validatori invece di lasciarli a fallire costantemente le attestazioni e indebolire la salute di Hoodi (dato che non sono più online).

      2. Arresta tutti i servizi Rocket Pool ed Ethereum (utilizzando, ad esempio, `geth` e `lighthouse`; sostituisci con i servizi che hai creato durante l'installazione):

      ```shell
      sudo systemctl stop rp-node rp-watchtower geth lh-bn lh-vc
      ```

      3. Elimina tutti i dati della catena della testnet (ad esempio, utilizzando `geth` e `lighthouse` su x64; sostituisci con la tua configurazione):

      ```shell
      sudo rm -rf /srv/geth/geth_data
      sudo rm -rf /srv/lighthouse/lighthouse_data
      ```

      4. Elimina la cartella di configurazione di Rocket Pool:

      ```shell
      sudo rm -rf /srv/rocketpool
      ```

      5. (Opzionale) Rimuovi i binari CLI e Daemon di Rocket Pool:
      ```shell
      sudo rm /usr/local/bin/rocketpool /usr/local/bin/rocketpoold
      ```
      Sovrascriverai comunque questi con le ultime versioni, ma se vuoi essere accurato, puoi prima rimuovere quelli vecchi.

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">NOTA</p>
        Per motivi di semplicità, queste istruzioni _non includono_ alcuni passaggi come la rimozione degli utenti `eth1` ed `eth2`, o la rimozione dei servizi che hai arrestato in precedenza.
        Puoi riutilizzarli e ignorare i passaggi coinvolti nella loro configurazione nella guida all'installazione.

        Dovrai rifare alcuni dei passaggi di installazione tra cui:

        - Creare la cartella `/srv/rocketpool` e il suo framework scheletrico, e impostare correttamente i permessi
        - Ottenere le ultime versioni dei binari client Execution e Consensus, e Validator
        - Impostare la **stringa `ExecStart`** nei servizi (**utilizzare la configurazione mainnet definita nella guida all'installazione!**)
        - Ottenere gli ultimi binari CLI e Daemon
            - Ottenere gli ultimi file di configurazione dall'archivio dell'installer, metterli in `/srv/rocketpool`, e regolarli per adattarli alla configurazione del tuo nodo
      </p>

      A questo punto sei pronto per migrare seguendo la [guida all'installazione nativa](../native).
    </Tab>

  </Tabs>
</div>
