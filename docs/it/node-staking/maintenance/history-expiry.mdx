import { Tab, Tabs } from "@rspress/core/theme";

# Scadenza della Cronologia Pre-Merge

Tutti i client Execution ora supportano la scadenza parziale della cronologia in conformità con [EIP-4444](https://eips.ethereum.org/EIPS/eip-4444). Gli utenti possono ridurre sostanzialmente
i requisiti di storage per il proprio nodo rimuovendo la cronologia dei blocchi pre-merge a partire dalla versione Smartnode `v1.17.0`. Sentiti libero di dare un'occhiata
a questo post del blog per saperne di più sulla scadenza parziale della cronologia: https://blog.ethereum.org/2025/07/08/partial-history-exp

::: tip NOTA

    Tieni presente che i passaggi per rimuovere la cronologia pre-merge dipendono dal client Execution selezionato dal tuo nodo:
    - Gli utenti Nethermind dovranno eseguire una risincronizzazione completa per rimuovere la cronologia pre-merge.
    - Gli utenti Geth possono utilizzare il comando `rocketpool service prune-eth1` o condurre una risincronizzazione completa.
    - Gli utenti Besu e Reth possono eseguire una potatura online mentre il loro nodo continua ad attestare.

:::

I seguenti passaggi per rimuovere la cronologia pre-merge sono solo per i nodi in modalità Docker. Se stai utilizzando un client esterno in modalità
Hybrid o modalità Native, consulta la documentazione fornita dal tuo client Execution.

Inizia aprendo il Settings Manager:

```shell
rocketpool service config
```

Per modificare la modalità di potatura del client Execution, vai al menu `Execution Client (ETH1)` e seleziona l'impostazione `History Expiry` nel menu a discesa per `Pruning Mode`

![](../images/tui-history-expiry.png)

Dopo aver effettuato la selezione, premi `escape` per tornare al menu principale, quindi premi `tab` per evidenziare il pulsante `Review Changes and Save`. Premi
il tasto `enter` per continuare. Ti verrà presentato un menu per visualizzare in anteprima le modifiche alle impostazioni del tuo client Execution.

![](../images/tui-review-history-expiry.png)

Premi il tasto `enter` su `Save Settings` per salvare e uscire dal Settings Manager, quindi inserisci `y` per riavviare il tuo container `rocketpool_eth1`.

```shell
Your changes have been saved!
The following containers must be restarted for the changes to take effect:
	rocketpool_eth1
Would you like to restart them automatically now? [y/n]
```

Da questo punto in poi, i passaggi differiscono a seconda del client Execution che stai utilizzando:

<div className="p-3">
  <Tabs>

        <Tab label="Nethermind">
        I nodi Nethermind richiedono una risincronizzazione completa per rimuovere la cronologia pre-merge. Devi risincronizzare il tuo client Execution dopo aver salvato
        l'impostazione `History Expiry` e riavviato il tuo container `eth1`.

        ::: warning ATTENZIONE
        Se non hai configurato un nodo di fallback, il tuo nodo smetterà di validare durante una risincronizzazione. Un nodo di fallback
        consentirà al tuo nodo primario di continuare ad attestare e proporre blocchi durante una potatura o risincronizzazione. Clicca [qui](/it/node-staking/fallback)
        per imparare come configurare un nodo di fallback.
        :::

        Usa il seguente comando per risincronizzare il tuo client Execution:
        ```shell
        rocketpool service resync-eth1
        ```

        È tutto pronto! Il nodo non memorizzerà più dati pre-merge, migliorando sostanzialmente la fattibilità di ospitare un nodo su un'unità da 2 TB.
        Consigliamo di monitorare i progressi utilizzando il seguente comando.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Geth">

        I nodi Geth richiedono una potatura offline per rimuovere la cronologia pre-merge. Devi potare il tuo client Execution dopo aver salvato
        l'impostazione `History Expiry` e riavviato il tuo container `eth1`. In alternativa puoi scegliere di condurre una risincronizzazione completa per rimuovere la cronologia pre-merge.

        ::: tip NOTA
        Consigliamo la potatura rispetto alla conduzione di una risincronizzazione completa. Se desideri ricominciare da zero con un database Geth pulito o hai un problema
        con la potatura, puoi risincronizzare il client Execution utilizzando `rocketpool service resync-eth1`. Entrambe le scelte dovrebbero risultare nella scadenza della cronologia pre-merge.
        :::

        ::: warning ATTENZIONE
        Se non hai configurato un nodo di fallback, il tuo nodo smetterà di validare durante una potatura o risincronizzazione. Un nodo di fallback
        consentirà al tuo nodo primario di continuare ad attestare e proporre blocchi durante una potatura o risincronizzazione. Clicca [qui](/it/node-staking/fallback)
        per imparare come configurare un nodo di fallback.
        :::

        Esegui il seguente comando per potare il tuo client Execution:
        ```shell
        rocketpool service prune-eth1
        ```
        Puoi cliccare [qui](/it/node-staking/pruning#starting-a-prune) per saperne di più sulla potatura.

        È tutto pronto! Il nodo non memorizzerà più dati pre-merge, migliorando sostanzialmente la fattibilità di ospitare un nodo su un'unità da 2 TB.
        Consigliamo di monitorare i progressi utilizzando il seguente comando.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Besu">

        È tutto pronto! I nodi Besu eseguiranno una potatura online continuando ad attestare e proporre blocchi.
        Il nodo non memorizzerà più dati pre-merge, migliorando sostanzialmente la fattibilità di ospitare un nodo su un'unità da 2 TB.
        Consigliamo di monitorare i progressi utilizzando il seguente comando.
        ```shell
        rocketpool service logs eth1
        ```

    </Tab>

    <Tab label="Reth">

        È tutto pronto! I nodi Reth eseguiranno una potatura online continuando ad attestare e proporre blocchi.
        Il nodo non memorizzerà più dati pre-merge, migliorando sostanzialmente la fattibilità di ospitare un nodo su un'unità da 2 TB.
        Consigliamo di monitorare i progressi utilizzando il seguente comando.
        ```shell
        rocketpool service logs eth1
         ```

    </Tab>

  </Tabs>
</div>
