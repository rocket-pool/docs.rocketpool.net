# Обновление Atlas

::: tip ПРИМЕЧАНИЕ
Atlas был развернут `18 апреля 2023, 00:00 UTC`. Пожалуйста, посетите [здесь](../houston/whats-new), чтобы прочитать о Houston, последнем обновлении протокола.
:::

Эта страница описывает основные изменения, которые следующее крупное обновление Rocket Pool под названием **Atlas** приносит в протокол, включая обновления как стека Smartnode, так и протокола Rocket Pool в целом.

Пожалуйста, внимательно прочитайте эту страницу, чтобы понять все различия между предыдущей версией Rocket Pool (Redstone) и Atlas.

## Новые функции протокола

Atlas привносит несколько интересных новых функций, основанных как на отзывах сообщества, так и на изменениях в самом протоколе Ethereum.
Ниже приведен краткий список этих изменений - нажмите на любое из них, чтобы узнать больше.

### Shapella и выводы

Протокол Ethereum готовится пройти свое следующее крупное обновление: **Shanghai** на уровне исполнения и **Capella** на уровне консенсуса - поскольку они теперь взаимосвязаны, оба произойдут одновременно.
Пользователи Ethereum с любовью стали называть объединенное обновление [**"Shapella"**](https://blog.ethereum.org/2023/02/21/sepolia-shapella-announcement) соответственно.

Shapella вводит **выводы** в Beacon Chain, что означает, что операторы узлов теперь могут получить доступ к ETH, который в настоящее время заблокирован в Beacon Chain.
Это происходит в двух вариантах:

- Частичные выводы (**skimming**), где ваши вознаграждения (ваш избыточный баланс Beacon Chain свыше 32 ETH) отправляются в ваш minipool на уровне исполнения. Это делается _автоматически самим протоколом_ время от времени (примерно раз в четыре или пять дней в основной сети).
- **Полные выводы**, где вы выводите свой validator из Beacon Chain, и его полный баланс отправляется в ваш minipool на уровне исполнения. Это делается _автоматически самим протоколом_ после того, как ваш validator был выведен из цепи достаточно долго.

Atlas вводит новый контракт делегата для minipools, который позволяет операторам узлов **распределять** баланс ETH minipool, разделяя его равномерно между оператором узла и держателями rETH (плюс комиссия, конечно) в любое время.
Это дает операторам узлов **немедленный доступ** к их вознаграждениям Beacon Chain!
Он также возвращает долю держателей rETH обратно в пул депозитов, чтобы она могла быть использована для разблокировки rETH для ETH по обменному курсу протокола (или для создания новых minipools).

### Minipools с залогом 8 ETH

Одно из самых ожидаемых изменений, внесенных в Atlas, - это введение возможности предоставлять только 8 ETH для создания minipool вместо 16 ETH.
Minipools с только 8 ETH, заложенными их владельцем-оператором узла, сопоставляются с **24 ETH** из пула стейкинга (предоставленного держателями rETH) для создания validator.
Это значительно снижает требования к капиталу для запуска собственного validator _и_ приводит к большей доходности как для оператора узла, так и для стейкеров rETH!
Фактически, запуск двух minipools по 8 ETH вместо одного minipool по 16 ETH обеспечит **более 18% больше вознаграждений** - даже если minipool на 16 ETH имеет ставку комиссии 20%.

Создание minipool на 8 ETH требует, чтобы вы застейкали **минимум 2.4 ETH стоимости RPL** и **максимум 12 ETH стоимости RPL**.
Они представляют 10% от суммы, которую вы _занимаете_ у протокола, и 150% от суммы, которую вы _закладываете_ (стейкаете) самостоятельно.

Новые minipools могут быть созданы с 8 ETH или 16 ETH.
Minipools на 16 ETH не изменились по сравнению с тем, как они работают сегодня, и доступны для пользователей, которые хотят минимизировать свою подверженность токену RPL.

Чтобы узнать, как создавать новые minipools с использованием залога 8 ETH, посетите [руководство по созданию minipool](../../node-staking/create-validator.mdx).

Кроме того, после применения Atlas операторы узлов могут **перевести существующие minipools на 16 ETH непосредственно в minipools на 8 ETH без необходимости выхода**.
Это вернет им 8 ETH обратно в виде [депозитного кредита](../../node-staking/credit), который можно использовать для **бесплатного создания нового minipool на 8 ETH**!

Чтобы узнать больше о minipools с залогом 8 ETH, посетите [руководство по снижению залога](../../node-staking/leb-migration.mdx).

### Конвертация соло-валидатора

Часть обновления Shapella включает возможность для соло-валидаторов [изменить учетные данные для вывода своих validators](https://notes.ethereum.org/@launchpad/withdrawals-faq) с исходного (теперь неиспользуемого) ключа вывода на основе BLS на адрес на уровне исполнения.
Этот адрес будет получателем всех вознаграждений этого validator и его полного баланса ETH после выхода из Beacon Chain.

Обычным операторам узлов Rocket Pool не нужно беспокоиться об этом, поскольку протокол автоматически настроил это для ваших minipools, когда вы их создавали.
_Однако_, как часть этого нового требования для соло-валидаторов, Atlas предоставляет интересную возможность: возможность **создать специальный minipool**, который станет адресом вывода для вашего **существующего соло-валидатора**.

Другими словами, это позволит вам **напрямую конвертировать соло-валидатор в minipool Rocket Pool без необходимости выхода!**

Это означает, что вы получите все преимущества minipools Rocket Pool, включая:

- Возможность конвертировать один validator (с залогом 32 ETH) в **четыре minipool** (каждый с залогом 8 ETH), эффективно **учетверив** ваше присутствие в Beacon Chain
- Комиссию с части этих minipools, предоставленных стейкерами rETH
- Доступ к [пулу сглаживания](../../node-staking/fee-distrib-sp#the-smoothing-pool) Rocket Pool для объединения и равномерного распределения вознаграждений от предложений блоков и MEV

Чтобы узнать больше о конвертации соло-валидатора в minipool, посетите руководство [Конвертация соло-валидатора в minipool](../../node-staking/solo-staker-migration).

## Новые функции Smartnode

В дополнение к основным изменениям в протоколе Rocket Pool, Atlas также привносит несколько интересных обновлений в сам стек Smartnode, которые присутствуют в v1.9.0.

### Автоматическое распределение вознаграждений

Если вы уже являетесь активным оператором узла Rocket Pool, вы можете быть знакомы с процессом `rocketpool_node`, который обрабатывает определенные автоматизированные процессы.
Например, он гарантирует, что у вас правильный получатель комиссии, и автоматически запускает вторую транзакцию `stake` для вас после того, как minipools `prelaunch` проходят 12-часовую проверку scrub.

Начиная с Atlas, у `node` есть новая обязанность: **автоматическое распределение вознаграждений minipool!**
Это связано с тем, как [работает обновление Shapella](../../node-staking/skimming), снимая ваши вознаграждения из Beacon Chain в ваш minipool каждые несколько дней.

Всякий раз, когда один из ваших minipools достигает баланса больше указанного пользователем порога (по умолчанию 1 ETH), узел автоматически запустит `distribute-balance` для него.
Это отправит вашу часть вознаграждений на ваш адрес вывода, а часть стейкера пула обратно в пул депозитов.

Изменение порога может быть выполнено в разделе `Smartnode and TX Fees` TUI `service config`, в настройке `Auto-Distribute Threshold`.

### Унифицированная панель Grafana

По многочисленным просьбам мы создали новую [**панель Grafana**](https://grafana.com/grafana/dashboards/24900-rocket-pool-dashboard-v1-4-0/), чтобы помочь операторам узлов отслеживать и оценивать статус, прогресс и общее состояние своих узлов:

![](../../node-staking/images/grafana-1.3.jpg)

Она поставляется со следующими часто запрашиваемыми функциями:

- Поддержка всех клиентов исполнения и консенсуса на одной панели - больше не нужно менять панели в зависимости от того, какие клиенты вы используете!
- Статистика клиента исполнения, включая использование CPU и RAM, и количество пиров
- Отслеживание точности аттестаций, которое следит за тем, насколько "правильными" были ваши аттестации для предыдущей эпохи, чтобы вы знали, насколько далеко вы от оптимальных вознаграждений
- Отслеживание баланса пула сглаживания
- Отслеживание заявленных и незаявленных вознаграждений, теперь включая ETH из пула сглаживания
- Статистика о голосованиях управления Rocket Pool на основе Snapshot
- Место для отслеживания использованного пространства и температуры второго SSD, если у вас есть один для вашей ОС и другой для данных цепи
- И многое другое!

Вы можете импортировать новую панель из официального сервиса Grafana, используя ID `21863`, следуя нашему [руководству по Grafana](../../node-staking/grafana.mdx).

Эта новая панель была плодом любви, который включал обширную помощь от члена сообщества **0xFornax** - спасибо за всю вашу тяжелую работу!

### Изменения Nimbus

Smartnode v1.9.0 вводит **поддержку разделенного режима** для Nimbus!
Вместо запуска Beacon Node и Validator Client внутри одного процесса / контейнера, Smartnode теперь будет запускать их в отдельных контейнерах, как и другие клиенты. Это имеет следующие преимущества:

- Nimbus теперь поддерживает **резервные клиенты** (вторичный клиент исполнения и Beacon Node, к которому Validator Client Nimbus может подключиться, когда ваши основные клиенты не работают для обслуживания, например, повторной синхронизации).
- Nimbus теперь поддерживается в **режиме внешнего управления (гибридный режим)**, поэтому вы можете связать Validator Client, которым управляет Smartnode, с внешним Beacon Node, который вы поддерживаете самостоятельно.
- Beacon Node больше не нужно перезапускать после добавления новых minipools, что означает, что вы не теряете аттестации во время его повторного подключения к своим пирам.

### Поддержка Lodestar

[Lodestar](https://chainsafe.github.io/lodestar/) теперь поддерживается как вариант для вашего клиента консенсуса!
Это новейшее дополнение, которое было официально принято в [Launchpad Ethereum](https://launchpad.ethereum.org/en/lodestar), и оно готово к валидации.
Lodestar поддерживает многие замечательные функции, которые вы полюбили от других клиентов, включая обнаружение двойников, MEV-Boost, клиенты с внешним управлением (гибридный режим) и многое другое!

### Новая система снимков сети

С несколько более технической точки зрения, v1.9.0 вводит совершенно новую систему для быстрого создания снимка состояния **всего, что касается вашего узла** как на уровнях исполнения, так и на уровнях консенсуса.
Под капотом эта система использует [контракт multicall MakerDAO](https://github.com/makerdao/multicall) и [контракт Ethereum Balance Checker](https://github.com/wbobeirne/eth-balance-checker) Уилла О'Бирна для объединения тысяч отдельных запросов клиента исполнения в один запрос.

Это делает процесс `node` гораздо менее требовательным к клиенту исполнения для операторов узлов с большим количеством validators и должно значительно снизить его нагрузку на CPU, что улучшит аттестации и общие вознаграждения.

Эта новая система еще не попала в сам CLI, поэтому любые команды, которые вы там запускаете (например, `rocketpool minipool status`), по-прежнему будут использовать старую настройку с одним запросом.
Со временем мы также введем ее в CLI, что сделает все его команды молниеносно быстрыми (_за исключением ожидания проверки транзакций, это все еще занимает время_).
