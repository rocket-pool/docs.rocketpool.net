import { Tab, Tabs } from "@rspress/core/theme";
import ECSelection from "./images/tui-ec-selection.png";
import tuiExternalEC from "./images/tui-external-ec.png";
import tuiLocalCC from "./images/tui-local-cc.png";
import tuiLocalGraffiti from "./images/tui-local-graffiti.png";
import tuiLocalCheckpoint from "./images/tui-local-checkpoint.png";
import tuiLocalDD from "./images/tui-local-dd.png";
import tuiExternalLH from "./images/tui-external-lh.png";
import tuiExternalGraffiti from "./images/tui-external-graffiti.png";
import tuiExternalDD from "./images/tui-external-dd.png";
import tuiExternalPrysm from "./images/tui-external-prysm.png";
import tuiExternalTeku from "./images/tui-external-teku.png";

# Настройка стека Smartnode (режим Docker / гибридный режим)

Запуск полноценных клиентов уровня исполнения и консенсуса может показаться сложным; существует несколько вариантов на выбор, и каждый из них имеет множество различных настроек.
К счастью, Smartnode спроектирован так, чтобы скрыть всю эту сложность, что делает настройку быстрой и легкой, при этом предоставляя вам свободу настраивать всё по своему желанию.

В этом разделе мы рассмотрим различные методы настройки Smartnode, если вы используете **установку на основе Docker** или **гибридную установку**, где вы подключаетесь к внешне управляемым клиентам исполнения или консенсуса (например, клиентам, которыми вы управляете вне Smartnode для сольного стейкинга).

::: warning ПРИМЕЧАНИЕ
Если вы используете нативный режим без Docker, пожалуйста, обратитесь к [руководству по нативной настройке](./config-native) вместо этого.
:::

Существует три способа его настройки:

- С помощью [интерфейса мастера настройки](#настройка-через-мастер) - это самый простой способ. Он задает лишь несколько базовых вопросов и использует хорошо протестированные значения по умолчанию. Это то, что вы увидите при первом запуске `rocketpool service config`.
- С помощью [интерфейса менеджера настроек](#настройка-через-менеджер-настроек) - это дает вам доступ ко всем настройкам Smartnode, так что вы можете настроить всё настолько, насколько захотите.
- В безголовом режиме через [командную строку](#настройка-через-командную-строку) - это вариант для людей, которые запускают Smartnode в безголовой (неинтерактивной) среде и нуждаются в автоматической настройке.

Выберите режим, о котором вы хотите узнать больше, из списка выше, или просто прокрутите все варианты ниже.

## Настройка через мастер

Чтобы начать процесс настройки, выполните следующую команду:

```shell
rocketpool service config
```

Это запустит пользовательский интерфейс на основе терминала, который позволит вам быстро и легко настроить ваш узел, а также предоставит дополнительный детальный контроль над каждой настройкой для расширенной настройки.

::: tip ПРИМЕЧАНИЕ
Если вы уже настроили Smartnode, вместо этого вас встретит [менеджер настроек](#настройка-стека-smartnode-через-менеджер-настроек).
Вы можете выбрать повторное открытие мастера оттуда, если предпочитаете его, и все ваши существующие настройки будут предварительно выбраны для вас.
:::

Когда вы запускаете интерфейс настройки в первый раз (или если вы решите запустить мастер снова позже), вам будет представлен экран, который выглядит так:

<img src="./images/tui-first-time.png" width="100%" height="auto" />

::: tip СОВЕТ
Чтобы использовать мастер, **нажимайте `клавиши стрелок` (вверх/вниз/влево/вправо) для навигации между элементами, такими как кнопки (выбор) или текстовые поля**.
Вы также можете использовать `Tab` и `Shift+Tab`, если предпочитаете - это будет делать то же самое.

Для кнопок **та, которая выбрана в данный момент, будет подсвечена зеленым**.
Те, которые черные, не выбраны.
На скриншоте выше `Next` (Далее) выбрана в данный момент, а `Quit` (Выход) - нет.

**Нажмите `Enter` или `Пробел`, чтобы выбрать кнопку**, аналогично щелчку по ней мышью.

**Нажмите `Escape`, чтобы вернуться к предыдущему диалогу**, если вы передумали.
Это пригодится по мере прохождения различных страниц мастера.

**Удерживайте `Ctrl` и нажмите `C` в любое время, чтобы выйти из мастера без сохранения**.

Например, на экране выше вы можете нажимать клавиши стрелок `влево` и `вправо`, чтобы переключаться между кнопками `Next` и `Quit`.

Нажатие `Enter`, когда выбрана `Next`, переведет вас на следующий экран.
Нажатие `Enter`, когда выбрана `Quit`, выйдет из мастера без сохранения.
:::

Когда будете готовы начать, нажмите `Next`.

### Выбор сети

На следующем экране вам будет предложено выбрать сеть, которую вы хотите использовать:

<img src="./images/tui-network.png" width="100%" height="auto" />

Вы можете выделить различные варианты с помощью клавиш стрелок `Вверх` и `Вниз` (или `Tab` и `Shift+Tab`).
Когда вы меняете выбор, в поле **Description** (Описание) справа будет показано краткое описание каждого варианта.
Это верно для всех страниц мастера, основанных на выборе, а не только для выбора сети, так что вы будете часто видеть этот стиль страницы.

Если вы хотите попрактиковаться в работе узла Rocket Pool в тестовой сети Hoodi с поддельными ETH и RPL, которые можно получить бесплатно, выберите **Hoodi Testnet**.

Если вы готовы создать настоящий узел Rocket Pool в сети Mainnet для получения реальных наград, выберите **Mainnet**.

### Режим клиента

Вам будут представлены два варианта режима клиента:

<img src="./images/tui-client-mode.png" width="100%" height="auto" />

**Locally Managed** (Локально управляемый) (также известный как **"режим Docker"**) - это выбор по умолчанию.
Используйте его, если у вас еще нет пары клиентов и вы хотите, чтобы Smartnode управлял ими за вас.
Выбрав это, Smartnode создаст, настроит и будет управлять парой клиентов исполнения и консенсуса как контейнерами Docker.
Не волнуйтесь, вы сможете выбрать, _какой_ клиент вы хотите запустить, далее.

**Externally Managed** (Внешне управляемый) (также известный как **"гибридный режим"**) - это удобный выбор для пользователей, у которых уже есть пара клиентов исполнения и консенсуса, работающая где-то в другом месте, которой они управляют вручную.
Выбрав это, Smartnode просто подключится к вашим существующим клиентам и не будет запускать собственный.
Например, пользователи могут использовать это для подключения к клиентам, которые они в настоящее время используют для сольного стейкинга; таким образом, им не нужно иметь две отдельные копии клиентов.

:::warning ПРИМЕЧАНИЕ
После объединения уровней исполнения и консенсуса вы _не можете_ смешивать эти режимы (например, вы не можете иметь локальный клиент исполнения, но внешне управляемый клиент консенсуса).
Вы должны выбрать либо все локально управляемые, либо все внешне управляемые.
:::

### Настройка клиента исполнения

Выберите, какой режим вы хотите использовать для управления вашим клиентом исполнения, и следуйте шагам на соответствующей вкладке ниже:

<div className="p-3">
  <Tabs>
    <Tab label="Локально управляемый">
      Если вы хотите, чтобы Smartnode управлял клиентом исполнения за вас, на следующем экране вам будет предложено выбрать клиент:

      <img src={ECSelection} width="100%" height="auto"/>

      Пожалуйста, обратитесь к разделу [Выбор ваших ETH-клиентов](/ru/node-staking/eth-clients#execution-clients) для описания каждого варианта.
      Когда вы сделаете свой выбор, нажмите на соответствующую вкладку ниже, чтобы узнать, как его настроить:

      Если вы выберете **Geth**, **Besu** или **Nethermind**, мастер выполнит всю настройку за вас.
      Вы можете вручную настроить некоторые из его параметров в конце этого процесса, но значения по умолчанию, которые он использует, полностью подходят для работы узла.
      Вы можете перейти к следующему разделу.


      <p className="rspress-directive warning">
        <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
        **Откройте P2P порт в настройках переадресации портов вашего маршрутизатора**. Настройте его для переадресации **порта 30303** как по TCP, так и по UDP на локальный IP-адрес вашей машины.
        Таким образом, другие клиенты консенсуса смогут обнаружить его и связываться с ним извне. Это поможет вашему клиенту консенсуса синхронизироваться быстро и улучшит производительность (и, следовательно, награды).

        Каждый маршрутизатор делает это по-своему, поэтому **вам нужно будет проверить руководство вашего маршрутизатора о том, как настроить переадресацию портов**.
      </p>

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
        Поскольку Smartnode будет работать в собственном контейнере Docker, он будет использовать внутреннюю сеть Docker.
        Вы не сможете использовать здесь имена хостов, такие как `localhost` или `127.0.0.1`; если ваш клиент исполнения работает на той же машине, что и Smartnode, вам нужно будет предоставить локальный IP-адрес машины вместо этого.
      </p>

      И на этом ваш клиент исполнения полностью настроен!
    </Tab>
    <Tab label="Внешний">
      Для внешне управляемого клиента исполнения на следующем экране вам будет предложено ввести URL-адреса его HTTP-основанного RPC (web3) API и его RPC API на основе Websocket:

      <img src={tuiExternalEC} width="100%" height="auto"/>

      Smartnode будет использовать HTTP URL для связи с ним и выполнения блокчейн-активности, таких как запросы состояния цепочки и отправка транзакций.
      **Если у вас еще не включен и не доступен порт API вашего клиента с машины Smartnode, вам нужно будет настроить его сейчас.**
      Инструкции по этому вопросу различаются от клиента к клиенту; обратитесь к документации вашего клиента, чтобы узнать, как настроить HTTP RPC endpoint.

      URL Websocket актуален только в том случае, если вам нужен он для вашего собственного использования; Smartnode его не использует.
      Вы можете оставить его пустым, если он вам не нужен.

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
        Поскольку Smartnode будет работать в собственном контейнере Docker, он будет использовать внутреннюю сеть Docker.
        Вы не сможете использовать здесь имена хостов, такие как `localhost` или `127.0.0.1`; если ваш резервный клиент исполнения работает на той же машине, что и Smartnode, вам нужно будет предоставить локальный IP-адрес машины вместо этого.
      </p>

      Когда вы будете довольны своим выбором резервного клиента исполнения, переходите к следующему шагу.
    </Tab>

  </Tabs>
</div>

### Настройка клиента консенсуса

Теперь, когда у вас есть готовый клиент исполнения, следующая задача - настроить клиент консенсуса.
"Режим" (локальный или внешний) будет унаследован от выбора, который вы использовали для клиента исполнения ранее.

Выберите режим, который вы выбрали ранее, из вкладок ниже:

<div className="p-3">
  <Tabs>
    <Tab label="Локально управляемый">
      Если вы хотите, чтобы Smartnode управлял клиентом консенсуса за вас, на следующем экране вам будет предложено выбрать клиент:

      <img src={tuiLocalCC} width="100%" height="auto"/>

      **Предпочтительный выбор** для общего здоровья и разнообразия сети - это выбор **Random (Recommended)** (Случайный (рекомендуется)), который случайным образом выберет один из четырех поддерживаемых клиентов консенсуса для вас.

      Если вы предпочитаете выбрать конкретный клиент, пожалуйста, обратитесь к разделу [Выбор ваших ETH-клиентов](./eth-clients#eth2-clients) для описания каждого варианта, чтобы вы могли принять обоснованное решение.


      <p className="rspress-directive warning">
        <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
        Существуют два условия, которые вызовут предупреждения на основе выбора клиента:

        - Выбранный клиент в настоящее время является [клиентом с большинством](https://clientdiversity.org/), что означает, что нездоровое большинство валидаторов в Beacon Chain используют его, что угрожает стабильности сети

        - Выбранный клиент **слишком ресурсоемкий** для оборудования, которое вы используете в настоящее время

        Если любое из этих условий верно для выбранного вами клиента, вы получите предупреждение и вас попросят выбрать другой клиент.
        У вас есть возможность продолжить использовать тот, который вы выбрали, но вы должны осознавать риски этого.
      </p>

      Когда вы сделаете свой выбор или вам будет назначен случайный клиент, нажмите на соответствующую вкладку ниже, чтобы узнать, как его настроить:

      <div className="p-3">
        <Tabs>
          <Tab label="Lighthouse">
            Первый вариант в настройке Lighthouse спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiLocalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).

            Далее следует опция включения или отключения **синхронизации контрольной точки**:

            <img src={tuiLocalCheckpoint} width="100%" height="auto"/>

            Lighthouse имеет возможность мгновенно синхронизироваться с последним блоком в сети Beacon Chain, подключившись к существующей Beacon Node, которой вы доверяете.
            Это предпочтительнее обычной синхронизации, потому что не требует времени (в то время как обычная синхронизация может занять дни) и имеет некоторые преимущества в безопасности.
            Взгляните на [их документацию по синхронизации контрольных точек](https://lighthouse-book.sigmaprime.io/checkpoint-sync.html) для получения дополнительной информации, если вам интересно.

            Вы можете ввести URL любой Beacon Node, которая предоставляет доступ к своему REST API здесь.

            См. [раздел ниже о синхронизации контрольных точек Beacon Chain](#синхронизация-контрольных-точек-beacon-chain), если вы хотите использовать её.

            Последний вопрос спросит, хотите ли вы включить защиту от двойников:

            <img src={tuiLocalDD} width="100%" height="auto"/>

            Lighthouse поддерживает функцию под названием [обнаружение двойников](https://lighthouse-book.sigmaprime.io/validator-doppelganger.html).
            Вкратце, эта функция **намеренно** пропустит несколько аттестаций после перезапуска клиента валидатора Lighthouse; делая это, она будет слушать, отправляются ли аттестации в сеть с использованием ваших ключей валидатора.

            В идеале не должно быть никаких аттестаций (что означает, что никакая другая машина не работает с вашими ключами валидатора подключенными).
            После короткого периода ожидания Lighthouse начнет нормальную валидацию.

            _Однако_, если _есть_ другая машина, работающая с вашими ключами валидатора подключенными, то Lighthouse немедленно выключится и выдаст сообщение об ошибке в своих лог-файлах.
            Причина этого в том, что если бы она начала аттестацию также, то вы бы начали **двойную аттестацию**, что является **наказуемым нарушением**.
            При наказании ваш валидатор будет принудительно выведен из Beacon chain, и вы потеряете значительное количество ETH.

            В большинстве случаев обнаружение двойников не приведет ни к чему, кроме нескольких пропущенных аттестаций после перезапуска клиента.
            В ситуациях, когда вы переносите свой валидатор на новую машину или меняете на новый клиент Beacon, однако, **обнаружение двойников может предотвратить ваше наказание за случайную двойную аттестацию**.

            Думайте об этом как о дешевой страховке для ваших minipools; вы упустите незначительную часть прибыли каждый раз при перезапуске, но вы можете быть достаточно уверены, что не случайно запустите свои ключи в двух местах и не будете за это наказаны.

            Начиная с версии 4.5.0, Lighthouse имеет возможность устанавливать P2P-соединения более эффективным способом с использованием [протокола QUIC](https://en.wikipedia.org/wiki/QUIC). Если вы хотите использовать эту функцию, вам нужно будет определить дополнительный порт в поле "P2P QUIC port" в настройках ETH2 и переадресовать его на ваш узел в настройках переадресации портов вашего маршрутизатора. Порт P2P QUIC по умолчанию - 8001 (UDP). Убедитесь, что избегаете коллизий с портами, уже используемыми вашим узлом (или резервными/тестовыми узлами). Также убедитесь, что тот же порт открыт, если вы используете брандмауэр на вашем узле (проверьте `ufw status`).
            Чтобы проверить, работает ли конфигурация QUIC, вы должны увидеть двузначное число после `libp2p_quic_peers` при запуске `docker run --network rocketpool_net curlimages/curl http://eth2:9100/metrics | grep libp2p_peers_multi`.

          </Tab>
          <Tab label="Nimbus">
            Первый вариант в настройке Nimbus спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiLocalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).

            Далее следует опция включения или отключения **синхронизации контрольной точки**:

            <img src={tuiLocalCheckpoint} width="100%" height="auto"/>

            Nimbus имеет возможность мгновенно синхронизироваться с последним блоком в сети Beacon Chain, подключившись к существующей Beacon Node, которой вы доверяете.
            Это предпочтительнее обычной синхронизации, потому что не требует времени (в то время как обычная синхронизация может занять дни) и имеет некоторые преимущества в безопасности.
            Взгляните на [их документацию по синхронизации контрольных точек](https://nimbus.guide/trusted-node-sync.html) для получения дополнительной информации, если вам интересно.

            Вы можете ввести URL любой Beacon Node, которая предоставляет доступ к своему REST API здесь.

            См. [раздел ниже о синхронизации контрольных точек Beacon Chain](#синхронизация-контрольных-точек-beacon-chain), если вы хотите использовать её.

            Последний вопрос спросит, хотите ли вы включить защиту от двойников:

            <img src={tuiLocalDD} width="100%" height="auto"/>

            Nimbus поддерживает функцию под названием [защита от двойников](https://nimbus.guide/faq.html#why-does-my-validator-miss-two-epochs-of-attestations-after-restarting).
            Вкратце, эта функция **намеренно** пропустит несколько аттестаций после перезапуска Nimbus; делая это, она будет слушать, отправляются ли аттестации в сеть с использованием ваших ключей валидатора.

            В идеале не должно быть никаких аттестаций (что означает, что никакая другая машина не работает с вашими ключами валидатора подключенными).
            После короткого периода ожидания Nimbus начнет нормальную валидацию.

            _Однако_, если _есть_ другая машина, работающая с вашими ключами валидатора подключенными, то Nimbus немедленно выключится и выдаст сообщение об ошибке в своих лог-файлах.
            Причина этого в том, что если бы она начала аттестацию также, то вы бы начали **двойную аттестацию**, что является **наказуемым нарушением**.
            При наказании ваш валидатор будет принудительно выведен из Beacon chain, и вы потеряете значительное количество ETH.

            В большинстве случаев обнаружение двойников не приведет ни к чему, кроме нескольких пропущенных аттестаций после перезапуска клиента.
            В ситуациях, когда вы переносите свой валидатор на новую машину или меняете на новый клиент Beacon, однако, **обнаружение двойников может предотвратить ваше наказание за случайную двойную аттестацию**.

            Думайте об этом как о дешевой страховке для ваших minipools; вы упустите незначительную часть прибыли каждый раз при перезапуске, но вы можете быть достаточно уверены, что не случайно запустите свои ключи в двух местах и не будете за это наказаны.

          </Tab>
          <Tab label="Prysm">
            Первый вариант в настройке Prysm спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiLocalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).

            Далее следует опция включения или отключения **синхронизации контрольной точки**:

            <img src={tuiLocalCheckpoint} width="100%" height="auto"/>

            Prysm имеет возможность мгновенно синхронизироваться с последним блоком в сети Beacon Chain, подключившись к существующей Beacon Node, которой вы доверяете.
            Это предпочтительнее обычной синхронизации, потому что не требует времени (в то время как обычная синхронизация может занять дни) и имеет некоторые преимущества в безопасности.
            Взгляните на [их документацию по синхронизации контрольных точек](https://docs.prylabs.network/docs/prysm-usage/checkpoint-sync) для получения дополнительной информации, если вам интересно.

            Вы можете ввести URL любой Beacon Node, которая предоставляет доступ к своему REST API здесь.

            См. [раздел ниже о синхронизации контрольных точек Beacon Chain](#синхронизация-контрольных-точек-beacon-chain), если вы хотите использовать её.

            Последний вопрос спросит, хотите ли вы включить защиту от двойников:

            <img src={tuiLocalDD} width="100%" height="auto"/>

            Prysm поддерживает функцию под названием защита от двойников.
            Вкратце, эта функция **намеренно** пропустит несколько аттестаций после перезапуска клиента валидатора Prysm; делая это, она будет слушать, отправляются ли аттестации в сеть с использованием ваших ключей валидатора.

            В идеале не должно быть никаких аттестаций (что означает, что никакая другая машина не работает с вашими ключами валидатора подключенными).
            После короткого периода ожидания Prysm начнет нормальную валидацию.

            _Однако_, если _есть_ другая машина, работающая с вашими ключами валидатора подключенными, то Prysm немедленно выключится и выдаст сообщение об ошибке в своих лог-файлах.
            Причина этого в том, что если бы она начала аттестацию также, то вы бы начали **двойную аттестацию**, что является **наказуемым нарушением**.
            При наказании ваш валидатор будет принудительно выведен из Beacon chain, и вы потеряете значительное количество ETH.

            В большинстве случаев обнаружение двойников не приведет ни к чему, кроме нескольких пропущенных аттестаций после перезапуска клиента.
            В ситуациях, когда вы переносите свой валидатор на новую машину или меняете на новый клиент Beacon, однако, **обнаружение двойников может предотвратить ваше наказание за случайную двойную аттестацию**.

            Думайте об этом как о дешевой страховке для ваших minipools; вы упустите незначительную часть прибыли каждый раз при перезапуске, но вы можете быть достаточно уверены, что не случайно запустите свои ключи в двух местах и не будете за это наказаны.

          </Tab>
          <Tab label="Teku">
            Первый вариант в настройке Teku спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiLocalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).

            Последний вопрос - это опция включения или отключения **синхронизации контрольной точки**:

            <img src={tuiLocalCheckpoint} width="100%" height="auto"/>

            Teku имеет возможность мгновенно синхронизироваться с последним блоком в сети Beacon Chain, подключившись к существующей Beacon Node, которой вы доверяете.
            Это предпочтительнее обычной синхронизации, потому что не требует времени (в то время как обычная синхронизация может занять дни) и имеет некоторые преимущества в безопасности.
            Взгляните на [их документацию по синхронизации контрольных точек](https://docs.teku.consensys.net/en/latest/HowTo/Get-Started/Checkpoint-Start/) для получения дополнительной информации, если вам интересно.

            Вы можете ввести URL любой Beacon Node, которая предоставляет доступ к своему REST API здесь.

            См. [раздел ниже о синхронизации контрольных точек Beacon Chain](#синхронизация-контрольных-точек-beacon-chain), если вы хотите использовать её.
          </Tab>
          <Tab label="Lodestar">
            Первый вариант в настройке Lodestar спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiLocalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).

            Далее следует опция включения или отключения **синхронизации контрольной точки**:

            <img src={tuiLocalCheckpoint} width="100%" height="auto"/>

            Lodestar имеет возможность мгновенно синхронизироваться с последним блоком в сети Beacon Chain, подключившись к существующей Beacon Node, которой вы доверяете.
            Это предпочтительнее обычной синхронизации, потому что не требует времени (в то время как обычная синхронизация может занять дни) и имеет некоторые преимущества в безопасности.
            Взгляните на [их документацию по синхронизации контрольных точек](https://chainsafe.github.io/lodestar/run/beacon-management/starting-a-node#checkpoint-sync) для получения дополнительной информации, если вам интересно.

            Вы можете ввести URL любой Beacon Node, которая предоставляет доступ к своему REST API здесь.

            См. [раздел ниже о синхронизации контрольных точек Beacon Chain](#синхронизация-контрольных-точек-beacon-chain), если вы хотите использовать её.

            Последний вопрос спросит, хотите ли вы включить защиту от двойников:

            <img src={tuiLocalDD} width="100%" height="auto"/>

            Lodestar поддерживает функцию под названием обнаружение двойников.
            Вкратце, эта функция **намеренно** пропустит несколько аттестаций после перезапуска клиента валидатора Lodestar; делая это, она будет слушать, отправляются ли аттестации в сеть с использованием ваших ключей валидатора.

            В идеале не должно быть никаких аттестаций (что означает, что никакая другая машина не работает с вашими ключами валидатора подключенными).
            После короткого периода ожидания Lodestar начнет нормальную валидацию.

            _Однако_, если _есть_ другая машина, работающая с вашими ключами валидатора подключенными, то Lodestar немедленно выключится и выдаст сообщение об ошибке в своих лог-файлах.
            Причина этого в том, что если бы она начала аттестацию также, то вы бы начали **двойную аттестацию**, что является **наказуемым нарушением**.
            При наказании ваш валидатор будет принудительно выведен из Beacon chain, и вы потеряете значительное количество ETH.

            В большинстве случаев обнаружение двойников не приведет ни к чему, кроме нескольких пропущенных аттестаций после перезапуска клиента.
            В ситуациях, когда вы переносите свой валидатор на новую машину или меняете на новый клиент Beacon, однако, **обнаружение двойников может предотвратить ваше наказание за случайную двойную аттестацию**.

            Думайте об этом как о дешевой страховке для ваших minipools; вы упустите незначительную часть прибыли каждый раз при перезапуске, но вы можете быть достаточно уверены, что не случайно запустите свои ключи в двух местах и не будете за это наказаны.

          </Tab>
        </Tabs>
      </div>

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
        **Откройте P2P порт в настройках переадресации портов вашего маршрутизатора**. Настройте его для переадресации **порта 9001** как по TCP, так и по UDP на локальный IP-адрес вашей машины.
        Таким образом, другие клиенты консенсуса смогут обнаружить его и связываться с ним извне. Это поможет вашему клиенту консенсуса синхронизироваться быстро и улучшит производительность (и, следовательно, награды).

        Каждый маршрутизатор делает это по-своему, поэтому **вам нужно будет проверить руководство вашего маршрутизатора о том, как настроить переадресацию портов**
      </p>
    </Tab>
    <Tab label="Внешне управляемый">
      Поскольку каждый клиент консенсуса имеет немного различное поведение, Smartnode необходимо знать, какой из них вы используете внешне, чтобы он мог соответствующим образом адаптировать свое собственное поведение.
      Начните с выбора клиента, который у вас есть, из списка на следующем экране:

      <img src="./images/tui-external-cc.png" width="100%" height="auto"/>


      <p className="rspress-directive warning">
        <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
        В настоящее время **Nimbus** несовместим с внешним режимом, потому что он еще не может работать как автономный контейнер валидатора (VC).
        Когда клиент будет поддерживать эту функцию, она будет добавлена в список здесь.
      </p>

      Выберите свой клиент из вкладок ниже, чтобы узнать, как завершить его настройку.

      <div className="p-3">
        <Tabs>
          <Tab label="Lighthouse">
            Начните с указания URL для API вашей Lighthouse Beacon Node:

            <img src={tuiExternalLH} width="100%" height="auto"/>

            Smartnode будет использовать HTTP URL для связи с ним и выполнения блокчейн-активности, таких как запросы состояния цепочки и отправка сообщений.
            **Если у вас еще не включен и не доступен порт API с машины Smartnode, вам нужно будет настроить его сейчас.**
            См. [документацию Lighthouse](https://lighthouse-book.sigmaprime.io/api-bn.html) для инструкций о том, как это сделать.

            <p className="rspress-directive warning">
              <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
              Поскольку Smartnode будет работать в собственном контейнере Docker, он будет использовать внутреннюю сеть Docker.
              Вы не сможете использовать здесь имена хостов, такие как `localhost` или `127.0.0.1`; если ваш клиент работает на той же машине, что и Smartnode, вам нужно будет предоставить локальный IP-адрес машины вместо этого.
            </p>


            Далее она спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiExternalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).

            Последний вопрос спросит, хотите ли вы включить защиту от двойников:

            <img src={tuiExternalDD} width="100%" height="auto"/>

            Lighthouse поддерживает функцию под названием [обнаружение двойников](https://lighthouse-book.sigmaprime.io/validator-doppelganger.html).
            Вкратце, эта функция **намеренно** пропустит несколько аттестаций после перезапуска клиента валидатора Lighthouse; делая это, она будет слушать, отправляются ли аттестации в сеть с использованием ваших ключей валидатора.

            В идеале не должно быть никаких аттестаций (что означает, что никакая другая машина не работает с вашими ключами валидатора подключенными).
            После короткого периода ожидания Lighthouse начнет нормальную валидацию.

            _Однако_, если _есть_ другая машина, работающая с вашими ключами валидатора подключенными, то Lighthouse немедленно выключится и выдаст сообщение об ошибке в своих лог-файлах.
            Причина этого в том, что если бы она начала аттестацию также, то вы бы начали **двойную аттестацию**, что является **наказуемым нарушением**.
            При наказании ваш валидатор будет принудительно выведен из Beacon chain, и вы потеряете значительное количество ETH.

            В большинстве случаев обнаружение двойников не приведет ни к чему, кроме нескольких пропущенных аттестаций после перезапуска клиента.
            В ситуациях, когда вы переносите свой валидатор на новую машину или меняете на новый клиент Beacon, однако, **обнаружение двойников может предотвратить ваше наказание за случайную двойную аттестацию**.

            Думайте об этом как о дешевой страховке для ваших minipools; вы упустите незначительную часть прибыли каждый раз при перезапуске, но вы можете быть достаточно уверены, что не случайно запустите свои ключи в двух местах и не будете за это наказаны.

          </Tab>
          <Tab label="Prysm">
            Начните с указания URL для API вашей Prysm Beacon Node и URL для её JSON-RPC API:

            <img src={tuiExternalPrysm} width="100%" height="auto"/>

            Smartnode будет использовать HTTP URL для связи с ним и выполнения блокчейн-активности, таких как запросы состояния цепочки и отправка сообщений.
            Он подготовит свой клиент валидатора Prysm с URL JSON-RPC, чтобы он мог общаться с вашей Beacon Node, поскольку _клиент валидатора Prysm в настоящее время не может работать через HTTP API._

            **Если у вас еще не включены и не доступны порты API с машины Smartnode, вам нужно будет настроить их сейчас.**
            См. [документацию Prysm](https://docs.prylabs.network/docs/prysm-usage/parameters) для инструкций о том, как это сделать.
            **Вам понадобится включить `grpc-gateway` _и_ `rpc-host`.**

            <p className="rspress-directive warning">
              <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
              Поскольку Smartnode будет работать в собственном контейнере Docker, он будет использовать внутреннюю сеть Docker.
              Вы не сможете использовать здесь имена хостов, такие как `localhost` или `127.0.0.1`; если ваш клиент работает на той же машине, что и Smartnode, вам нужно будет предоставить локальный IP-адрес машины вместо этого.
            </p>


            Далее она спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiExternalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).

            Последний вопрос спросит, хотите ли вы включить защиту от двойников:

            <img src={tuiExternalDD} width="100%" height="auto"/>

            Prysm поддерживает функцию под названием защита от двойников.
            Вкратце, эта функция **намеренно** пропустит несколько аттестаций после перезапуска клиента валидатора Prysm; делая это, она будет слушать, отправляются ли аттестации в сеть с использованием ваших ключей валидатора.

            В идеале не должно быть никаких аттестаций (что означает, что никакая другая машина не работает с вашими ключами валидатора подключенными).
            После короткого периода ожидания Prysm начнет нормальную валидацию.

            _Однако_, если _есть_ другая машина, работающая с вашими ключами валидатора подключенными, то Prysm немедленно выключится и выдаст сообщение об ошибке в своих лог-файлах.
            Причина этого в том, что если бы она начала аттестацию также, то вы бы начали **двойную аттестацию**, что является **наказуемым нарушением**.
            При наказании ваш валидатор будет принудительно выведен из Beacon chain, и вы потеряете значительное количество ETH.

            В большинстве случаев обнаружение двойников не приведет ни к чему, кроме нескольких пропущенных аттестаций после перезапуска клиента.
            В ситуациях, когда вы переносите свой валидатор на новую машину или меняете на новый клиент Beacon, однако, **обнаружение двойников может предотвратить ваше наказание за случайную двойную аттестацию**.

            Думайте об этом как о дешевой страховке для ваших minipools; вы упустите незначительную часть прибыли каждый раз при перезапуске, но вы можете быть достаточно уверены, что не случайно запустите свои ключи в двух местах и не будете за это наказаны.

          </Tab>
          <Tab label="Teku">
            Начните с указания URL для API вашей Teku Beacon Node:

            <img src={tuiExternalTeku} width="100%" height="auto"/>

            Smartnode будет использовать HTTP URL для связи с ним и выполнения блокчейн-активности, таких как запросы состояния цепочки и отправка сообщений.
            **Если у вас еще не включен и не доступен порт API с машины Smartnode, вам нужно будет настроить его сейчас.**
            См. [документацию Teku](https://docs.teku.consensys.net/en/latest/Reference/CLI/CLI-Syntax/#rest-api-enabled) для инструкций о том, как это сделать.


            <p className="rspress-directive warning">
              <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
              Поскольку Smartnode будет работать в собственном контейнере Docker, он будет использовать внутреннюю сеть Docker.
              Вы не сможете использовать здесь имена хостов, такие как `localhost` или `127.0.0.1`; если ваш клиент работает на той же машине, что и Smartnode, вам нужно будет предоставить локальный IP-адрес машины вместо этого.
            </p>

            Далее она спросит о **граффити** сообщении вашего валидатора:

            <img src={tuiExternalGraffiti} width="100%" height="auto"/>

            Это необязательное пользовательское сообщение, которое вы можете прикрепить к любым блокам, которые вы предлагаете в Beacon Chain.
            Сообщение будет сохранено навсегда, так что думайте об этом как о забавном небольшом способе оставить свой след!

            **Обратите внимание, что максимальная длина граффити - 16 символов.**

            Если вы хотите увидеть примеры того, что валидаторы используют для граффити сегодня, [посмотрите здесь](https://beaconcha.in/blocks).
          </Tab>

        </Tabs>
      </div>
    </Tab>

  </Tabs>
</div>

#### Синхронизация контрольных точек Beacon Chain

**Синхронизация контрольных точек** - это очень полезная техника, которую поддерживают некоторые клиенты Beacon Chain.
Она позволяет вашему клиенту Beacon мгновенно синхронизировать всю Beacon chain, не начиная с самого начала и не наверстывая каждый блок.
Это означает, что вместо **дней** ваш клиент Beacon может быть готов за считанные **минуты**.
Всё, что ему нужно, это доступ к существующему клиенту Beacon, которому вы доверяете.

Вы можете использовать любую Beacon node, которая предоставляет доступ к своему HTTP API.
В настоящее время многие операторы узлов используют checkpoint-sync-endpoints - сервис, который позволяет операторам узлов Rocket Pool легко выполнять синхронизацию контрольных точек.
Поддерживаются как тестовая сеть Hoodi, так и Mainnet.
Список URL-адресов синхронизации контрольных точек можно найти по следующей ссылке:

- [URL-адреса синхронизации контрольных точек](https://eth-clients.github.io/checkpoint-sync-endpoints/)

Выберите соответствующий URL синхронизации контрольной точки и вставьте его в терминал во время `rocketpool service config`, когда он запросит вас о провайдере синхронизации контрольной точки.

После этого ваша Beacon node автоматически подключится к узлу синхронизации контрольной точки при первом запуске и мгновенно загрузит последнее состояние цепочки!

::: warning ПРИМЕЧАНИЕ
Синхронизация контрольной точки произойдет только в том случае, если у вас _еще нет никаких данных Beacon Chain_.
Другими словами, если вы начнете синхронизацию обычным способом и решите выполнить синхронизацию контрольной точки позже, вам сначала нужно будет удалить данные вашей цепочки, чтобы синхронизация контрольной точки работала.
Это можно легко сделать с помощью следующей команды:

```shell
rocketpool service resync-eth2
```

:::

### Резервный узел

Начиная с версии 1.5.0 стека Smartnode, вы можете предоставить "резервную" пару клиентов исполнения и консенсуса, которая может взять на себя управление вашими основными клиентами, если они когда-либо выйдут из строя (например, потому что вы используете Geth и вам нужно его обрезать).
В этой ситуации ваша основная машина узла по-прежнему будет отвечать за аттестацию и предложение блоков с ключами валидатора ваших minipools, но она будет подключаться к внешней машине для взаимодействия с уровнем исполнения и цепочками Beacon.

[Чтобы узнать больше о резервных узлах, см. этот раздел](./fallback) и вернитесь сюда, когда закончите.

### Настройка метрик

Rocket Pool поставляется с возможностью отображения подробной панели, показывающей метрики о состоянии оборудования вашего узла, обновлениях системы, производительности вашего валидатора, ваших наградах, информации об общей сети Rocket Pool и многом другом:

<img src="./images/nimbus-dashboard.png" width="100%" height="auto" />

Следующий вопрос в мастере спросит вас, хотите ли вы включить это:

<img src="./images/tui-metrics.png" width="100%" height="auto" />

Если вы решите включить его, вы узнаете больше о его настройке и о том, как его использовать, в разделе [Настройка панели Grafana](./grafana) позже в процессе.

::: warning ПРИМЕЧАНИЕ
Все данные, собранные этой системой, **остаются на вашей машине**.
Rocket Pool не собирает никакой телеметрии и не отправляет её в отдельный сервис.
Это исключительно для вас, чтобы вы могли контролировать свой собственный узел!
:::

### Настройка MEV

После объединения уровней исполнения и консенсуса в сентябре 2022 года валидаторы Ethereum теперь имеют возможность зарабатывать приоритетные комиссии и участвовать в максимально извлекаемой стоимости (или сокращенно MEV).

Начиная с Smartnode v1.7.0, MEV теперь _с возможностью отказа_, поэтому его настройка представлена как часть первоначальной настройки, как вы видите на следующем экране:

<img src="./images/tui-mev-mode.png" width="100%" height="auto" />

[Пожалуйста, прочитайте наше руководство по MEV, чтобы узнать больше о MEV, его настройке и что делать в этом разделе мастера.](./mev)
Вернитесь сюда, когда закончите.

### Завершение

После этого вопроса вы завершили настройку Smartnode!
Вы увидите следующий диалог:

<img src="./images/tui-finished.png" width="100%" height="auto" />

Если вы довольны своей настройкой и готовы запустить Smartnode, нажмите `Save and Exit` здесь и перейдите к разделу [Защита вашего узла](./securing-your-node) далее.

Если вы хотите просмотреть все настройки и настроить много дополнительных параметров, которые не были включены в мастер, нажмите `Review All Settings` и перейдите к [следующему разделу](#настройка-через-менеджер-настроек).

## Настройка через менеджер настроек

Если вы уже запускали `rocketpool service config`, вместо того чтобы быть встреченным мастером, вы увидите экран **менеджера настроек**:

<img src="./images/tui-settings-manager.png" width="100%" height="auto" />

На этом экране есть три основные функции:

1. **Список категорий**, который позволяет вам детализировать настройки для каждой категории стека Smartnode
2. Кнопка **Review Changes and Save** (Просмотреть изменения и сохранить), которую вы можете использовать, когда будете готовы увидеть, какие настройки вы изменили, и сохранить обновленную конфигурацию
3. Кнопка **Open the Config Wizard** (Открыть мастер настройки), которая переведет вас к [мастеру настройки](#настройка-стека-smartnode-через-мастер), если вы предпочитаете этот интерфейс

::: tip СОВЕТ
Чтобы использовать менеджер настроек, **нажимайте `клавиши стрелок` (вверх/вниз/влево/вправо) для навигации между опциями на главной странице**.

Нажмите `Tab`, чтобы переключаться **между списком категорий (1) и кнопками (2 и 3)** внизу экрана.
Кнопка, которая выбрана в данный момент, будет **подсвечена зеленым**.

**Нажмите `Enter` или `Пробел`, чтобы выбрать кнопку**, аналогично щелчку по ней мышью.

**Удерживайте `Ctrl` и нажмите `C` в любое время, чтобы выйти из менеджера настроек без сохранения**.
:::

По мере прокрутки списка категорий для каждой опции будет появляться полезное описание в **поле описания** справа от экрана.
Не стесняйтесь исследовать их; ничего не будет сохранено, пока вы не пройдете через диалог просмотра с помощью кнопки **Review Changes and Save**, и вы можете нажать **Ctrl+C** в любое время, чтобы выйти без сохранения, так что вы не испортите что-то случайно, играя с настройками здесь.

### Настройка параметров

С главного экрана выберите любую из категорий клавишей `Enter`, чтобы просмотреть настройки для этой категории.
Например, вот экран для категории **Smartnode and TX Fees** (Smartnode и комиссии за транзакции):

<img src="./images/tui-smartnode.png" width="100%" height="auto" />

Используйте `клавиши стрелок`, чтобы двигаться вверх и вниз между настройками.
У выбранной в данный момент будет белый квадрат в конце (если это текстовое поле или флажок) или она будет подсвечена белым (если это выпадающий список).

Нажмите `Escape`, чтобы вернуться на главный экран менеджера настроек, когда закончите.

По мере прокрутки настроек каждая из них будет показывать краткое описание того, что она делает, в **поле описания** справа.
Также там будет показано **значение по умолчанию** на случай, если вы захотите вернуть его к стандартной настройке.

В этом примере настройка **RPL Claim Gas Threshold** (порог газа для получения RPL) выбрана в данный момент (подсвечена зеленым прямоугольником на левой стороне экрана).
Она была изменена на `40`, но вы можете видеть, что у неё значение по умолчанию `150` в правом верхнем углу (вверху **поля описания**).

::: tip СОВЕТ
Напоминаем, ничего не будет сохранено на диск, пока вы не пройдете через диалог просмотра с помощью кнопки **Review Changes and Save**.
Вам рекомендуется исследовать все настройки, чтобы узнать о них и увидеть, что может делать ваш Smartnode!
:::

### Типы настроек и как их использовать

Менеджер настроек использует следующие типы настроек и элементы пользовательского интерфейса:

#### Текстовые поля

Текстовые поля используются для ввода произвольных строк текста или чисел.
Они выглядят так:

<img src="./images/tui-textbox.png" width="100%" height="auto" />

Введите желаемые значения в них, затем **нажмите `Enter` или используйте `клавиши стрелок` для перехода к другой настройке, чтобы сохранить изменения.**
Если вы этого не сделаете, менеджер настроек будет предполагать, что вы все еще обновляете эту настройку, и не отметит её как измененную.

#### Выпадающие списки

Выпадающие списки используются для выбора опции из списка вариантов.
Они выглядят так (когда они открыты):

<img src="./images/tui-dropdown-open.png" width="100%" height="auto" />

**Зеленый** элемент - это тот, который выбран в данный момент.
Используйте `клавиши стрелок`, чтобы изменить варианты - когда вы это делаете, **поле описания** справа будет обновляться, чтобы рассказать вам больше о выбранной в данный момент опции.
Когда вы будете довольны своим выбором, нажмите `Enter`, чтобы выбрать выбранную опцию, и выпадающий список закроется, показывая опцию, которая выбрана в данный момент:

<img src="./images/tui-dropdown-closed.png" width="100%" height="auto" />

#### Флажки

Флажки используются для простых вопросов Да/Нет.
Они выглядят так:

<img src="./images/tui-checkbox-checked.png" width="100%" height="auto" />

Когда они отмечены, у них будет `X` посередине, как вы видите выше.
Когда они _не отмечены_, они будут просто пустыми, как это:

<img src="./images/tui-checkbox-unchecked.png" width="100%" height="auto" />

Чтобы изменить настройку, просто выберите её и нажмите `Enter`.

### Сохранение изменений

Когда вы будете довольны своими изменениями и захотите просмотреть их перед сохранением, нажмите кнопку **Review Changes and Save** на главном экране.
Напоминаем, чтобы добраться до неё, нажмите клавишу `Tab`.

Вам будет представлен вид, который выглядит так:

<img src="./images/tui-review.png" width="100%" height="auto" />

**Поле просмотра** здесь представит все настройки, которые вы изменили, показывая старые значения и новые.
Например, первая строка здесь показывает, что **RPL Claim Gas Threshold** раньше был `150`, а был изменен на `40`.

Также он покажет вам, какие контейнеры затронуты настройками, которые вы изменили, и предложит перезапустить их для вас после того, как вы сохраните свои изменения.

::: tip ПРИМЕЧАНИЕ
На этом этапе ваши изменения **все еще не сохранены**.
Если вы хотите вернуться и что-то изменить, нажмите `Escape`, чтобы вернуться на главный экран.
:::

Когда вы будете удовлетворены изменениями, нажмите `Enter`, чтобы сохранить новую конфигурацию на диск.
Затем вы выйдете из терминального интерфейса и вам будет представлено что-то вроде этого сообщения:

```
Your changes have been saved!
The following containers must be restarted for the changes to take effect:
	rocketpool_watchtower
	rocketpool_validator
	rocketpool_eth2
	rocketpool_node
Would you like to restart them automatically now? [y/n]
```

Нажмите `y` и `Enter`, если хотите автоматически применить новые изменения конфигурации и перезапустить затронутые контейнеры.

Нажмите `n` и `Enter`, если у вас есть другие вещи, которые вы хотите сделать перед их перезапуском, и сделаете это вручную позже.

В любом случае ваша конфигурация завершена!

::: tip ПРИМЕЧАНИЕ
Вы можете увидеть сообщение об ошибке, подобное приведенному ниже:

```
2022/08/13 13:49:41 Error piping stdout: read |0: file already closed
```

На самом деле это не ошибка, это просто косметический глюк.
Вы можете спокойно игнорировать её.
:::

::: tip ПРИМЕЧАНИЕ
Если вы используете Mac OS, вы можете увидеть проблему, жалующуюся на node_exporter.
Вам нужно будет запустить эти команды для исправления.

```shell
rocketpool service stop
nano ~/.rocketpool/override/exporter.yml
```

Замените всё содержимое файла на:

```
# Enter your own customizations for the node exporter container here. These changes will persist after upgrades, so you only need to do them once.
#
# See https://docs.docker.com/compose/extends/#adding-and-overriding-configuration
# for more information on overriding specific parameters of docker-compose files.

version: "3.7"
services:
  node-exporter:
    x-rp-comment: Add your customizations below this line
    volumes:   ["/proc:/host/proc:ro","/sys:/host/sys:ro"]
```

затем наконец `rocketpool service start`.
:::

## Настройка через командную строку

Если вы используете Smartnode в безголовой среде, где вы не можете взаимодействовать с терминальным интерфейсом, вы можете настроить свой узел через командную строку вместо этого.

Команда `rocketpool service config` принимает в качестве аргументов каждую настройку, которую обычно можно настроить через терминальный интерфейс.
Запустите следующую команду, чтобы увидеть их список (обратите внимание, что он довольно длинный):

```shell
rocketpool service config --help
```

Вывод будет выглядеть так:

```
NAME:
   rocketpool service config - Configure the Rocket Pool service

USAGE:
   rocketpool service config

OPTIONS:
   --executionClientMode value  Choose which mode to use for your Execution client - locally managed (Docker Mode), or externally managed (Hybrid Mode).
                                Type: choice
                                Options: local, external
 (default: "local")
   --executionClient value  Select which Execution client you would like to run.
                            Type: choice
                            Options: geth, infura, pocket
 (default: "geth")
   --useFallbackExecutionClient         Enable this if you would like to specify a fallback Execution client, which will temporarily be used by the Smartnode and your Consensus client if your primary Execution client ever goes offline.
                                        Type: bool

...
```

Каждая опция будет иметь своё имя, тип, значение по умолчанию и (если это параметр выбора) свои варианты.
Используя этот текст, вы можете найти опцию(и), которые хотите установить, и указать их через соответствующие аргументы.

::: tip ПРИМЕЧАНИЕ
Эта команда надстраивается поверх вашей существующей конфигурации, поэтому если у вас уже сохранены некоторые настройки и вы просто хотите изменить другие, вам не нужно их повторять.
Она обновит только настройки, которые вы включите в качестве аргументов этой команды.
:::

## Следующие шаги

После того как вы настроили свой узел так, как вам нравится, вы готовы защитить свою операционную систему для защиты вашего узла.
Переходите к разделу [Защита вашего узла](./securing-your-node) далее.
