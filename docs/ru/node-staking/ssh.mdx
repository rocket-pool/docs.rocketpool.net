import { Tab, Tabs } from "@rspress/core/theme";
import powershell from "./images/powershell.png";

# Введение в Secure Shell (SSH)

В общем случае существует два способа доступа к вашей машине узла: **локально** и **удалённо**.

- **Локально** означает физическое присутствие рядом с узлом с использованием монитора и клавиатуры, подключённых непосредственно к нему.
- **Удалённо** означает подключение к узлу с использованием другого компьютера (например, ноутбука или настольного компьютера) по сети и взаимодействие с ним оттуда.

Большую часть времени операторы узлов предпочитают гибкость работы со своим узлом **удалённо**.

Smartnode в настоящее время не имеет GUI (графического пользовательского интерфейса), только CLI (интерфейс командной строки), что означает, что взаимодействие с ним осуществляется полностью путём ввода команд в терминал командной строки.
Таким образом, удалённое взаимодействие с ним требует какого-либо способа доступа к терминалу вашего узла с другой машины.
В этом разделе мы кратко представим наиболее популярный способ сделать это: **SSH**.

<div className="p-3">
  <Tabs>
    <Tab label="Использование машины Windows">
      Существует несколько разных способов использовать SSH с машины Windows.

      Самый простой — использовать **Powershell**, мощный командный терминал, который встроен в современные версии
      Windows.
      Powershell имеет встроенный SSH, поэтому вы можете использовать его сразу без установки дополнительных программ.

      Вы можете найти его, открыв меню Пуск и введя `Powershell` в строку поиска; будет несколько
      вариантов, но нужный вам вариант называется просто `Windows Powershell`:

      <img src={powershell} width="100%" height="auto" />

      Откроется терминал с синим фоном.
      Вы можете использовать `ssh` отсюда — см. ниже инструкции о том, как это сделать.

      Другой популярный инструмент называется [PuTTY](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html).
      PuTTY — это специальная программа, которая включает терминал, предназначенный для использования SSH, но также поставляется с удобным GUI
      для таких действий, как изменение конфигураций, сохранение настроек в «профиль» и ведение списка машин,
      к которым можно легко подключиться, выбрав из списка.

      Вместо использования `ssh`, как вы бы делали с другими инструментами, PuTTY сделает это за вас автоматически — всё, что вам нужно
      предоставить, это имя пользователя и пароль.
      Для получения информации о том, как использовать PuTTY, посмотрите [этот отличный
      учебник](https://tonyteaches.tech/putty-ssh-windows-tutorial/).

      <p className="rspress-directive warning">
        **ПРИМЕЧАНИЕ**: PuTTY может отображать неправильные цвета в текстовом пользовательском интерфейсе (TUI) `rocketpool service
        config`.
        Для этого есть простое решение. В настройках PuTTY
        перейдите в **Connection** > **Data** > **Terminal Details**
        в выпадающем меню. Там должно быть текстовое поле **Terminal-type string**. Введите `xterm-256color`, затем сохраните
        настройки,
        чтобы решить эту проблему.
      </p>

    </Tab>
    <Tab label="Использование машины Linux или macOS">
      Использование SSH с машины Linux или macOS тривиально; если вы уже используете одну из них, то, вероятно, уже
      взаимодействовали с терминалом в какой-то момент.
      SSH встроен непосредственно в терминал; используйте его, выполнив команду `ssh`. По умолчанию SSH позволит вам
      подключиться к основной учётной записи пользователя вашего узла.
    </Tab>

  </Tabs>
</div>

Вот как вы подключитесь к своему узлу с помощью SSH.

:::warning ПРИМЕЧАНИЕ
Выполните следующую команду с вашего ноутбука или настольного компьютера, **а не с самого узла**!
:::

```shell
ssh username@node-ip-address
```

Допустим, например, что имя пользователя вашего узла — `staker`, а IP-адрес вашего узла — `192.168.1.10`.
Вы подключитесь к нему с помощью следующей команды:

```shell
ssh staker@192.168.1.10
```

Первый раз, когда вы это сделаете, вы увидите сообщение с открытым ключом, который использует ваш узел — если вы
знакомы с тем, как проверить этот ключ, вы можете сделать это сейчас.
В противном случае, если вы уверены, что в вашей команде `ssh` указан правильный IP-адрес узла, вы можете просто сказать `yes`, чтобы
принять его.
Вам нужно сделать это только один раз.

Затем клиент попросит вас ввести пароль пользователя; после того, как вы его введёте, вы внутри!
Вас встретит приветственное сообщение, некоторые сведения о вашей машине и новое приглашение командной строки.

С этого момента всё, что вы вводите в терминале, **выполняется удалённо на вашей машине узла** — это как если бы вы
вошли непосредственно в машину узла и печатали на ней с локально подключённой клавиатурой!

Вам нужно будет периодически подключаться по SSH к терминалу для обновлений и обслуживания.
Может быть неудобно помнить, как войти в ваш узел, поэтому может быть полезно сократить эту команду, создав
запоминающийся псевдоним — пользовательскую команду-«ярлык».

:::warning ПРИМЕЧАНИЕ
Если вы это сделаете, обязательно создайте псевдоним на **клиентской машине**, **а не** на узле!
Если ваш терминал всё ещё подключён к узлу, сначала выполните `exit` в командной строке (или просто откройте новое
окно терминала).
:::

:::warning ПРИМЕЧАНИЕ
Этот раздел применим только к пользователям Linux/OSX или WSL — PowerShell не поддерживается.
:::

В этом примере мы создадим псевдоним под названием `ethnode`, который заменит команду SSH.
Предполагая, как и раньше, что имя пользователя вашего узла — `staker`, а IP-адрес вашего узла — `192.168.1.10`, создайте
псевдоним с помощью следующей команды:

```shell
echo "alias ethnode='ssh staker@192.168.1.10'" >> ~/.bash_aliases
```

Перезагрузите список псевдонимов, чтобы ваше текущее окно терминала узнало о новом псевдониме:

```shell
source ~/.bash_aliases
```

Теперь вы можете подключиться к узлу, используя только что созданный псевдоним, вместо более длинной команды, которая включает
указание IP-адреса узла:

```shell
ethnode
```
