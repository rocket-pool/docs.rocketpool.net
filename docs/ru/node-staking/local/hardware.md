# Выбор оборудования для стейкинга

Официальных спецификаций для работы узла Rocket Pool не существует.
Эта страница предлагает некоторые рекомендации и примеры, которые вы можете использовать для выбора оборудования для стейкинга.

Минимальные аппаратные требования вашего узла будут зависеть от клиентов Consensus и Execution, которые вы выберете.
Если, например, вы планируете запускать узел на маломощном устройстве, вы можете быть ограничены использованием `Geth` в качестве клиента Execution и `Nimbus` в качестве клиента Consensus.
Если вы используете более мощный NUC с 32+ ГБ ОЗУ, вам доступны все комбинации клиентов.

Приведенные ниже рекомендации предполагают, что вы хотите **комфортный** уровень оборудования, то есть у вас есть избыточная мощность.
Если вы будете следовать этим рекомендациям, ваш узел будет иметь достаточно ресурсов для работы любых поддерживаемых Rocket Pool комбинаций клиентов.
Это позволит вам выбрать `random` пару клиентов, что очень важно для разнообразия клиентов в сети Ethereum.

::: tip ПРИМЕЧАНИЕ
Стейкинг Ethereum очень снисходительный.
Если ваш дом затоплен и ваше устройство для стейкинга вышло из строя, нет большого штрафа за то, чтобы вернуться к работе в течение недели (если только вы не находитесь в комитете синхронизации, что является очень редким событием).
Сбой компонентов может произойти в какой-то момент, но не переживайте об этом.
Простой не приведет к слешингу, если вы не офлайн во время крупного сбоя всей сети Ethereum.
:::

## Аппаратные требования

Валидаторы Ethereum не очень требовательны к вычислительным ресурсам, что означает, что как только ваши клиенты Execution и Consensus работают, любой дополнительный валидатор будет использовать **очень небольшое количество дополнительных ресурсов**.
Это справедливо до 64 валидаторов, после чего ресурсы, необходимые для добавления 65-го валидатора и последующих, становятся незначительными.

По нашему опыту, большинство настроек, включая mini-PC и NUC, способны работать с практически неограниченным количеством валидаторов.

### Требования к процессору

**Рекомендация: любой современный процессор с минимум 4 потоками.**

Работа узла Rocket Pool не очень требовательна к вычислениям.
Наибольшее влияние процессора проявляется в том, насколько быстро ваш узел может первоначально синхронизировать состояние блокчейна, когда вы впервые создаете его (или если вы когда-либо измените клиенты позже).
После первоначальной синхронизации процессор используется не так интенсивно.

Названия процессоров могут вводить в заблуждение; Intel Core i5 2010 года обычно **менее мощный**, чем core i3 2022 года.
Многие члены сообщества используют устройства Intel NUC из-за их малого форм-фактора, но старый i5 NUC может быть худшим выбором, чем новый i3.
По этой причине мы рекомендуем использовать «современный» процессор, которому не более нескольких лет.
Более конкретно, **для процессоров на базе x64** мы рекомендуем процессор, поддерживающий расширение [BMI2](<https://en.wikipedia.org/wiki/X86_Bit_manipulation_instruction_set#BMI2_(Bit_Manipulation_Instruction_Set_2)>) - проверьте спецификации производителя вашего процессора, чтобы узнать, поддерживается ли оно.
Не все современные процессоры поддерживают это; например, процессоры Celeron, как правило, не включают его.

Процессоры на базе ARM (такие как Mac M1 или M2, или Rock 5B) не относятся к вышеуказанному расширению BMI2.

::: tip ПРИМЕЧАНИЕ
Если вы заинтересованы в использовании NUC, вы можете определить, насколько современным является NUC, по его номеру модели.
Они отформатированы как `NUC` + `номер поколения` + `модель` + `тип процессора` + `суффикс`.
Например, устройство `NUC11PAHi50Z` является устройством i5 11-го поколения.
Вы можете увидеть список NUC [здесь](https://www.intel.com/content/www/us/en/products/details/nuc/kits/products.html) на веб-сайте Intel.

Другие mini-PC, такие как Asus PN50 или PN51, не следуют этому соглашению, но информация о том, какой процессор в них используется, должна быть включена на страницах их продуктов.
:::

Количество ядер на процессоре менее релевантно, чем его **количество потоков**.
Мы рекомендуем **минимум 4 потока** для работы узла Rocket Pool.
Двухъядерный процессор с 4 потоками будет работать без проблем.
Найти процессор только с 2 потоками редкость.

### Требования к ОЗУ

**Рекомендация: минимум 16 ГБ ОЗУ, предпочтительно 32 ГБ, предпочтительно DDR4**

Узлы Rocket Pool могут работать всего с 16 ГБ ОЗУ.
Мы обычно рекомендуем иметь немного больше, чтобы предложить некоторый запас и полную поддержку клиентов, требовательных к ОЗУ, таких как Teku.
Дополнительным преимуществом большего объема ОЗУ является то, что вы можете предоставить больший размер кэша клиенту Execution, что имеет тенденцию замедлять скорость использования вашего дискового пространства.

### Требования к SSD

**Рекомендация: SSD объемом 2+ ТБ с TLC или лучше, с кэшем DRAM. Предпочтительно NVMe.**

Этот элемент более важен, чем ожидает большинство людей.
Клиент Execution сильно зависит от IOPS, или «операций в секунду»; мы рекомендуем 15k Read IOPS и 5k Write IOPS
На практике это означает, что:

- Жесткие диски HDD (с вращающимися дисками) не будут работать
- SATA или внешние USB 3.0+ SSD _могут_ работать
- Предпочтительны диски NVMe SSD

Если у вас уже есть SSD, который вы хотите использовать, и вы хотите убедиться, что он имеет достаточную производительность для работы узла.

_\* Если вы не уверены, соответствует ли ваш диск этим требованиям производительности, `fio` - хороший способ их проверить.
См. [здесь](https://arstech.net/how-to-measure-disk-performance-iops-with-fio-in-linux/) инструкции для Linux,
и [здесь](https://www.nivas.hr/blog/2017/09/19/measuring-disk-io-performance-macos/) инструкции для MacOS._

:::tip ПРИМЕЧАНИЕ
Выбор SSD может быть сложным решением!

Метод, который SSD используют для хранения данных на своих флеш-чипах, оказывает заметное влияние на скорость и долговечность.
При покупке SSD вы можете заметить такие метки, как `QLC`, `TLC` или `SLC`.
Они обозначают количество данных, содержащихся в одной ячейке флеш-чипа: `Q` для "quad" означает 4, `T` для "triple" означает 3, `M` для "multi" означает 2, а `S` для "single" означает 1.

Мы рекомендуем диски **TLC, MLC или SLC**.
Мы **не рекомендуем диски QLC** из-за их более низкой производительности и меньшей общей надежности.

SSD поставляются с DRAM или без него, что является аппаратным элементом, который делает доступ к данным на SSD более эффективным.
Те, что с DRAM, быстрее, но те, что без DRAM, дешевле.
Однако DRAM довольно важен для обеспечения плавной работы узла.

Мы рекомендуем диск с кэшем **DRAM**.
Мы **не рекомендуем диски без DRAM**.
:::

Последнее соображение - размер диска.
По состоянию на 10/2024 размер базы данных клиента execution `geth` требует около 1,2 ТБ пространства после завершения первоначальной синхронизации (или после того, как вы только что закончили обрезку).
Это будет неуклонно расти со временем, и хотя обрезка может восстановить часть этого пространства, свежеобрезанное состояние _действительно_ растет со временем.
У вас будет спокойствие с диском большего размера.

### Обычные аксессуары

Многие операторы узлов улучшают свои настройки сверх минимальных требований.
Некоторые общие дополнения включают:

- Радиаторы SSD для продления срока службы диска
- Источники бесперебойного питания (ИБП) на случай отключения электроэнергии
- Резервный узел для резервного копирования на случай сбоя

Все это удобно иметь, но не требуется для работы узла Rocket Pool.
