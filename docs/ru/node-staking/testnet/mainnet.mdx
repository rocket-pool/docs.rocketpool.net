import { Tab, Tabs } from "@rspress/core/theme";

# Миграция с тестовой сети на Mainnet

Если вы уже использовали Rocket Pool в нашей тестовой сети Hoodi, освоились с её особенностями и готовы либо застейкать ETH, либо запустить ноду по-настоящему в основной сети Ethereum, то это руководство для вас!
Здесь вы найдете инструкции о том, как перенести существующий стек Smartnode с тестовой сети Hoodi на сеть, подключенную к Ethereum mainnet, готовую для стейкинга ваших собственных реальных ETH и RPL.

## Стейкинг в пуле на Mainnet

Стейкинг в пуле — это в значительной степени тот же процесс на mainnet, что и в testnet.
URL будет другим, и адрес токена rETH может отличаться, но существенных изменений в рабочем процессе нет.
Следуйте [руководству по стейкингу](../../liquid-staking/overview), которое было обновлено с инструкциями для mainnet.

### Различия между тестовой сетью и Mainnet

- В тестовой версии Smartnode есть кран для тестовых ETH. В Smartnode для mainnet **крана нет**. Вам нужно будет предоставить свои собственные ETH для стейкинга.
- Mainnet поддерживает множество кошельков Ethereum через WalletConnect, поэтому вы можете использовать другие кошельки, которые вы не могли использовать в testnet. **Вы больше не ограничены использованием Metamask для стейкинга**.

## Работа Smartnode на Mainnet

::: danger ПРИМЕЧАНИЕ
**Ничто** из тестовой сети не может быть перенесено в mainnet.
Данные цепи различаются как для Execution, так и для Consensus, поэтому вы должны удалить старые данные цепи и синхронизировать цепи mainnet с нуля.
Ваши валидаторы в testnet не переносятся в mainnet.
Также, в целях безопасности, совместимости и безопасности, **вы должны создать новый кошелек в mainnet!**
**Не используйте ваш кошелек ноды из testnet в mainnet!**

**Следующие шаги удалят все ваши данные testnet.**
Если вы хотите сохранить настройку вашей тестовой сети, вам следует сделать резервную копию вашего жесткого диска или переместить его на другую машину.
:::

### Различия между тестовой сетью и Mainnet

- В тестовой версии Smartnode есть кран для ETH и RPL. В Smartnode для mainnet **крана нет**. Вам нужно будет предоставить свои собственные ETH и свои собственные RPL.
- Если вы используете Geth, нагрузка на вашу ноду будет **значительно выше**. Geth занимает примерно в 40 раз больше дискового пространства, чем Hoodi, и требует больше мощности процессора и оперативной памяти для обработки. Если вы используете дашборд Rocket Pool Grafana, будьте готовы к значительно более высокому использованию.
  Полная нода Geth использует 1.4 ТБ по состоянию на 2025-09-19. [Удаление данных блоков до слияния](../maintenance/history-expiry) может сократить использование хранилища примерно на 300-500 ГБ.
- Ваши пиры Beacon Chain (и, следовательно, ваша эффективность аттестации) будут **выше**, чем в testnet. Пиры в mainnet гораздо более разнообразны и, как правило, более высокого качества, чем в testnet.
- Контрольная точка вознаграждений RPL происходит каждые **28 дней** вместо каждых 2 дней, чтобы компенсировать высокие комиссии за газ.
- Цена RPL, используемая сетью Rocket Pool (и, следовательно, ваш уровень обеспечения), вместе с общим эффективным застейканным RPL во всей сети сообщается **раз в 24 часа** вместо одного раза в час.

### Автоматическая миграция (только режим Docker)

Для пользователей режима Docker Smartnode может автоматически выполнить миграцию в Mainnet за вас.

**Пока у вас все еще настроена testnet**, выйдите из ваших валидаторов на Hoodi:

```
rocketpool minipool exit
```

Выберите `1: All available minipools` из списка вариантов и дождитесь завершения.
Это поможет очистить сеть, удалив ваши валидаторы, вместо того чтобы оставить их постоянно проваливать аттестации и ослаблять здоровье Hoodi (поскольку они больше не в сети).

После этого откройте диспетчер настроек:

```
rocketpool service config
```

Затем откройте категорию **Smartnode and TX Fees** и измените выпадающий список **Network** с `Hoodi Testnet` на `Ethereum Mainnet`:

<img src="../images/tui-change-network.png" width="100%" height="auto" />

Когда вы сохраните и выйдете, вы получите уведомление о том, что все будет стерто, и диалог подтверждения:

```
WARNING: You have requested to change networks.

All of your existing chain data, your node wallet, and your validator keys will be removed.

Please confirm you have backed up everything you want to keep, because it will be deleted if you answer `y` to the prompt below.

Would you like the Smartnode to automatically switch networks for you? This will destroy and rebuild your `data` folder and all of Rocket Pool's Docker containers. [y/n]
```

Сделайте резервную копию всего, что вы хотите сохранить (например, вашей папки `data`, которая содержит ваш кошелек ноды и ключи валидатора), затем нажмите `y` и `Enter`, когда будете готовы.
Smartnode автоматически выполнит переключение.

Когда это будет сделано, у вас будет свежая установка в Mainnet.
Все ваши настройки (такие как выбор клиента) будут сохранены, но вам нужно будет создать новый кошелек. Также, вероятно, у вас не будет _URL точки синхронизации контрольной точки_ для mainnet, и вам следует настроить его, как объяснено [здесь](../config-docker.html#beacon-chain-checkpoint-syncing); в противном случае синхронизация цепи beacon mainnet займет много времени.

### Ручная миграция

Если по какой-либо причине вы не можете воспользоваться автоматическим процессом миграции Smartnode, вы можете сделать это вручную в несколько простых шагов:

<div className="p-3">
  <Tabs>
    <Tab label="Docker">
      1. **Пока у вас все еще настроена testnet**, выйдите из ваших валидаторов на Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Выберите `1: All available minipools` из списка вариантов и дождитесь завершения.
      Это поможет очистить сеть, удалив ваши валидаторы, вместо того чтобы оставить их постоянно проваливать аттестации и ослаблять здоровье Hoodi (поскольку они больше не в сети).

      2. Остановите testnet:

      ```shell
      rocketpool service stop
      ```

      3. Удалите данные цепи testnet и контейнеры Docker:

      ```shell
      rocketpool service terminate
      ```

      4. Удалите вашу папку конфигурации Rocket Pool:

      ```shell
      sudo rm -rf ~/.rocketpool
      ```

      5. (Необязательно) Удалите ваш CLI Rocket Pool:

      ```shell
      rm ~/bin/rocketpool
      ```
      Вы все равно перезапишете это последней версией CLI, но если вы хотите быть основательным, вы можете сначала удалить старую версию.

      На этом этапе ваша установка testnet очищена, и вы можете безопасно перейти к новой установке mainnet.
      Внимательно следуйте руководству [Создание ноды с Docker](../docker), чтобы настроить её.
    </Tab>
    <Tab label="Native Mode">
      1. **Пока у вас все еще настроена testnet**, выйдите из ваших валидаторов на Hoodi:

      ```shell
      rocketpool minipool exit
      ```

      Выберите `1: All available minipools` из списка вариантов и дождитесь завершения.
      Это поможет очистить сеть, удалив ваши валидаторы, вместо того чтобы оставить их постоянно проваливать аттестации и ослаблять здоровье Hoodi (поскольку они больше не в сети).

      2. Остановите все сервисы Rocket Pool и Ethereum (используя, например, `geth` и `lighthouse`; замените на сервисы, которые вы создали во время установки):

      ```shell
      sudo systemctl stop rp-node rp-watchtower geth lh-bn lh-vc
      ```

      3. Удалите все данные цепи testnet (например, используя `geth` и `lighthouse` на x64; замените на вашу собственную конфигурацию):

      ```shell
      sudo rm -rf /srv/geth/geth_data
      sudo rm -rf /srv/lighthouse/lighthouse_data
      ```

      4. Удалите папку конфигурации Rocket Pool:

      ```shell
      sudo rm -rf /srv/rocketpool
      ```

      5. (Необязательно) Удалите бинарные файлы CLI и демона Rocket Pool:
      ```shell
      sudo rm /usr/local/bin/rocketpool /usr/local/bin/rocketpoold
      ```
      Вы все равно перезапишете их последними версиями, но если вы хотите быть основательным, вы можете сначала удалить старые версии.

      <p className="rspress-directive warning">
        <p className="rspress-directive-title">ПРИМЕЧАНИЕ</p>
        Для простоты эти инструкции _не включают_ некоторые шаги, такие как удаление пользователей `eth1` и `eth2` или удаление сервисов, которые вы остановили ранее.
        Вы можете повторно использовать их и пропустить шаги, связанные с их настройкой в руководстве по установке.

        Вам потребуется повторить некоторые шаги установки, включая:

        - Создайте папку `/srv/rocketpool` и её каркасную структуру и правильно установите разрешения
        - Получите последние версии выпусков бинарных файлов клиентов Execution и Consensus и клиента Validator
        - Установите **строку `ExecStart`** в сервисах (**используйте конфигурацию mainnet, определенную в руководстве по установке!)**
        - Получите последние бинарные файлы CLI и демона
            - Получите последние файлы конфигурации из архива установщика, поместите их в `/srv/rocketpool` и настройте их в соответствии с настройками вашей ноды
      </p>

      На этом этапе вы готовы к миграции, следуя [руководству по установке в нативном режиме](../native).
    </Tab>

  </Tabs>
</div>
