# Обновление Atlas

::: tip ПРИМЕЧАНИЕ
Atlas был развернут `18 апреля 2023, 00:00 UTC`. Пожалуйста, посетите [здесь](../houston/whats-new), чтобы прочитать о Houston, последнем обновлении протокола.
:::

Эта страница описывает основные изменения, которые следующее крупное обновление Rocket Pool под названием **Atlas** приносит протоколу, включая обновления стека Smartnode и протокола Rocket Pool в целом.

Пожалуйста, внимательно прочитайте эту страницу, чтобы понять все различия между предыдущей версией Rocket Pool (Redstone) и Atlas.

## Новые функции протокола

Atlas приносит некоторые захватывающие новые функции, основанные как на отзывах сообщества, так и на изменениях в самом протоколе Ethereum.
Ниже приведен краткий список этих изменений — нажмите на любой из них, чтобы узнать больше об этом.

### Shapella и выводы средств

Протокол Ethereum готовится к следующему крупному обновлению: **Shanghai** на уровне исполнения и **Capella** на уровне консенсуса — поскольку они теперь взаимосвязаны, оба произойдут одновременно.
Пользователи Ethereum ласково стали называть комбинированное обновление [**"Shapella"**](https://blog.ethereum.org/2023/02/21/sepolia-shapella-announcement) соответственно.

Shapella вводит **выводы средств** в Beacon Chain, что означает, что операторы нод теперь могут получить доступ к ETH, который в настоящее время заблокирован в Beacon Chain.
Это происходит в двух вариантах:

- Частичные выводы (**скимминг**), где ваши вознаграждения (ваш избыточный баланс Beacon Chain свыше 32 ETH) отправляются в ваш minipool на уровне исполнения. Это делается _автоматически самим протоколом_ время от времени (примерно раз в четыре или пять дней в Mainnet).
- **Полные выводы**, где вы выводите своего валидатора из Beacon Chain, и весь его баланс отправляется в ваш minipool на уровне исполнения. Это делается _автоматически самим протоколом_ после того, как ваш валидатор был выведен из цепи достаточно долго.

Atlas вводит новый контракт делегата для minipoolов, который позволяет операторам нод **распределять** баланс ETH minipoolа, разделяя его поровну между оператором ноды и держателями rETH (плюс комиссия, конечно) в любое время.
Это дает операторам нод **немедленный доступ** к их вознаграждениям Beacon Chain!
Это также возвращает долю держателей rETH обратно в пул депозитов, чтобы ее можно было использовать для отмены стейка rETH на ETH по обменному курсу протокола (или для создания новых minipoolов).

### 8-ETH залоговые minipoolы

Одним из наиболее ожидаемых изменений, внесенных в Atlas, является введение возможности предоставлять только 8 ETH для создания minipoolа вместо 16 ETH.
Minipoolы с залогом только 8 ETH от их владельца-оператора ноды сопоставляются с **24 ETH** из стейкинг-пула (предоставленного держателями rETH) для создания валидатора.
Это значительно снижает требование к капиталу для запуска собственного валидатора _и_ приводит к большей доходности как для оператора ноды, так и для стейкеров rETH!
Фактически, запуск двух 8-ETH minipoolов вместо одного 16-ETH minipoolа обеспечит **более 18% больше вознаграждений** — даже если 16-ETH minipool имеет ставку комиссии 20%.

Создание 8 ETH minipoolа требует, чтобы вы застейкали **минимум 2,4 ETH в RPL** и **максимум 12 ETH в RPL**.
Они представляют 10% от суммы, которую вы _заимствуете_ из протокола, и 150% от суммы, которую вы _связываете_ (стейкаете) сами.

Новые minipoolы могут быть созданы с 8 ETH или 16 ETH.
16 ETH minipoolы не изменились по сравнению с тем, как они работают сегодня, и доступны для пользователей, которые хотят минимизировать свою подверженность токену RPL.

Чтобы узнать, как создавать новые minipoolы с залогом 8 ETH, посетите [руководство по созданию minipoolа](../../node-staking/create-validator.mdx).

Кроме того, после применения Atlas операторы нод могут **мигрировать существующие 16-ETH minipoolы непосредственно в 8-ETH minipoolы без необходимости выхода**.
Это даст им 8 ETH обратно в [депозитный кредит](../../node-staking/credit), который можно использовать для создания **нового 8-ETH minipoolа бесплатно**!

Чтобы узнать больше о 8-ETH залоговых minipoolах, посетите [руководство по сокращению залога](../../node-staking/leb-migration.mdx).

### Конвертация соло-валидатора

Часть обновления Shapella включает возможность для соло-валидаторов [изменить учетные данные вывода средств своих валидаторов](https://notes.ethereum.org/@launchpad/withdrawals-faq) с исходного (теперь неиспользуемого) ключа вывода на основе BLS на адрес на уровне исполнения.
Этот адрес будет получателем всех вознаграждений этого валидатора и его полного баланса ETH после выхода из Beacon Chain.

Обычным операторам нод Rocket Pool не нужно беспокоиться обо всем этом, поскольку протокол автоматически настроил это для ваших minipoolов, когда вы их создали.
_Однако_, как часть этого нового требования для соло-валидаторов, Atlas приносит захватывающую возможность: возможность **создать специальный minipool**, который станет адресом вывода средств для вашего **существующего соло-валидатора**.

Другими словами, это позволит вам **напрямую конвертировать соло-валидатора в minipool Rocket Pool без необходимости выхода!**

Это означает, что вы получите все преимущества minipoolов Rocket Pool, включая:

- Возможность конвертировать вашего одного валидатора (с залогом 32 ETH) в **четыре minipoolа** (каждый с залогом 8 ETH), эффективно **учетверяя** ваше присутствие в Beacon Chain
- Комиссию на часть этих minipoolов, предоставленную стейкерами rETH
- Доступ к [Smoothing Pool](../../node-staking/fee-distrib-sp#the-smoothing-pool) Rocket Pool для объединения и равномерного распределения вознаграждений от предложений блоков и MEV

Чтобы узнать больше о конвертации соло-валидатора в minipool, посетите руководство [Конвертация соло-валидатора в minipool](../../node-staking/solo-staker-migration).

## Новые функции Smartnode

В дополнение к основным изменениям в протоколе Rocket Pool, Atlas также приносит некоторые захватывающие обновления самого стека Smartnode, которые присутствуют в v1.9.0.

### Автоматические распределения вознаграждений

Если вы уже являетесь активным оператором ноды Rocket Pool, вы можете быть знакомы с процессом `rocketpool_node`, который обрабатывает определенные автоматизированные процессы.
Например, он гарантирует, что у вас правильный получатель комиссий, и автоматически запускает вторую транзакцию `stake` для вас после того, как minipoolы `prelaunch` пройдут 12-часовую проверку скраба.

Начиная с Atlas, у `node` есть новая обязанность: **автоматическое распределение вознаграждений minipoolа!**
Это связано с тем, как работает [обновление Shapella](../../node-staking/skimming), скимируя ваши вознаграждения из Beacon Chain в ваш minipool каждые несколько дней.

Всякий раз, когда один из ваших minipoolов достигает баланса больше заданного пользователем порога (по умолчанию 1 ETH), нода автоматически запустит `distribute-balance` на нем.
Это отправит вашу часть вознаграждений на ваш адрес вывода средств, а часть стейкеров пула обратно в пул депозитов.

Изменение порога можно выполнить в разделе `Smartnode and TX Fees` TUI `service config`, под настройкой `Auto-Distribute Threshold`.

### Единая панель Grafana

По многочисленным просьбам мы создали новую [**панель Grafana**](https://grafana.com/grafana/dashboards/24900-rocket-pool-dashboard-v1-4-0/), чтобы помочь операторам нод отслеживать и оценивать статус, прогресс и общее состояние своих нод:

![](../../node-staking/images/grafana-1.3.jpg)

Она поставляется со следующими весьма востребованными функциями:

- Поддержка всех клиентов исполнения и консенсуса в одной панели — больше не нужно менять панели в зависимости от того, какие клиенты вы используете!
- Статистика клиента исполнения, включая использование CPU и RAM, и количество пиров
- Отслеживание точности аттестации, которое следит за тем, насколько "правильными" были ваши аттестации за предыдущую эпоху, чтобы вы знали, насколько вы далеки от оптимальных вознаграждений
- Отслеживание баланса Smoothing Pool
- Отслеживание заявленных и незаявленных вознаграждений, теперь включая ETH из Smoothing Pool
- Статистика о голосах управления на основе Snapshot Rocket Pool
- Место для отслеживания использованного пространства и температуры второго SSD, если у вас есть один для вашей ОС и другой для данных цепи
- И многое другое!

Вы можете импортировать новую панель из официального сервиса Grafana, используя ID `21863`, следуя нашему [руководству Grafana](../../node-staking/grafana.mdx).

Эта новая панель была трудом любви, который включал обширную помощь от члена сообщества **0xFornax** — спасибо за всю вашу тяжелую работу!

### Изменения Nimbus

Smartnode v1.9.0 вводит **поддержку раздельного режима** для Nimbus!
Вместо запуска Beacon Node и Validator Client внутри одного процесса / контейнера, Smartnode теперь будет запускать их в отдельных контейнерах, как другие клиенты. Это имеет следующие преимущества:

- Nimbus теперь поддерживает **резервные клиенты** (вторичный клиент исполнения и Beacon Node, к которым Validator Client Nimbus может подключаться, когда ваши основные клиенты отключены для обслуживания, например, повторной синхронизации).
- Nimbus теперь поддерживается в **режиме внешнего управления (гибридном режиме)**, поэтому вы можете связать Validator Client, которым управляет Smartnode, с внешним Beacon Node, который вы поддерживаете самостоятельно.
- Beacon Node больше не нужно перезапускать после добавления новых minipoolов, что означает, что вы не теряете аттестации, пока он переподключается к своим пирам.

### Поддержка Lodestar

[Lodestar](https://chainsafe.github.io/lodestar/) теперь поддерживается как вариант для вашего клиента консенсуса на выбор!
Это новейшее дополнение, официально принятое на [Launchpad Ethereum](https://launchpad.ethereum.org/en/lodestar), и оно готово к валидации.
Lodestar поддерживает многие из замечательных функций, которые вы полюбили в других клиентах, включая обнаружение Doppelganger, MEV-Boost, клиенты с внешним управлением (гибридный режим) и многое другое!

### Новая система снимков сети

На более техническом уровне v1.9.0 вводит совершенно новую систему для быстрого создания снимка состояния **всего о вашей ноде** на уровнях исполнения и консенсуса.
Под капотом эта система использует [контракт multicall MakerDAO](https://github.com/makerdao/multicall) и [контракт проверки баланса Ethereum Will O'Beirne](https://github.com/wbobeirne/eth-balance-checker) для объединения тысяч отдельных запросов к клиенту исполнения в один запрос.

Это делает процесс `node` гораздо менее требовательным к клиенту исполнения для операторов нод с большим количеством валидаторов и должно значительно снизить его нагрузку на CPU, что улучшит аттестации и общие вознаграждения.

Эта новая система еще не проникла в сам CLI, поэтому любые команды, которые вы там запускаете (например, `rocketpool minipool status`), все еще будут использовать старую настройку с одним запросом.
Со временем мы введем ее и в CLI, что сделает все его команды молниеносно быстрыми (_за исключением ожидания проверки транзакций, это все еще занимает некоторое время_).
